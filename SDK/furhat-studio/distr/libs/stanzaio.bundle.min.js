!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.XMPP=e()}}(function(){var e;return function e(t,n,i){function s(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({"/home/michel/stanza.io/index.js":[function(e,t,n){"use strict";n.VERSION="9.0.0",n.JID=e("xmpp-jid").JID,n.Client=e("./lib/client"),n.createClient=function(t){var i=new n.Client(t);return i.use(e("./lib/plugins")),i}},{"./lib/client":"/home/michel/stanza.io/lib/client.js","./lib/plugins":"/home/michel/stanza.io/lib/plugins/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/client.js":[function(e,t,n){"use strict";function timeoutRequest(e,t,n){var i;return Promise.race([e,new Promise(function(e,r){i=setTimeout(function(){r({id:t,type:"error",error:{condition:"timeout"}})},n)})]).then(function(e){return clearTimeout(i),e})}function Client(t){var n=this;a.call(this),t=t||{},this._initConfig(t),this.stanzas=o.getGlobalJXT(),this.jid=new l,this.stanzas=o.createRegistry(),this.stanzas.use(e("jxt-xmpp-types")),this.stanzas.use(e("jxt-xmpp")),this.use(e("./plugins/features")),this.use(e("./plugins/sasl")),this.use(e("./plugins/smacks")),this.use(e("./plugins/bind")),this.use(e("./plugins/session")),this.sm=new d(this),this.transports={},this.on("stream:data",function(e){var t=e.toJSON();if("iq"===e._name&&(t._xmlChildCount=0,i(e.xml.childNodes,function(e){1===e.nodeType&&(t._xmlChildCount+=1)})),n.emit(e._eventname||e._name,t),"message"===e._name||"presence"===e._name||"iq"===e._name)n.sm.handle(t),n.emit("stanza",t);else{if("smAck"===e._name)return n.sm.process(t);if("smRequest"===e._name)return n.sm.ack()}t.id&&(n.emit("id:"+t.id,t),n.emit(e._name+":id:"+t.id,t))}),this.on("disconnected",function(){n.transport&&(n.transport.off("*"),delete n.transport),n.releaseGroup("connection")}),this.on("auth:success",function(){n.transport&&(n.transport.authenticated=!0)}),this.on("iq",function(e){var t=e.type,i=e._xmlChildCount;delete e._xmlChildCount;var r=Object.keys(e).filter(function(e){return"id"!==e&&"to"!==e&&"from"!==e&&"lang"!==e&&"type"!==e&&"errorReply"!==e&&"resultReply"!==e});if("get"===e.type||"set"===e.type){if(1!==i)return n.sendIq(e.errorReply({error:{type:"modify",condition:"bad-request"}}));if(!r.length)return n.sendIq(e.errorReply({error:{type:"cancel",condition:"feature-not-implemented"}}));var s="iq:"+t+":"+r[0];n.callbacks[s]?n.emit(s,e):n.sendIq(e.errorReply({error:{type:"cancel",condition:"feature-not-implemented"}}))}}),this.on("message",function(e){Object.keys(e.$body||{}).length&&("chat"===e.type||"normal"===e.type?n.emit("chat",e):"groupchat"===e.type&&n.emit("groupchat",e)),"error"===e.type&&n.emit("message:error",e)}),this.on("presence",function(e){var t=e.type||"available";"error"===t&&(t="presence:error"),n.emit(t,e)})}var i=e("lodash.foreach"),r=e("lodash.assign"),s=e("lodash.isarray"),o=e("jxt"),a=e("wildemitter"),c=e("util"),u=e("uuid"),l=e("xmpp-jid").JID,d=e("./sm"),f=e("hostmeta"),h=e("saslmechanisms"),m={external:e("sasl-external"),"scram-sha-1":e("sasl-scram-sha-1"),"digest-md5":e("alt-sasl-digest-md5"),"x-oauth2":e("sasl-x-oauth2"),plain:e("sasl-plain"),anonymous:e("sasl-anonymous")};c.inherits(Client,a),Object.defineProperty(Client.prototype,"stream",{get:function(){return this.transport?this.transport.stream:void 0}}),Client.prototype._initConfig=function(e){var t=this,n=this.config||{};this.config=r({useStreamManagement:!0,transports:["websocket","bosh"],sasl:["external","scram-sha-1","digest-md5","plain","anonymous"]},n,e),s(this.config.sasl)||(this.config.sasl=[this.config.sasl]),this.SASLFactory=new h,this.config.sasl.forEach(function(e){if("string"==typeof e){var n=m[e.toLowerCase()];n&&n.prototype&&n.prototype.name&&t.SASLFactory.use(n)}else t.SASLFactory.use(e)}),this.config.jid=new l(this.config.jid),this.config.server||(this.config.server=this.config.jid.domain),this.config.password&&(this.config.credentials=this.config.credentials||{},this.config.credentials.password=this.config.password,delete this.config.password),this.config.transport&&(this.config.transports=[this.config.transport]),s(this.config.transports)||(this.config.transports=[this.config.transports])},Client.prototype.use=function(e){"function"==typeof e&&e(this,this.stanzas,this.config)},Client.prototype.nextId=function(){return u.v4()},Client.prototype.discoverBindings=function(e,t){f(e,function(e,n){if(e)return t(e,[]);var i={websocket:[],bosh:[]};(n.links||[]).forEach(function(e){e.href&&"urn:xmpp:alt-connections:websocket"===e.rel&&i.websocket.push(e.href),e.href&&"urn:xmpp:altconnect:websocket"===e.rel&&i.websocket.push(e.href),e.href&&"urn:xmpp:alt-connections:xbosh"===e.rel&&i.bosh.push(e.href),e.href&&"urn:xmpp:altconnect:bosh"===e.rel&&i.bosh.push(e.href)}),t(!1,i)})},Client.prototype._getConfiguredCredentials=function(){var e=this.config.credentials||{},t=new l(this.config.jid),n=e.username||t.local,i=e.server||t.domain,s={username:n,password:this.config.password,server:i,host:i,realm:i,serviceType:"xmpp",serviceName:i};return r(s,e)},Client.prototype.getCredentials=function(e){return e(null,this._getConfiguredCredentials())},Client.prototype.connect=function(t,n){var i=this;if(this._initConfig(t),n||1!==i.config.transports.length||(n={},n.name=i.config.transports[0]),n&&n.name){"websocket"!==n.name&&"old-websocket"!==n.name||(this.use(e("./plugins/websocket")),this.use(e("./plugins/oldwebsocket"))),"bosh"===n.name&&this.use(e("./plugins/bosh"));var r=i.transport=new i.transports[n.name](i.sm,i.stanzas);return r.on("*",function(e,t){i.emit(e,t)}),r.connect(i.config)}return i.discoverBindings(i.config.server,function(e,t){if(e)return console.error("Could not find https://"+i.config.server+"/.well-known/host-meta file to discover connection endpoints for the requested transports."),i.disconnect();for(var n=0,r=i.config.transports.length;n<r;n++){var s=i.config.transports[n];console.log("Checking for %s endpoints",s);for(var o=0,a=(t[s]||[]).length;o<a;o++){var c=t[s][o];if(0===c.indexOf("wss://")||0===c.indexOf("https://"))return"websocket"===s?i.config.wsURL=c:i.config.boshURL=c,console.log("Using %s endpoint: %s",s,c),i.connect(null,{name:s,url:c});console.warn("Discovered unencrypted %s endpoint (%s). Ignoring",s,c)}}return console.error("No endpoints found for the requested transports."),i.disconnect()})},Client.prototype.disconnect=function(){this.sessionStarted&&(this.releaseGroup("session"),this.sm.started||this.emit("session:end")),this.sessionStarted=!1,this.releaseGroup("connection"),this.transport?this.transport.disconnect():this.emit("disconnected")},Client.prototype.send=function(e){this.sm.track(e),this.transport&&this.transport.send(e)},Client.prototype.sendMessage=function(e){e=e||{},e.id||(e.id=this.nextId());var t=this.stanzas.getMessage(),n=new t(e);return this.emit("message:sent",n.toJSON()),this.send(n),e.id},Client.prototype.sendPresence=function(e){e=e||{},e.id||(e.id=this.nextId());var t=this.stanzas.getPresence();return this.send(new t(e)),e.id},Client.prototype.sendIq=function(e,t){var n,i,r,s,o=this;e=e||{},e.id||(e.id=this.nextId());var a=this.stanzas.getIq(),c=e.toJSON?e:new a(e);return"error"===e.type||"result"===e.type?void this.send(c):(s=new l(e.to),r={},r[""]=!0,r[s.full]=!0,r[s.bare]=!0,r[s.domain]=!0,r[o.jid.bare]=!0,r[o.jid.domain]=!0,i="iq:id:"+e.id,n=new Promise(function(e,t){var n=function(s){r[s.from.full]&&("result"!==s.type&&"error"!==s.type||(o.off(i,n),s.error?t(s):e(s)))};o.on(i,"session",n)}),this.send(c),timeoutRequest(n,e.id,1e3*(o.config.timeout||15)).then(function(e){return t&&t(null,e),e},function(e){if(t)return t(e);throw e}))},Client.prototype.sendStreamError=function(e){e=e||{};var t=this.stanzas.getStreamError(),n=new t(e);this.emit("stream:error",n.toJSON()),this.send(n),this.disconnect()},t.exports=Client},{"./plugins/bind":"/home/michel/stanza.io/lib/plugins/bind.js","./plugins/bosh":"/home/michel/stanza.io/lib/plugins/bosh.js","./plugins/features":"/home/michel/stanza.io/lib/plugins/features.js","./plugins/oldwebsocket":"/home/michel/stanza.io/lib/plugins/oldwebsocket.js","./plugins/sasl":"/home/michel/stanza.io/lib/plugins/sasl.js","./plugins/session":"/home/michel/stanza.io/lib/plugins/session.js","./plugins/smacks":"/home/michel/stanza.io/lib/plugins/smacks.js","./plugins/websocket":"/home/michel/stanza.io/lib/plugins/websocket.js","./sm":"/home/michel/stanza.io/lib/sm.js","alt-sasl-digest-md5":"/home/michel/stanza.io/node_modules/alt-sasl-digest-md5/index.js",hostmeta:"/home/michel/stanza.io/node_modules/hostmeta/index.js",jxt:"/home/michel/stanza.io/node_modules/jxt/index.js","jxt-xmpp":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/index.js","jxt-xmpp-types":"/home/michel/stanza.io/node_modules/jxt-xmpp-types/lib/index.js","lodash.assign":"/home/michel/stanza.io/node_modules/lodash.assign/index.js","lodash.foreach":"/home/michel/stanza.io/node_modules/lodash.foreach/index.js","lodash.isarray":"/home/michel/stanza.io/node_modules/lodash.isarray/index.js","sasl-anonymous":"/home/michel/stanza.io/node_modules/sasl-anonymous/main.js","sasl-external":"/home/michel/stanza.io/node_modules/sasl-external/main.js","sasl-plain":"/home/michel/stanza.io/node_modules/sasl-plain/main.js","sasl-scram-sha-1":"/home/michel/stanza.io/node_modules/sasl-scram-sha-1/index.js","sasl-x-oauth2":"/home/michel/stanza.io/node_modules/sasl-x-oauth2/main.js",saslmechanisms:"/home/michel/stanza.io/node_modules/saslmechanisms/main.js",util:"/home/michel/stanza.io/node_modules/util/util.js",uuid:"/home/michel/stanza.io/node_modules/uuid/index.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/plugins/attention.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:attention:0"),e.getAttention=function(t,n){n=n||{},n.to=t,n.type="headline",n.attention=!0,e.sendMessage(n)},e.on("message",function(t){t.attention&&e.emit("attention",t)})}},{}],"/home/michel/stanza.io/lib/plugins/avatar.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:avatar:metadata+notify"),e.on("pubsub:event",function(t){t.event.updated&&"urn:xmpp:avatar:metadata"===t.event.updated.node&&e.emit("avatar",{jid:t.from,source:"pubsub",avatars:t.event.updated.published[0].avatars})}),e.on("presence",function(t){t.avatarId&&e.emit("avatar",{jid:t.from,source:"vcard",avatars:[{id:t.avatarId}]})}),e.publishAvatar=function(e,t,n){return this.publish("","urn:xmpp:avatar:data",{id:e,avatarData:t},n)},e.useAvatars=function(e,t){return this.publish("","urn:xmpp:avatar:metadata",{id:"current",avatars:e},t)},e.getAvatar=function(e,t,n){return this.getItem(e,"urn:xmpp:avatar:data",t,n)}}},{}],"/home/michel/stanza.io/lib/plugins/bind.js":[function(e,t,n){"use strict";var i=e("xmpp-jid").JID;t.exports=function(e,t,n){e.registerFeature("bind",300,function(e,t){var i=this;i.sendIq({type:"set",bind:{resource:n.resource}},function(n,r){if(n)return i.emit("session:error",n),t("disconnect","JID binding failed");i.features.negotiated.bind=!0,i.emit("session:prebind",r.bind.jid);var s=!e.session||e.session&&e.session.optional;return!i.sessionStarted&&s&&i.emit("session:started",i.jid),t()})}),e.on("session:started",function(){e.sessionStarted=!0}),e.on("session:prebind",function(t){e.jid=new i(t),e.emit("session:bound",e.jid)}),e.on("disconnected",function(){e.sessionStarted=!1,e.features.negotiated.bind=!1})}},{"xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/plugins/blocking.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:blocking"),e.block=function(t,n){return e.sendIq({type:"set",block:{jids:[t]}},n)},e.unblock=function(t,n){return e.sendIq({type:"set",unblock:{jids:[t]}},n)},e.getBlocked=function(t){return e.sendIq({type:"get",blockList:!0},t)},e.on("iq:set:block",function(t){e.emit("block",{jids:t.block.jids||[]}),e.sendIq(t.resultReply())}),e.on("iq:set:unblock",function(t){e.emit("unblock",{jids:t.unblock.jids||[]}),e.sendIq(t.resultReply())})}},{}],"/home/michel/stanza.io/lib/plugins/bob.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:bob"),e.getBits=function(t,n,i){return e.sendIq({to:t,type:"get",bob:{cid:n}},i)}}},{}],"/home/michel/stanza.io/lib/plugins/bookmarks.js":[function(e,t,n){"use strict";var i=e("lodash.assign"),r=e("lodash.filter"),s=e("xmpp-jid").JID;t.exports=function(e){e.getBookmarks=function(e){return this.getPrivateData({bookmarks:!0},e)},e.setBookmarks=function(e,t){return this.setPrivateData({bookmarks:e},t)},e.addBookmark=function(t,n){return t.jid=new s(t.jid),this.getBookmarks().then(function(n){var s=n.privateStorage.bookmarks.conferences||[],o=r(s,function(e){return e.jid.bare===t.jid.bare});return o.length?i(o[0],t):s.push(t),e.setBookmarks({conferences:s})}).then(function(e){return n&&n(null,e),e},function(e){if(!n)throw e;n(e)})},e.removeBookmark=function(t,n){return t=new s(t),this.getBookmarks().then(function(n){var i=n.privateStorage.bookmarks.conferences||[];return i=r(i,function(e){return t.bare!==e.jid.bare}),e.setBookmarks({conferences:i})}).then(function(e){n&&n(null,e)},function(e){if(!n)throw e;n(e)})}}},{"lodash.assign":"/home/michel/stanza.io/node_modules/lodash.assign/index.js","lodash.filter":"/home/michel/stanza.io/node_modules/lodash.filter/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/plugins/bosh.js":[function(e,t,n){"use strict";var i=e("../transports/bosh");t.exports=function(e){e.transports.bosh=i}},{"../transports/bosh":"/home/michel/stanza.io/lib/transports/bosh.js"}],"/home/michel/stanza.io/lib/plugins/carbons.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:carbons:2"),e.enableCarbons=function(e){return this.sendIq({type:"set",enableCarbons:!0},e)},e.disableCarbons=function(e){return this.sendIq({type:"set",disableCarbons:!0},e)},e.on("message",function(t){return t.carbonSent?e.emit("carbon:sent",t):t.carbonReceived?e.emit("carbon:received",t):void 0}),e.on("carbon:*",function(t,n){var i=t.split(":")[1];if(n.from.bare===e.jid.bare){var r,s;"received"===i?(r=n.carbonReceived.forwarded.message,s=n.carbonReceived.forwarded.delay):(r=n.carbonSent.forwarded.message,s=n.carbonSent.forwarded.delay),r.delay||(r.delay={stamp:s?s.stamp:new Date(Date.now())}),r.carbon=!0,r.from.bare===e.jid.bare?e.emit("message:sent",r):e.emit("message",r)}})}},{}],"/home/michel/stanza.io/lib/plugins/chatstates.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("http://jabber.org/protocol/chatstates");var t=["chat","groupchat","normal"];e.on("message",function(n){t.indexOf(n.type||"normal")<0||n.chatState&&(e.emit("chat:state",{to:n.to,from:n.from,chatState:n.chatState}),e.emit("chatState",{to:n.to,from:n.from,chatState:n.chatState}))})}},{}],"/home/michel/stanza.io/lib/plugins/command.js":[function(e,t,n){"use strict";var i="http://jabber.org/protocol/commands";t.exports=function(e){e.disco.addFeature(i),e.disco.addItem({name:"Ad-Hoc Commands",node:i}),e.getCommands=function(t,n){return e.getDiscoItems(t,i,n)}}},{}],"/home/michel/stanza.io/lib/plugins/correction.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:message-correct:0"),e.on("message",function(t){t.replace&&(e.emit("replace",t),e.emit("replace:"+t.id,t))})}},{}],"/home/michel/stanza.io/lib/plugins/csi.js":[function(e,t,n){"use strict";t.exports=function(e,t){var n=t.getDefinition("active","urn:xmpp:csi"),i=t.getDefinition("inactive","urn:xmpp:csi");e.registerFeature("clientStateIndication",400,function(e,t){this.features.negotiated.clientStateIndication=!0,t()}),e.markActive=function(){this.features.negotiated.clientStateIndication&&this.send(new n)},e.markInactive=function(){this.features.negotiated.clientStateIndication&&this.send(new i)}}},{}],"/home/michel/stanza.io/lib/plugins/dataforms.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("jabber:x:data"),e.disco.addFeature("urn:xmpp:media-element"),e.disco.addFeature("http://jabber.org/protocol/xdata-validate"),e.disco.addFeature("http://jabber.org/protocol/xdata-layout"),e.on("message",function(t){t.form&&e.emit("dataform",t)})}},{}],"/home/michel/stanza.io/lib/plugins/delayed.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:delay")}},{}],"/home/michel/stanza.io/lib/plugins/disco.js":[function(e,t,n){(function(n){"use strict";function generateVerString(e,t){var s="",a=e.features.sort(),c=[],u={},l=[];i(e.identities,function(e){c.push([e.category||"",e.type||"",e.lang||"",e.name||""].join("/"))}),c.sort();var d=c.length,f=a.length;if(c=r(c,!0),a=r(a,!0),f!==a.length||d!==c.length)return!1;s+=c.join("<")+"<",s+=a.join("<")+"<";var h=!1;if(i(e.extensions,function(e){for(var t=e.fields,n=0,i=t.length;n<i;n++)if("FORM_TYPE"===t[n].name&&"hidden"===t[n].type){var r=t[n].value;return u[r]?void(h=!0):(u[r]=e,void l.push(r))}}),h)return!1;l.sort(),i(l,function(e){var t=u[e],n={},r=[];s+="<"+e,i(t.fields,function(e){var t=e.name;if("FORM_TYPE"!==t){var i=e.value||"";"object"!=typeof i&&(i=i.split("\n")),n[t]=i.sort(),r.push(t)}}),r.sort(),i(r,function(e){s+="<"+e,i(n[e],function(e){s+="<"+e})})});var m=o.createHash(t).update(new n(s,"utf8")).digest("base64"),p=4-m.length%4;4===p&&(p=0);for(var b=0;b<p;b++)m+="=";return m}function verifyVerString(e,t,n){var i=generateVerString(e,t);return i&&i===n}function Disco(){this.features={},this.identities={},this.extensions={},this.items={},this.caps={}}var i=e("lodash.foreach"),r=e("lodash.uniq"),s=e("xmpp-jid").JID,o=e("iana-hashes");Disco.prototype={constructor:{value:Disco},addFeature:function(e,t){t=t||"",this.features[t]||(this.features[t]=[]),this.features[t].push(e)},addIdentity:function(e,t){t=t||"",this.identities[t]||(this.identities[t]=[]),this.identities[t].push(e)},addItem:function(e,t){t=t||"",this.items[t]||(this.items[t]=[]),this.items[t].push(e)},addExtension:function(e,t){t=t||"",this.extensions[t]||(this.extensions[t]=[]),this.extensions[t].push(e)}},t.exports=function(e){e.disco=new Disco(e),e.disco.addFeature("http://jabber.org/protocol/disco#info"),e.disco.addFeature("http://jabber.org/protocol/disco#items"),e.disco.addIdentity({category:"client",type:"web"}),e.registerFeature("caps",100,function(t,n){this.emit("disco:caps",{from:new s(e.jid.domain||e.config.server),caps:t.caps}),this.features.negotiated.caps=!0,n()}),e.getDiscoInfo=function(e,t,n){return this.sendIq({to:e,type:"get",discoInfo:{node:t}},n)},e.getDiscoItems=function(e,t,n){return this.sendIq({to:e,type:"get",discoItems:{node:t}},n)},e.updateCaps=function(){var t=this.config.capsNode||"https://stanza.io",n=JSON.parse(JSON.stringify({identities:this.disco.identities[""],features:this.disco.features[""],extensions:this.disco.extensions[""]})),i=generateVerString(n,"sha-1");return this.disco.caps={node:t,hash:"sha-1",ver:i},t=t+"#"+i,this.disco.features[t]=n.features,this.disco.identities[t]=n.identities,this.disco.extensions[t]=n.extensions,e.getCurrentCaps()},e.getCurrentCaps=function(){var t=e.disco.caps;if(!t.ver)return{ver:null,discoInfo:null};var n=t.node+"#"+t.ver;return{ver:t.ver,discoInfo:{identities:e.disco.identities[n],features:e.disco.features[n],extensions:e.disco.extensions[n]}}},e.on("presence",function(t){t.caps&&e.emit("disco:caps",t)}),e.on("iq:get:discoInfo",function(t){var n=t.discoInfo.node||"",i=t.discoInfo.node||"";n===e.disco.caps.node+"#"+e.disco.caps.ver&&(i=n,n=""),e.sendIq(t.resultReply({discoInfo:{node:i,identities:e.disco.identities[n]||[],features:e.disco.features[n]||[],extensions:e.disco.extensions[n]||[]}}))}),e.on("iq:get:discoItems",function(t){var n=t.discoItems.node;e.sendIq(t.resultReply({discoItems:{node:n,items:e.disco.items[n]||[]}}))}),e.verifyVerString=verifyVerString,e.generateVerString=generateVerString,e.updateCaps()}}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","iana-hashes":"/home/michel/stanza.io/node_modules/iana-hashes/index.js","lodash.foreach":"/home/michel/stanza.io/node_modules/lodash.foreach/index.js","lodash.uniq":"/home/michel/stanza.io/node_modules/lodash.uniq/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/plugins/escaping.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("jid\\20escaping")}},{}],"/home/michel/stanza.io/lib/plugins/extdisco.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:extdisco:1"),e.getServices=function(e,t,n){return this.sendIq({type:"get",to:e,services:{type:t}},n)},e.getServiceCredentials=function(e,t,n){return this.sendIq({type:"get",to:e,credentials:{service:{host:t}}},n)}}},{}],"/home/michel/stanza.io/lib/plugins/features.js":[function(e,t,n){"use strict";var i=e("async");t.exports=function(e){e.features={negotiated:{},order:[],handlers:{}},e.registerFeature=function(t,n,i){this.features.order.push({priority:n,name:t}),this.features.order.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}),this.features.handlers[t]=i.bind(e)},e.on("streamFeatures",function(t){var n=[],r=e.features.negotiated,s=e.features.handlers;e.features.order.forEach(function(e){var i=e.name;t[i]&&s[i]&&!r[i]&&n.push(function(e){r[i]?e():s[i](t,e)})}),i.series(n,function(t,n){"restart"===t?e.transport.restart():"disconnect"===t&&(e.emit("stream:error",{condition:"policy-violation",text:"Failed to negotiate stream features: "+n}),e.disconnect())})})}},{async:"/home/michel/stanza.io/node_modules/async/dist/async.js"}],"/home/michel/stanza.io/lib/plugins/forwarding.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:forward:0")}},{}],"/home/michel/stanza.io/lib/plugins/geoloc.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("http://jabber.org/protocol/geoloc"),e.disco.addFeature("http://jabber.org/protocol/geoloc+notify"),e.on("pubsub:event",function(t){t.event.updated&&"http://jabber.org/protocol/geoloc"===t.event.updated.node&&e.emit("geoloc",{jid:t.from,geoloc:t.event.updated.published[0].geoloc})}),e.publishGeoLoc=function(e,t){return this.publish("","http://jabber.org/protocol/geoloc",{geoloc:e},t)}}},{}],"/home/michel/stanza.io/lib/plugins/hashes.js":[function(e,t,n){"use strict";var i=e("iana-hashes");t.exports=function(e){e.disco.addFeature("urn:xmpp:hashes:1"),i.getHashes().forEach(function(t){e.disco.addFeature("urn:xmpp:hash-function-text-names:"+t)})}},{"iana-hashes":"/home/michel/stanza.io/node_modules/iana-hashes/index.js"}],"/home/michel/stanza.io/lib/plugins/idle.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:idle:1")}},{}],"/home/michel/stanza.io/lib/plugins/index.js":[function(e,t,n){"use strict";t.exports=function(t){t.use(e("./disco")),t.use(e("./attention")),t.use(e("./avatar")),t.use(e("./blocking")),t.use(e("./bob")),t.use(e("./bookmarks")),t.use(e("./carbons")),t.use(e("./chatstates")),t.use(e("./command")),t.use(e("./correction")),t.use(e("./csi")),t.use(e("./dataforms")),t.use(e("./delayed")),t.use(e("./escaping")),t.use(e("./extdisco")),t.use(e("./forwarding")),t.use(e("./geoloc")),t.use(e("./hashes")),t.use(e("./idle")),t.use(e("./invisible")),t.use(e("./jidprep")),t.use(e("./jingle")),t.use(e("./json")),t.use(e("./keepalive")),t.use(e("./logging")),t.use(e("./mam")),t.use(e("./muc")),t.use(e("./mood")),t.use(e("./nick")),t.use(e("./oob")),t.use(e("./ping")),t.use(e("./private")),t.use(e("./psa")),t.use(e("./pubsub")),t.use(e("./reach")),t.use(e("./receipts")),t.use(e("./references")),t.use(e("./register")),t.use(e("./roster")),t.use(e("./rtt")),t.use(e("./shim")),t.use(e("./time")),t.use(e("./vcard")),t.use(e("./version"))}},{"./attention":"/home/michel/stanza.io/lib/plugins/attention.js","./avatar":"/home/michel/stanza.io/lib/plugins/avatar.js","./blocking":"/home/michel/stanza.io/lib/plugins/blocking.js","./bob":"/home/michel/stanza.io/lib/plugins/bob.js","./bookmarks":"/home/michel/stanza.io/lib/plugins/bookmarks.js","./carbons":"/home/michel/stanza.io/lib/plugins/carbons.js","./chatstates":"/home/michel/stanza.io/lib/plugins/chatstates.js","./command":"/home/michel/stanza.io/lib/plugins/command.js","./correction":"/home/michel/stanza.io/lib/plugins/correction.js","./csi":"/home/michel/stanza.io/lib/plugins/csi.js","./dataforms":"/home/michel/stanza.io/lib/plugins/dataforms.js","./delayed":"/home/michel/stanza.io/lib/plugins/delayed.js","./disco":"/home/michel/stanza.io/lib/plugins/disco.js","./escaping":"/home/michel/stanza.io/lib/plugins/escaping.js","./extdisco":"/home/michel/stanza.io/lib/plugins/extdisco.js","./forwarding":"/home/michel/stanza.io/lib/plugins/forwarding.js","./geoloc":"/home/michel/stanza.io/lib/plugins/geoloc.js","./hashes":"/home/michel/stanza.io/lib/plugins/hashes.js","./idle":"/home/michel/stanza.io/lib/plugins/idle.js","./invisible":"/home/michel/stanza.io/lib/plugins/invisible.js","./jidprep":"/home/michel/stanza.io/lib/plugins/jidprep.js","./jingle":"/home/michel/stanza.io/lib/plugins/jingle.js","./json":"/home/michel/stanza.io/lib/plugins/json.js","./keepalive":"/home/michel/stanza.io/lib/plugins/keepalive.js","./logging":"/home/michel/stanza.io/lib/plugins/logging.js","./mam":"/home/michel/stanza.io/lib/plugins/mam.js","./mood":"/home/michel/stanza.io/lib/plugins/mood.js","./muc":"/home/michel/stanza.io/lib/plugins/muc.js","./nick":"/home/michel/stanza.io/lib/plugins/nick.js","./oob":"/home/michel/stanza.io/lib/plugins/oob.js","./ping":"/home/michel/stanza.io/lib/plugins/ping.js","./private":"/home/michel/stanza.io/lib/plugins/private.js","./psa":"/home/michel/stanza.io/lib/plugins/psa.js","./pubsub":"/home/michel/stanza.io/lib/plugins/pubsub.js","./reach":"/home/michel/stanza.io/lib/plugins/reach.js","./receipts":"/home/michel/stanza.io/lib/plugins/receipts.js","./references":"/home/michel/stanza.io/lib/plugins/references.js","./register":"/home/michel/stanza.io/lib/plugins/register.js","./roster":"/home/michel/stanza.io/lib/plugins/roster.js","./rtt":"/home/michel/stanza.io/lib/plugins/rtt.js","./shim":"/home/michel/stanza.io/lib/plugins/shim.js","./time":"/home/michel/stanza.io/lib/plugins/time.js","./vcard":"/home/michel/stanza.io/lib/plugins/vcard.js","./version":"/home/michel/stanza.io/lib/plugins/version.js"}],"/home/michel/stanza.io/lib/plugins/invisible.js":[function(e,t,n){"use strict";t.exports=function(e){e.goInvisible=function(e){return this.sendIq({type:"set",invisible:!0},e)},e.goVisible=function(e){return this.sendIq({type:"set",visible:!0},e)}}},{}],"/home/michel/stanza.io/lib/plugins/jidprep.js":[function(e,t,n){"use strict";t.exports=function(e){e.prepJID=function(t,n){return e.sendIq({to:e.jid.domain,type:"get",jidPrep:t},n)}}},{}],"/home/michel/stanza.io/lib/plugins/jingle.js":[function(e,t,n){(function(n){"use strict";var i=e("jingle"),r=r||n;t.exports=function(e){var t=e.jingle=new i;if(e.supportedICEServiceTypes={stun:!0,stuns:!0,turn:!0,turns:!0},e.disco.addFeature("urn:xmpp:jingle:1"),r.RTCPeerConnection){["urn:xmpp:jingle:apps:rtp:1","urn:xmpp:jingle:apps:rtp:audio","urn:xmpp:jingle:apps:rtp:video","urn:xmpp:jingle:apps:rtp:rtcb-fb:0","urn:xmpp:jingle:apps:rtp:rtp-hdrext:0","urn:xmpp:jingle:apps:rtp:ssma:0","urn:xmpp:jingle:apps:dtls:0","urn:xmpp:jingle:apps:grouping:0","urn:xmpp:jingle:apps:file-transfer:3","urn:xmpp:jingle:transports:ice-udp:1","urn:xmpp:jingle:transports:dtls-sctp:1","urn:ietf:rfc:3264","urn:ietf:rfc:5576","urn:ietf:rfc:5888"].forEach(function(t){e.disco.addFeature(t)})}["outgoing","incoming","accepted","terminated","ringing","mute","unmute","hold","resumed"].forEach(function(n){t.on(n,function(t,i){e.emit("jingle:"+n,t,i)})}),t.on("createdSession",function(t){e.emit("jingle:created",t)}),t.on("peerStreamAdded",function(t,n){e.emit("jingle:remotestream:added",t,n)}),t.on("peerStreamRemoved",function(t,n){e.emit("jingle:remotestream:removed",t,n)}),t.on("send",function(t){e.sendIq(t,function(t){t&&e.emit("jingle:error",t)})}),e.on("session:bound",function(e){t.jid=e,t.selfID=e.full}),e.on("iq:set:jingle",function(e){t.process(e)}),e.on("unavailable",function(e){var n=e.from.full;t.endPeerSessions(n,!0)}),e.discoverICEServers=function(t){return this.getServices(e.config.server).then(function(t){for(var n=t.services.services,i=[],r=0;r<n.length;r++){var s=n[r],o={};e.supportedICEServiceTypes[s.type]&&("stun"===s.type||"stuns"===s.type?(o.urls=s.type+":"+s.host,s.port&&(o.urls+=":"+s.port),i.push(o),e.jingle.addICEServer(o)):"turn"!==s.type&&"turns"!==s.type||(o.urls=s.type+":"+s.host,s.port&&(o.urls+=":"+s.port),s.transport&&"udp"!==s.transport&&(o.urls+="?transport="+s.transport),s.username&&(o.username=s.username),s.password&&(o.credential=s.password),i.push(o),e.jingle.addICEServer(o)))}return i}).then(function(e){return t&&t(null,e),e},function(e){if(!t)throw e;t(e)})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jingle:"/home/michel/stanza.io/node_modules/jingle/index.js"}],"/home/michel/stanza.io/lib/plugins/json.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:json:0")}},{}],"/home/michel/stanza.io/lib/plugins/keepalive.js":[function(e,t,n){"use strict";function timeoutPromise(e,t){var n;return Promise.race([e,new Promise(function(e,i){n=setTimeout(function(){i()},t)})]).then(function(e){return clearTimeout(n),e})}function checkConnection(e,t){return timeoutPromise(new Promise(function(t,n){e.sm.started?(e.once("stream:management:ack",t),e.sm.request()):e.ping().then(t).catch(function(e){e.error&&"timeout"!==e.error.condition?t():n()})}),1e3*t||15e3)}t.exports=function(e){e.enableKeepAlive=function(t){function keepalive(){e.sessionStarted&&checkConnection(e,t.timeout).catch(function(){e.emit("stream:error",{condition:"connection-timeout",text:"Server did not respond in "+t.timeout+" seconds"}),e.transport&&(e.transport.hasStream=!1,e.transport.disconnect())})}t=t||{},t.interval=t.interval||300,t.timeout=t.timeout||15,e._keepAliveInterval=setInterval(keepalive,1e3*t.interval)},e.disableKeepAlive=function(){e._keepAliveInterval&&(clearInterval(e._keepAliveInterval),delete e._keepAliveInterval)},e.on("disconnected",function(){e.disableKeepAlive()})}},{}],"/home/michel/stanza.io/lib/plugins/logging.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("","urn:xmpp:eventlog"),e.sendLog=function(t,n){e.sendMessage({to:t,type:"normal",log:n})}}},{}],"/home/michel/stanza.io/lib/plugins/mam.js":[function(e,t,n){"use strict";function timeoutPromise(e,t,n){var i;return Promise.race([e,new Promise(function(e,r){i=setTimeout(function(){r({id:t,type:"error",error:{condition:"timeout"}})},n)})]).then(function(e){return clearTimeout(i),e})}var i=e("xmpp-jid").JID;t.exports=function(e){e.disco.addFeature("urn:xmpp:mam:2"),e.getHistorySearchForm=function(t,n){return e.sendIq({to:t,type:"get",mam:!0},n)},e.searchHistory=function(t,n){var r=this,s=this.nextId();t=t||{},t.queryid=s;var o=t.jid||t.to||"";delete t.jid,delete t.to,t.form||(t.form={}),t.form.type="submit";var a=t.form.fields=t.form.fields||[];["FORM_TYPE","with","start","end"].forEach(function(e){
if(t[e]||"FORM_TYPE"===e){var n=t[e];("start"===e||"end"===e)&&"string"!=typeof n&&(n=n.toISOString()),"FORM_TYPE"===e&&(n="urn:xmpp:mam:2");for(var i=0,r=a.length;i<r;i++)a[i].name;a.push({name:e,value:n}),delete t[e]}});var c=new i(o||e.jid.bare),u={};u[""]=!0,u[c.full]=!0,u[c.bare]=!0,u[c.domain]=!0,u[e.jid.bare]=!0,u[e.jid.domain]=!0;var l=[];return this.on("mam:item:"+s,"session",function(e){u[e.from.full]&&l.push(e.mamItem)}),timeoutPromise(this.sendIq({type:"set",to:o,id:s,mam:t}),s,1e3*r.config.timeout||15e3).then(function(e){return e.mamResult.items=l,r.off("mam:item:"+s),n&&n(null,e),e},function(e){if(r.off("mam:item:"+s),!n)throw e;n(e)})},e.getHistoryPreferences=function(e){return this.sendIq({type:"get",mamPrefs:!0},e)},e.setHistoryPreferences=function(e,t){return this.sendIq({type:"set",mamPrefs:e},t)},e.on("message",function(t){t.mamItem&&(e.emit("mam:item",t),e.emit("mam:item:"+t.mamItem.queryid,t))})}},{"xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/plugins/mood.js":[function(e,t,n){"use strict";var i="http://jabber.org/protocol/mood";t.exports=function(e){e.disco.addFeature(i),e.disco.addFeature(i+"+notify"),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===i&&e.emit("mood",{jid:t.from,mood:t.event.updated.published[0].mood})}),e.publishMood=function(e,t,n){return this.publish("",i,{mood:{value:e,text:t}},n)}}},{}],"/home/michel/stanza.io/lib/plugins/muc.js":[function(e,t,n){"use strict";var i=e("lodash.foreach"),r=e("xmpp-jid").JID;t.exports=function(e){function rejoinRooms(){i(e.joiningRooms,function(t,n){delete e.joiningRooms[n],e.joinRoom(n,t)}),i(e.joinedRooms,function(t,n){delete e.joinedRooms[n],e.joinRoom(n,t)})}e.disco.addFeature("http://jabber.org/protocol/muc"),e.disco.addFeature("jabber:x:conference"),e.disco.addFeature("urn:xmpp:hats:0"),e.joinedRooms={},e.joiningRooms={},e.on("session:started",rejoinRooms),e.on("stream:management:resumed",rejoinRooms),e.on("message",function(t){t.muc?(t.muc.invite&&e.emit("muc:invite",{from:t.muc.invite.from,room:t.from,reason:t.muc.invite.reason,password:t.muc.password,thread:t.muc.invite.thread,type:"mediated"}),t.muc.decline&&e.emit("muc:declined",{room:t.from,from:t.muc.decline.from,reason:t.muc.decline.reason})):t.mucInvite&&e.emit("muc:invite",{from:t.from,room:t.mucInvite.jid,reason:t.mucInvite.reason,password:t.mucInvite.password,thread:t.mucInvite.thread,type:"direct"}),"groupchat"===t.type&&t.subject&&e.emit("muc:subject",t)}),e.on("presence",function(t){if(e.joiningRooms[t.from.bare]&&"error"===t.type)delete e.joiningRooms[t.from.bare],e.emit("muc:failed",t),e.emit("muc:error",t);else if(t.muc){var n=t.muc.codes&&t.muc.codes.indexOf("110")>=0;"error"===t.type?e.emit("muc:error",t):"unavailable"===t.type?(e.emit("muc:unavailable",t),n&&(e.emit("muc:leave",t),delete e.joinedRooms[t.from.bare]),t.muc.destroyed&&e.emit("muc:destroyed",{room:t.from,newRoom:t.muc.destroyed.jid,reason:t.muc.destroyed.reason,password:t.muc.destroyed.password})):(e.emit("muc:available",t),n&&!e.joinedRooms[t.from.bare]&&(e.emit("muc:join",t),delete e.joiningRooms[t.from.bare],e.joinedRooms[t.from.bare]=t.from.resource))}}),e.joinRoom=function(e,t,n){n=n||{},n.to=e+"/"+t,n.caps=this.disco.caps,n.joinMuc=n.joinMuc||{},this.joiningRooms[e]=t,this.sendPresence(n)},e.leaveRoom=function(e,t,n){n=n||{},n.to=e+"/"+t,n.type="unavailable",this.sendPresence(n)},e.ban=function(t,n,i,r){e.setRoomAffiliation(t,n,"outcast",i,r)},e.kick=function(t,n,i,r){e.setRoomRole(t,n,"none",i,r)},e.invite=function(t,n){e.sendMessage({to:t,muc:{invites:n}})},e.directInvite=function(t,n){n.jid=t,e.sendMessage({to:n.to,mucInvite:n})},e.declineInvite=function(t,n,i){e.sendMessage({to:t,muc:{decline:{to:n,reason:i}}})},e.changeNick=function(t,n){e.sendPresence({to:new r(t).bare+"/"+n})},e.setSubject=function(t,n){e.sendMessage({to:t,type:"groupchat",subject:n})},e.discoverReservedNick=function(t,n){e.getDiscoInfo(t,"x-roomuser-item",function(e,t){if(e)return n(e);var i=t.discoInfo.identities[0]||{};n(null,i.name)})},e.requestRoomVoice=function(t){e.sendMessage({to:t,form:{fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/muc#request"},{name:"muc#role",type:"text-single",value:"participant"}]}})},e.setRoomAffiliation=function(e,t,n,i,r){return this.sendIq({type:"set",to:e,mucAdmin:{jid:t,affiliation:n,reason:i}},r)},e.setRoomRole=function(e,t,n,i,r){return this.sendIq({type:"set",to:e,mucAdmin:{nick:t,role:n,reason:i}},r)},e.getRoomMembers=function(e,t,n){return this.sendIq({type:"get",to:e,mucAdmin:t},n)},e.getRoomConfig=function(e,t){return this.sendIq({to:e,type:"get",mucOwner:!0},t)},e.configureRoom=function(e,t,n){return t.type||(t.type="submit"),this.sendIq({to:e,type:"set",mucOwner:{form:t}},n)},e.destroyRoom=function(e,t,n){return this.sendIq({to:e,type:"set",mucOwner:{destroy:t}},n)},e.getUniqueRoomName=function(e,t){return this.sendIq({type:"get",to:e,mucUnique:!0},t)}}},{"lodash.foreach":"/home/michel/stanza.io/node_modules/lodash.foreach/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/lib/plugins/nick.js":[function(e,t,n){"use strict";var i="http://jabber.org/protocol/nick";t.exports=function(e){e.disco.addFeature(i),e.disco.addFeature(i+"+notify"),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===i&&e.emit("nick",{jid:t.from,nick:t.event.updated.published[0].nick})}),e.publishNick=function(e,t){return this.publish("",i,{nick:e},t)}}},{}],"/home/michel/stanza.io/lib/plugins/oldwebsocket.js":[function(e,t,n){"use strict";var i=e("../transports/old-websocket");t.exports=function(e){e.transports["old-websocket"]=i}},{"../transports/old-websocket":"/home/michel/stanza.io/lib/transports/old-websocket.js"}],"/home/michel/stanza.io/lib/plugins/oob.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("jabber:x:oob")}},{}],"/home/michel/stanza.io/lib/plugins/ping.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:ping"),e.on("iq:get:ping",function(t){e.sendIq(t.resultReply())}),e.ping=function(e,t){return this.sendIq({to:e,type:"get",ping:!0},t)}}},{}],"/home/michel/stanza.io/lib/plugins/private.js":[function(e,t,n){"use strict";t.exports=function(e){e.getPrivateData=function(e,t){return this.sendIq({type:"get",privateStorage:e},t)},e.setPrivateData=function(e,t){return this.sendIq({type:"set",privateStorage:e},t)}}},{}],"/home/michel/stanza.io/lib/plugins/psa.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:psa")}},{}],"/home/michel/stanza.io/lib/plugins/pubsub.js":[function(e,t,n){"use strict";t.exports=function(e){e.on("message",function(t){if(t.event){if(e.emit("pubsub:event",t),e.emit("pubsubEvent",t),t.event.updated){var n=t.event.updated.published,i=t.event.updated.retracted;n&&n.length&&e.emit("pubsub:published",t),i&&i.length&&e.emit("pubsub:retracted",t)}t.event.purged&&e.emit("pubsub:purged",t),t.event.deleted&&e.emit("pubsub:deleted",t),t.event.subscriptionChanged&&e.emit("pubsub:subscription",t),t.event.configurationChanged&&e.emit("pubsub:config",t)}t.pubsub&&t.pubsub.affiliations&&e.emit("pubsub:affiliation",t)}),e.subscribeToNode=function(t,n,i){return"string"==typeof n&&(n={node:n}),n.jid=n.jid||e.jid,this.sendIq({type:"set",to:t,pubsub:{subscribe:n}},i)},e.unsubscribeFromNode=function(t,n,i){return"string"==typeof n&&(n={node:n}),n.jid=n.jid||e.jid.bare,this.sendIq({type:"set",to:t,pubsub:{unsubscribe:n}},i)},e.publish=function(e,t,n,i){return this.sendIq({type:"set",to:e,pubsub:{publish:{node:t,item:n}}},i)},e.getItem=function(e,t,n,i){return this.sendIq({type:"get",to:e,pubsub:{retrieve:{node:t,item:n}}},i)},e.getItems=function(e,t,n,i){return n=n||{},n.node=t,this.sendIq({type:"get",to:e,pubsub:{retrieve:{node:t,max:n.max},rsm:n.rsm}},i)},e.retract=function(e,t,n,i,r){return this.sendIq({type:"set",to:e,pubsub:{retract:{node:t,notify:i,id:n}}},r)},e.purgeNode=function(e,t,n){return this.sendIq({type:"set",to:e,pubsubOwner:{purge:t}},n)},e.deleteNode=function(e,t,n){return this.sendIq({type:"set",to:e,pubsubOwner:{del:t}},n)},e.createNode=function(e,t,n,i){var r={type:"set",to:e,pubsub:{create:t}};return n&&(r.pubsub.config={form:n}),this.sendIq(r,i)},e.getSubscriptions=function(e,t,n){return t=t||{},this.sendIq({type:"get",to:e,pubsub:{subscriptions:t}},n)},e.getAffiliations=function(e,t,n){return t=t||{},this.sendIq({type:"get",to:e,pubsub:{affiliations:t}},n)},e.getNodeSubscribers=function(e,t,n,i){return n=n||{},n.node=t,this.sendIq({type:"get",to:e,pubsubOwner:{subscriptions:n}},i)},e.updateNodeSubscriptions=function(e,t,n,i){return this.sendIq({type:"set",to:e,pubsubOwner:{subscriptions:{node:t,list:n}}},i)},e.getNodeAffiliations=function(e,t,n,i){return n=n||{},n.node=t,this.sendIq({type:"get",to:e,pubsubOwner:{affiliations:n}},i)},e.updateNodeAffiliations=function(e,t,n,i){return this.sendIq({type:"set",to:e,pubsubOwner:{affiliations:{node:t,list:n}}},i)}}},{}],"/home/michel/stanza.io/lib/plugins/reach.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:reach:0"),e.disco.addFeature("urn:xmpp:reach:0+notify"),e.on("pubsub:event",function(t){t.event.updated&&"urn:xmpp:reach:0"===t.event.updated.node&&e.emit("reachability",{jid:t.from,addresses:t.event.updated.published[0].reach})}),e.on("presence",function(t){t.reach&&t.reach.length&&e.emit("reachability",{jid:t.from,addresses:t.reach})}),e.publishReachability=function(e,t){return this.publish("","urn:xmpp:reach:0",{reach:e},t)}}},{}],"/home/michel/stanza.io/lib/plugins/receipts.js":[function(e,t,n){"use strict";t.exports=function(e,t,n){var i=!1!==n.sendReceipts;e.disco.addFeature("urn:xmpp:receipts"),e.on("message",function(t){var n={normal:!0,chat:!0,headline:!0};i&&n[t.type]&&t.requestReceipt&&!t.receipt&&e.sendMessage({to:t.from,type:t.type,receipt:t.id,id:t.id}),t.receipt&&(e.emit("receipt",t),e.emit("receipt:"+t.receipt))})}},{}],"/home/michel/stanza.io/lib/plugins/references.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:reference:0")}},{}],"/home/michel/stanza.io/lib/plugins/register.js":[function(e,t,n){"use strict";t.exports=function(e){e.getAccountInfo=function(e,t){return this.sendIq({type:"get",to:e,register:!0},t)},e.updateAccount=function(e,t,n){return this.sendIq({type:"set",to:e,register:t},n)},e.deleteAccount=function(e,t){return this.sendIq({type:"set",to:e,register:{remove:!0}},t)}}},{}],"/home/michel/stanza.io/lib/plugins/roster.js":[function(e,t,n){"use strict";t.exports=function(e){e.on("iq:set:roster",function(t){var n={};if(n[""]=!0,n[e.jid.bare]=!0,n[e.jid.domain]=!0,!n[t.from.full])return e.sendIq(t.errorReply({error:{type:"cancel",condition:"service-unavailable"}}));e.emit("roster:update",t),e.sendIq({id:t.id,type:"result"})}),e.getRoster=function(t){var n=this;return e.sendIq({type:"get",roster:{ver:n.config.rosterVer}}).then(function(e){if(e.roster){var t=e.roster.ver;t&&(n.config.rosterVer=t,n.emit("roster:ver",t))}return e}).then(function(e){return t&&t(null,e),e},function(e){if(!t)throw e;t(e)})},e.updateRosterItem=function(t,n){return e.sendIq({type:"set",roster:{items:[t]}},n)},e.removeRosterItem=function(t,n){return e.updateRosterItem({jid:t,subscription:"remove"},n)},e.subscribe=function(t){e.sendPresence({type:"subscribe",to:t})},e.unsubscribe=function(t){e.sendPresence({type:"unsubscribe",to:t})},e.acceptSubscription=function(t){e.sendPresence({type:"subscribed",to:t})},e.denySubscription=function(t){e.sendPresence({type:"unsubscribed",to:t})}}},{}],"/home/michel/stanza.io/lib/plugins/rtt.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:rtt:0"),e.on("message",function(t){t.rtt&&(e.emit("rtt",t),e.emit("rtt:"+t.rtt.event,t))})}},{}],"/home/michel/stanza.io/lib/plugins/sasl.js":[function(e,t,n){(function(e){"use strict";var n="urn:ietf:params:xml:ns:xmpp-sasl";t.exports=function(t,i){var r=i.getDefinition("auth",n),s=i.getDefinition("response",n),o=i.getDefinition("abort",n);t.registerFeature("sasl",100,function(t,n){var i=this,a=i.SASLFactory.create(t.sasl.mechanisms);if(!a)return i.releaseGroup("sasl"),i.emit("auth:failed"),n("disconnect","authentication failed");i.on("sasl:success","sasl",function(){i.features.negotiated.sasl=!0,i.releaseGroup("sasl"),i.emit("auth:success",i.config.credentials),n("restart")}),i.on("sasl:challenge","sasl",function(t){return a.challenge(new e(t.value,"base64").toString()),i.getCredentials(function(t,n){if(t)return i.send(new o);var r=a.response(n);r||""===r?i.send(new s({value:new e(r).toString("base64")})):i.send(new s),a.cache&&(Object.keys(a.cache).forEach(function(t){a.cache[t]&&(i.config.credentials[t]=new e(a.cache[t]))}),i.emit("credentials:update",i.config.credentials))})}),i.on("sasl:failure","sasl",function(){i.releaseGroup("sasl"),i.emit("auth:failed"),n("disconnect","authentication failed")}),i.on("sasl:abort","sasl",function(){i.releaseGroup("sasl"),i.emit("auth:failed"),n("disconnect","authentication failed")});var c={mechanism:a.name};if(a.clientFirst)return i.getCredentials(function(t,n){if(t)return i.send(new o);c.value=new e(a.response(n)).toString("base64"),i.send(new r(c))});i.send(new r(c))}),t.on("disconnected",function(){t.features.negotiated.sasl=!1,t.releaseGroup("sasl")})}}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js"}],"/home/michel/stanza.io/lib/plugins/session.js":[function(e,t,n){"use strict";t.exports=function(e){e.registerFeature("session",1e3,function(e,t){var n=this;if(e.session.optional||n.sessionStarted)return n.features.negotiated.session=!0,t();n.sendIq({type:"set",session:{}},function(e){if(e)return t("disconnect","session request failed");n.features.negotiated.session=!0,n.sessionStarted||(n.sessionStarted=!0,n.emit("session:started",n.jid)),t()})}),e.on("disconnected",function(){e.sessionStarted=!1,e.features.negotiated.session=!1})}},{}],"/home/michel/stanza.io/lib/plugins/shim.js":[function(e,t,n){"use strict";var i="http://jabber.org/protocol/shim";t.exports=function(e){e.disco.addFeature(i),e.disco.addFeature(i+"#SubID",i)}},{}],"/home/michel/stanza.io/lib/plugins/smacks.js":[function(e,t,n){"use strict";t.exports=function(e,t,n){var i=function(e,t){var i=this;if(!n.useStreamManagement)return t();i.on("stream:management:enabled","sm",function(e){i.sm.enabled(e),i.features.negotiated.streamManagement=!0,i.releaseGroup("sm"),t()}),i.on("stream:management:resumed","sm",function(e){i.sm.resumed(e),i.features.negotiated.streamManagement=!0,i.features.negotiated.bind=!0,i.sessionStarted=!0,i.releaseGroup("sm"),t("break")}),i.on("stream:management:failed","sm",function(){i.sm.failed(),i.emit("session:end"),i.releaseGroup("session"),i.releaseGroup("sm"),t()}),i.sm.id?i.sm.id&&i.sm.allowResume?i.sm.resume():(i.releaseGroup("sm"),t()):i.features.negotiated.bind?i.sm.enable():(i.releaseGroup("sm"),t())};e.on("disconnected",function(){e.features.negotiated.streamManagement=!1}),e.registerFeature("streamManagement",200,i),e.registerFeature("streamManagement",500,i)}},{}],"/home/michel/stanza.io/lib/plugins/time.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("urn:xmpp:time"),e.getTime=function(e,t){return this.sendIq({to:e,type:"get",time:!0},t)},e.on("iq:get:time",function(t){var n=new Date;e.sendIq(t.resultReply({time:{utc:n,tzo:n.getTimezoneOffset()}}))})}},{}],"/home/michel/stanza.io/lib/plugins/vcard.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("vcard-temp"),e.getVCard=function(e,t){return this.sendIq({to:e,type:"get",vCardTemp:!0},t)},e.publishVCard=function(e,t){return this.sendIq({type:"set",vCardTemp:e},t)}}},{}],"/home/michel/stanza.io/lib/plugins/version.js":[function(e,t,n){"use strict";t.exports=function(e){e.disco.addFeature("jabber:iq:version"),e.on("iq:get:version",function(t){e.sendIq(t.resultReply({version:e.config.softwareVersion||{name:"stanza.io"}}))}),e.getSoftwareVersion=function(e,t){return this.sendIq({to:e,type:"get",version:!0},t)}}},{}],"/home/michel/stanza.io/lib/plugins/websocket.js":[function(e,t,n){"use strict";var i=e("../transports/websocket");t.exports=function(e){e.transports.websocket=i}},{"../transports/websocket":"/home/michel/stanza.io/lib/transports/websocket.js"}],"/home/michel/stanza.io/lib/sm.js":[function(e,t,n){"use strict";function mod(e,t){return(e%t+t)%t}function StreamManagement(e){this.client=e,this.id=!1,this.allowResume=!0,this.started=!1,this.inboundStarted=!1,this.outboundStarted=!1,this.lastAck=0,this.handled=0,this.windowSize=1,this.unacked=[],this.pendingAck=!1;var t="urn:xmpp:sm:3";this.stanzas={Enable:e.stanzas.getDefinition("enable",t),Resume:e.stanzas.getDefinition("resume",t),Ack:e.stanzas.getDefinition("a",t),Request:e.stanzas.getDefinition("r",t)}}var i=Math.pow(2,32);StreamManagement.prototype={constructor:{value:StreamManagement},enable:function(){var e=new this.stanzas.Enable;e.resume=this.allowResume,this.client.send(e),this.handled=0,this.outboundStarted=!0},resume:function(){var e=new this.stanzas.Resume({h:this.handled,previd:this.id});this.client.send(e),this.outboundStarted=!0},enabled:function(e){this.id=e.id,this.handled=0,this.inboundStarted=!0},resumed:function(e){this.id=e.previd,e.h&&this.process(e,!0),this.inboundStarted=!0},failed:function(){this.inboundStarted=!1,this.outboundStarted=!1,this.id=!1,this.lastAck=0,this.handled=0,this.unacked=[]},ack:function(){this.client.send(new this.stanzas.Ack({h:this.handled}))},request:function(){this.pendingAck=!0,this.client.send(new this.stanzas.Request)},process:function(e,t){var n=this,r=mod(e.h-this.lastAck,i);this.pendingAck=!1;for(var s=0;s<r&&this.unacked.length>0;s++)this.client.emit("stanza:acked",this.unacked.shift());if(this.lastAck=e.h,t){var o=this.unacked;this.unacked=[],o.forEach(function(e){n.client.send(e)})}this.needAck()&&this.request()},track:function(e){var t=e._name,n={message:!0,presence:!0,iq:!0};this.outboundStarted&&n[t]&&(this.unacked.push(e),this.needAck()&&this.request())},handle:function(){this.inboundStarted&&(this.handled=mod(this.handled+1,i))},needAck:function(){return!this.pendingAck&&this.unacked.length>=this.windowSize}},Object.defineProperties(StreamManagement.prototype,{started:{get:function(){return this.outboundStarted&&this.inboundStarted},set:function(e){e||(this.outboundStarted=!1,this.inboundStarted=!1)}}}),t.exports=StreamManagement},{}],"/home/michel/stanza.io/lib/transports/bosh.js":[function(e,t,n){(function(n,i){"use strict";function timeoutPromise(e,t){var n;return Promise.race([e,new Promise(function(e,i){n=setTimeout(function(){i()},t)})]).then(function(e){return clearTimeout(n),e})}function delayPromise(e){return new Promise(function(t){setTimeout(function(){t()},e)})}function makeRequest(e){return new Promise(function(t,n){a(e,function(e,i,r){return e?n(e):t([i,r])})})}function retryRequest(e,t,n){return timeoutPromise(makeRequest(e),1e3*(t||20)).then(function(e){var t=e[0],n=e[1];if(t.statusCode<200||t.statusCode>=400)throw new Error("HTTP Status Error"+t.statusCode);return n}).catch(function(){if(n>0)return delayPromise(1e3).then(function(){return retryRequest(e,t,n-1)});throw new Error("Dead Connection, exceeded retry limit")})}function BOSHConnection(e,t){var n=this;c.call(this),n.sm=e,n.stanzas={BOSH:t.getDefinition("body","http://jabber.org/protocol/httpbind"),StreamError:t.getStreamError()},n.sendQueue=[],n.requests=[],n.maxRequests=void 0,n.sid="",n.authenticated=!1,n.on("raw:incoming",function(e){if(""!==(e=e.trim())){var i,r;try{i=t.parse(e,n.stanzas.BOSH)}catch(e){return r=new n.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",r,e),n.send(r),n.disconnect()}n.hasStream||(n.hasStream=!0,n.stream={id:i.sid||n.sid,lang:i.lang||"en",version:i.version||"1.0",to:i.to,from:i.from},n.sid=i.sid||n.sid,n.maxRequests=i.requests||n.maxRequests);i.payload.forEach(function(e){e.lang||(e.lang=n.stream.lang),n.emit("stream:data",e)}),"terminate"===i.type&&(n.rid=void 0,n.sid=void 0,n.emit("bosh:terminate",i),n.emit("stream:end"),n.emit("disconnected",n))}})}var r=e("lodash.assign"),s=e("lodash.filter"),o=e("util"),a=e("request"),c=e("wildemitter");o.inherits(BOSHConnection,c),BOSHConnection.prototype.connect=function(e){var t=this;if(t.config=r({rid:Math.ceil(9999999999*Math.random()),wait:30,maxRetries:5},e),t.hasStream=!1,t.sm.started=!1,t.url=e.boshURL,t.sid=t.config.sid,t.rid=t.config.rid,t.requests=[],t.sid)return t.hasStream=!0,t.stream={},t.emit("connected",t),t.emit("session:prebind",t.config.jid),void t.emit("session:started");t.rid++,t.request(new t.stanzas.BOSH({version:t.config.version||"1.0",to:t.config.server,lang:t.config.lang||"en",wait:t.config.wait,ver:"1.6",hold:1}))},BOSHConnection.prototype.disconnect=function(){this.hasStream?(this.rid++,this.request(new this.stanzas.BOSH({type:"terminate"}))):(this.stream=void 0,this.sid=void 0,this.rid=void 0,this.emit("disconnected",this))},BOSHConnection.prototype.restart=function(){var e=this;e.rid++,e.request(new e.stanzas.BOSH({to:e.config.server,lang:e.config.lang||"en",restart:"true"}))},BOSHConnection.prototype.send=function(e){var t=this;t.hasStream&&(t.sendQueue.push(e),n.nextTick(t.longPoll.bind(t)))},BOSHConnection.prototype.longPoll=function(){var e=!this.maxRequests||this.requests.length<this.maxRequests,t=!this.maxRequests||this.sendQueue.length>0&&this.requests.length<this.maxRequests;if(this.sid&&(e||t)){var n=this.sendQueue;this.sendQueue=[],this.rid++,this.request(new this.stanzas.BOSH({payload:n}))}},BOSHConnection.prototype.request=function(e){var t=this,r={id:t.rid,request:null};e.rid=t.rid,e.sid=t.sid;var o=new i(e.toString(),"utf8").toString();t.emit("raw:outgoing",o),t.requests.push(r);var a=retryRequest({uri:t.url,body:o,method:"POST",strictSSL:!0,headers:{"Content-Type":"text/xml"}},1.5*t.config.wait,this.config.maxRetries).catch(function(e){t.hasStream=!1;var n=new t.stanzas.StreamError({condition:"connection-timeout"});t.emit("stream:error",n,e),t.disconnect()});return r.request=a,a.then(function(e){t.emit("raw:incoming",new i(e,"utf8").toString())}),a.then(function(){t.requests=s(t.requests,function(e){return e.id!==r.id}),"terminate"!==e.type&&!t.requests.length&&t.authenticated&&n.nextTick(function(){n.nextTick(t.longPoll.bind(t))})})},t.exports=BOSHConnection}).call(this,e("_process"),e("buffer").Buffer)},{_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js",buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","lodash.assign":"/home/michel/stanza.io/node_modules/lodash.assign/index.js","lodash.filter":"/home/michel/stanza.io/node_modules/lodash.filter/index.js",request:"/home/michel/stanza.io/node_modules/xhr/index.js",util:"/home/michel/stanza.io/node_modules/util/util.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/lib/transports/old-websocket.js":[function(e,t,n){"use strict";function OldWSConnection(e,t){function wrap(e){return[n.streamStart,e,n.streamEnd].join("")}r.call(this,e,t);var n=this;n.on("connected",function(){n.streamStart='<stream:stream xmlns:stream="http://etherx.jabber.org/streams">',n.streamEnd="</stream:stream>"}),n.off("raw:incoming"),n.on("raw:incoming",function(e){var r,s,o;if(e=e.trim(),""!==(e=e.replace(/^(\s*<\?.*\?>\s*)*/,""))){if(e.match(n.streamEnd))return n.disconnect();if(n.hasStream)try{r=t.parse(wrap(e))}catch(e){return o=new this.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",o,e),n.send(o),n.disconnect()}else{var a=e.match(/^<(\S+:)?(\S+) /);n.streamStart=e,n.streamEnd="</"+(a[1]||"")+a[2]+">",s=!1;try{r=t.parse(e+n.streamEnd)}catch(i){try{r=t.parse(e),s=!0}catch(e){return o=new this.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",o,e),n.send(o),n.disconnect()}}n.hasStream=!0,n.stream=r,n.emit("stream:start",r)}i(r._extensions,function(e){!e.lang&&n.stream&&(e.lang=n.stream.lang),n.emit("stream:data",e)}),s&&n.emit("stream:end")}})}var i=e("lodash.foreach"),r=e("./websocket");e("util").inherits(OldWSConnection,r),OldWSConnection.prototype.startHeader=function(){return["<stream:stream",'xmlns:stream="http://etherx.jabber.org/streams"','xmlns="jabber:client"','version="'+(this.config.version||"1.0")+'"','xml:lang="'+(this.config.lang||"en")+'"','to="'+this.config.server+'">'].join(" ")},OldWSConnection.prototype.closeHeader=function(){return"</stream:stream>"},t.exports=OldWSConnection},{"./websocket":"/home/michel/stanza.io/lib/transports/websocket.js","lodash.foreach":"/home/michel/stanza.io/node_modules/lodash.foreach/index.js",util:"/home/michel/stanza.io/node_modules/util/util.js"}],"/home/michel/stanza.io/lib/transports/websocket.js":[function(e,t,n){(function(n){"use strict";function WSConnection(e,t){var i=this;r.call(this),i.sm=e,i.closing=!1,i.stanzas={Open:t.getDefinition("open","urn:ietf:params:xml:ns:xmpp-framing",!0),Close:t.getDefinition("close","urn:ietf:params:xml:ns:xmpp-framing",!0),StreamError:t.getStreamError()},i.sendQueue=s.queue(function(e,t){i.conn&&("string"!=typeof e&&(e=e.toString()),e=new n(e,"utf8").toString(),i.emit("raw:outgoing",e),i.conn.readyState===a&&i.conn.send(e)),t()},1),i.on("connected",function(){i.send(i.startHeader())}),i.on("raw:incoming",function(e){var n,r;if(""!==(e=e.trim())){try{n=t.parse(e)}catch(e){return r=new i.stanzas.StreamError({condition:"invalid-xml"}),i.emit("stream:error",r,e),i.send(r),i.disconnect()}if("openStream"===n._name)return i.hasStream=!0,i.stream=n,i.emit("stream:start",n.toJSON());if("closeStream"===n._name)return i.emit("stream:end"),i.disconnect();!n.lang&&i.stream&&(n.lang=i.stream.lang),i.emit("stream:data",n)}})}var i=e("util"),r=e("wildemitter"),s=e("async"),o=e("faye-websocket")&&e("faye-websocket").Client?e("faye-websocket").Client:window.WebSocket,a=1;i.inherits(WSConnection,r),WSConnection.prototype.connect=function(e){var t=this;t.config=e,t.hasStream=!1,t.closing=!1,t.conn=new o(e.wsURL,"xmpp"),t.conn.onerror=function(e){e.preventDefault(),t.emit("disconnected",t)},t.conn.onclose=function(){t.emit("disconnected",t)},t.conn.onopen=function(){t.sm.started=!1,t.emit("connected",t)},t.conn.onmessage=function(e){t.emit("raw:incoming",new n(e.data,"utf8").toString())}},WSConnection.prototype.startHeader=function(){return new this.stanzas.Open({version:this.config.version||"1.0",lang:this.config.lang||"en",to:this.config.server})},WSConnection.prototype.closeHeader=function(){return new this.stanzas.Close},WSConnection.prototype.disconnect=function(){this.conn&&!this.closing&&this.hasStream?(this.closing=!0,this.send(this.closeHeader())):(this.hasStream=!1,this.stream=void 0,this.conn&&this.conn.readyState===a&&this.conn.close(),this.conn=void 0)},WSConnection.prototype.restart=function(){var e=this;e.hasStream=!1,e.send(this.startHeader())},WSConnection.prototype.send=function(e){this.sendQueue.push(e)},t.exports=WSConnection}).call(this,e("buffer").Buffer)},{async:"/home/michel/stanza.io/node_modules/async/dist/async.js",buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","faye-websocket":"/home/michel/stanza.io/node_modules/browser-resolve/empty.js",util:"/home/michel/stanza.io/node_modules/util/util.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/node_modules/alt-sasl-digest-md5/index.js":[function(e,t,n){function parse(e){for(var t={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/),i=0,r=n.length;i<r;i++){var s=/(\w+)=["]?([^"]+)["]?$/.exec(n[i]);s&&(t[s[1]]=s[2])}return t}function genNonce(){return i(16).toString("hex")}function Mechanism(e){e=e||{},this._genNonce=e.genNonce||genNonce}var i=e("randombytes"),r=e("create-hash");Mechanism.Mechanism=Mechanism,Mechanism.prototype.name="DIGEST-MD5",Mechanism.prototype.clientFirst=!1,Mechanism.prototype.response=function(e){if(!this._completed){var t=e.serviceType+"/"+e.host;e.serviceName&&e.host!==e.serviceName&&(t+="/"+e.serviceName);var n=e.realm||this._realm||"",i=this._genNonce(),s="00000001",o="auth",a="";a+='username="'+e.username+'"',n&&(a+=',realm="'+n+'"'),a+=',nonce="'+this._nonce+'"',a+=',cnonce="'+i+'"',a+=",nc="+s,a+=",qop=auth",a+=',digest-uri="'+t+'"';var c=r("md5").update(e.username).update(":").update(n).update(":").update(e.password).digest(),u=r("md5").update(c).update(":").update(this._nonce).update(":").update(i);e.authzid&&u.update(":").update(e.authzid),u=u.digest("hex");var l=r("md5").update("AUTHENTICATE:").update(t);l=l.digest("hex");return a+=",response="+r("md5").update(u).update(":").update(this._nonce).update(":").update(s).update(":").update(i).update(":").update(o).update(":").update(l).digest("hex"),"utf-8"===this._charset&&(a+=",charset=utf-8"),e.authzid&&(a+='authzid="'+e.authzid+'"'),a}},Mechanism.prototype.challenge=function(e){var t=parse(e);return this._completed=!!t.rspauth,this._realm=t.realm,this._nonce=t.nonce,this._qop=(t.qop||"auth").split(","),this._stale=t.stale,this._maxbuf=parseInt(t.maxbuf)||65536,this._charset=t.charset,this._algo=t.algorithm,this._cipher=t.cipher,this._cipher&&this._cipher.split(","),this},t.exports=Mechanism},{"create-hash":"/home/michel/stanza.io/node_modules/create-hash/browser.js",randombytes:"/home/michel/stanza.io/node_modules/randombytes/browser.js"}],"/home/michel/stanza.io/node_modules/async/dist/async.js":[function(t,n,i){(function(t,r){!function(t,r){"object"==typeof i&&void 0!==n?r(i):"function"==typeof e&&e.amd?e(["exports"],r):r(t.async=t.async||{})}(this,function(e){"use strict";function slice(e,t){t|=0;for(var n=Math.max(e.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=e[t+r];return i}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function fallback(e){setTimeout(e,0)}function wrap(e){return function(t){var n=slice(arguments,1);e(function(){t.apply(null,n)})}}function asyncify(e){return o(function(t,n){var i;try{i=e.apply(this,t)}catch(e){return n(e)}isObject(i)&&"function"==typeof i.then?i.then(function(e){invokeCallback(n,null,e)},function(e){invokeCallback(n,e.message?e:new Error(e))}):n(null,i)})}function invokeCallback(e,t,n){try{e(t,n)}catch(e){u(rethrow,e)}}function rethrow(e){throw e}function isAsync(e){return l&&"AsyncFunction"===e[Symbol.toStringTag]}function wrapAsync(e){return isAsync(e)?asyncify(e):e}function applyEach$1(e){return function(t){var n=slice(arguments,1),i=o(function(n,i){var r=this;return e(t,function(e,t){wrapAsync(e).apply(r,n.concat(t))},i)});return n.length?i.apply(this,n):i}}function getRawTag(e){var t=b.call(e,_),n=e[_];try{e[_]=void 0;var i=!0}catch(e){}var r=g.call(e);return i&&(t?e[_]=n:delete e[_]),r}function objectToString(e){return v.call(e)}function baseGetTag(e){return null==e?void 0===e?j:x:S&&S in Object(e)?getRawTag(e):objectToString(e)}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==E||t==A||t==w||t==N}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=O}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function noop(){}function once(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}function baseTimes(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function isObjectLike(e){return null!=e&&"object"==typeof e}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==R}function stubFalse(){return!1}function isIndex(e,t){return!!(t=null==t?J:t)&&("number"==typeof e||H.test(e))&&e>-1&&e%1==0&&e<t}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!V[baseGetTag(e)]}function arrayLikeKeys(e,t){var n=B(e),i=!n&&L(e),r=!n&&!i&&G(e),s=!n&&!i&&!r&&Z(e),o=n||i||r||s,a=o?baseTimes(e.length,String):[],c=a.length;for(var u in e)!t&&!te.call(e,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||a.push(u);return a}function isPrototype(e){
var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ne)}function baseKeys(e){if(!isPrototype(e))return ie(e);var t=[];for(var n in Object(e))se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function createArrayIterator(e){var t=-1,n=e.length;return function next(){return++t<n?{value:e[t],key:t}:null}}function createES2015Iterator(e){var t=-1;return function next(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function createObjectIterator(e){var t=keys(e),n=-1,i=t.length;return function next(){var r=t[++n];return n<i?{value:e[r],key:r}:null}}function iterator(e){if(isArrayLike(e))return createArrayIterator(e);var t=I(e);return t?createES2015Iterator(t):createObjectIterator(e)}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _eachOfLimit(e){return function(t,n,i){function iterateeCallback(e,t){if(o-=1,e)s=!0,i(e);else{if(t===T||s&&o<=0)return s=!0,i(null);replenish()}}function replenish(){for(;o<e&&!s;){var t=r();if(null===t)return s=!0,void(o<=0&&i(null));o+=1,n(t.value,t.key,onlyOnce(iterateeCallback))}}if(i=once(i||noop),e<=0||!t)return i(null);var r=iterator(t),s=!1,o=0;replenish()}}function eachOfLimit(e,t,n,i){_eachOfLimit(t)(e,wrapAsync(n),i)}function doLimit(e,t){return function(n,i,r){return e(n,t,i,r)}}function eachOfArrayLike(e,t,n){function iteratorCallback(e,t){e?n(e):++r!==s&&t!==T||n(null)}n=once(n||noop);var i=0,r=0,s=e.length;for(0===s&&n(null);i<s;i++)t(e[i],i,onlyOnce(iteratorCallback))}function doParallel(e){return function(t,n,i){return e(ae,t,wrapAsync(n),i)}}function _asyncMap(e,t,n,i){i=i||noop,t=t||[];var r=[],s=0,o=wrapAsync(n);e(t,function(e,t,n){var i=s++;o(e,function(e,t){r[i]=t,n(e)})},function(e){i(e,r)})}function doParallelLimit(e){return function(t,n,i,r){return e(_eachOfLimit(n),t,wrapAsync(i),r)}}function arrayEach(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function baseForOwn(e,t){return e&&he(e,t,keys)}function baseFindIndex(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function baseIndexOf(e,t,n){return t===t?strictIndexOf(e,t,n):baseFindIndex(e,baseIsNaN,n)}function arrayMap(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==pe}function baseToString(e){if("string"==typeof e)return e;if(B(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return _e?_e.call(e):"";var t=e+"";return"0"==t&&1/e==-be?"-0":t}function baseSlice(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}function castSlice(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:baseSlice(e,t,n)}function charsEndIndex(e,t){for(var n=e.length;n--&&baseIndexOf(t,e[n],0)>-1;);return n}function charsStartIndex(e,t){for(var n=-1,i=e.length;++n<i&&baseIndexOf(t,e[n],0)>-1;);return n}function asciiToArray(e){return e.split("")}function hasUnicode(e){return ye.test(e)}function unicodeToArray(e){return e.match(Oe)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function toString(e){return null==e?"":baseToString(e)}function trim(e,t,n){if((e=toString(e))&&(n||void 0===t))return e.replace(Te,"");if(!e||!(t=baseToString(t)))return e;var i=stringToArray(e),r=stringToArray(t);return castSlice(i,charsStartIndex(i,r),charsEndIndex(i,r)+1).join("")}function parseParams(e){return e=e.toString().replace(ze,""),e=e.match(Ce)[2].replace(" ",""),e=e?e.split(Ie):[],e=e.map(function(e){return trim(e.replace(Re,""))})}function autoInject(e,t){var n={};baseForOwn(e,function(e,t){function newTask(t,n){var r=arrayMap(i,function(e){return t[e]});r.push(n),wrapAsync(e).apply(null,r)}var i,r=isAsync(e),s=!r&&1===e.length||r&&0===e.length;if(B(e))i=e.slice(0,-1),e=e[e.length-1],n[t]=i.concat(i.length>0?newTask:e);else if(s)n[t]=e;else{if(i=parseParams(e),0===e.length&&!r&&0===i.length)throw new Error("autoInject task functions require explicit parameters.");r||i.pop(),n[t]=i.concat(newTask)}}),me(n,t)}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(e,t){e.length=1,e.head=e.tail=t}function queue(e,t,n){function _insert(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(c.started=!0,B(e)||(e=[e]),0===e.length&&c.idle())return u(function(){c.drain()});for(var i=0,r=e.length;i<r;i++){var s={data:e[i],callback:n||noop};t?c._tasks.unshift(s):c._tasks.push(s)}o||(o=!0,u(function(){o=!1,c.process()}))}function _next(e){return function(t){r-=1;for(var n=0,i=e.length;n<i;n++){var o=e[n],a=baseIndexOf(s,o,0);0===a?s.shift():a>0&&s.splice(a,1),o.callback.apply(o,arguments),null!=t&&c.error(t,o.data)}r<=c.concurrency-c.buffer&&c.unsaturated(),c.idle()&&c.drain(),c.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=wrapAsync(e),r=0,s=[],o=!1,a=!1,c={_tasks:new DLL,concurrency:t,payload:n,saturated:noop,unsaturated:noop,buffer:t/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(e,t){_insert(e,!1,t)},kill:function(){c.drain=noop,c._tasks.empty()},unshift:function(e,t){_insert(e,!0,t)},remove:function(e){c._tasks.remove(e)},process:function(){if(!a){for(a=!0;!c.paused&&r<c.concurrency&&c._tasks.length;){var e=[],t=[],n=c._tasks.length;c.payload&&(n=Math.min(n,c.payload));for(var o=0;o<n;o++){var u=c._tasks.shift();e.push(u),s.push(u),t.push(u.data)}r+=1,0===c._tasks.length&&c.empty(),r===c.concurrency&&c.saturated();var l=onlyOnce(_next(e));i(t,l)}a=!1}},length:function(){return c._tasks.length},running:function(){return r},workersList:function(){return s},idle:function(){return c._tasks.length+r===0},pause:function(){c.paused=!0},resume:function(){!1!==c.paused&&(c.paused=!1,u(c.process))}};return c}function cargo(e,t){return queue(e,1,t)}function reduce(e,t,n,i){i=once(i||noop);var r=wrapAsync(n);ke(e,function(e,n,i){r(t,e,function(e,n){t=n,i(e)})},function(e){i(e,t)})}function seq(){var e=arrayMap(arguments,wrapAsync);return function(){var t=slice(arguments),n=this,i=t[t.length-1];"function"==typeof i?t.pop():i=noop,reduce(e,t,function(e,t,i){t.apply(n,e.concat(function(e){var t=slice(arguments,1);i(e,t)}))},function(e,t){i.apply(n,[e].concat(t))})}}function identity(e){return e}function _createTester(e,t){return function(n,i,r,s){s=s||noop;var o,a=!1;n(i,function(n,i,s){r(n,function(i,r){i?s(i):e(r)&&!o?(a=!0,o=t(!0,n),s(null,T)):s()})},function(e){e?s(e):s(null,a?o:t(!1))})}}function _findGetResult(e,t){return t}function consoleFunc(e){return function(t){var n=slice(arguments,1);n.push(function(t){var n=slice(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&arrayEach(n,function(t){console[e](t)}))}),wrapAsync(t).apply(null,n)}}function doDuring(e,t,n){function next(e){if(e)return n(e);var t=slice(arguments,1);t.push(check),r.apply(this,t)}function check(e,t){return e?n(e):t?void i(next):n(null)}n=onlyOnce(n||noop);var i=wrapAsync(e),r=wrapAsync(t);check(null,!0)}function doWhilst(e,t,n){n=onlyOnce(n||noop);var i=wrapAsync(e),r=function(e){if(e)return n(e);var s=slice(arguments,1);if(t.apply(this,s))return i(r);n.apply(null,[null].concat(s))};i(r)}function doUntil(e,t,n){doWhilst(e,function(){return!t.apply(this,arguments)},n)}function during(e,t,n){function next(e){if(e)return n(e);r(check)}function check(e,t){return e?n(e):t?void i(next):n(null)}n=onlyOnce(n||noop);var i=wrapAsync(t),r=wrapAsync(e);r(check)}function _withoutIndex(e){return function(t,n,i){return e(t,i)}}function eachLimit(e,t,n){ae(e,_withoutIndex(wrapAsync(t)),n)}function eachLimit$1(e,t,n,i){_eachOfLimit(t)(e,_withoutIndex(wrapAsync(n)),i)}function ensureAsync(e){return isAsync(e)?e:o(function(t,n){var i=!0;t.push(function(){var e=arguments;i?u(function(){n.apply(null,e)}):n.apply(null,e)}),e.apply(this,t),i=!1})}function notId(e){return!e}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function filterArray(e,t,n,i){var r=new Array(t.length);e(t,function(e,t,i){n(e,function(e,n){r[t]=!!n,i(e)})},function(e){if(e)return i(e);for(var n=[],s=0;s<t.length;s++)r[s]&&n.push(t[s]);i(null,n)})}function filterGeneric(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(n,s){n?i(n):(s&&r.push({index:t,value:e}),i())})},function(e){e?i(e):i(null,arrayMap(r.sort(function(e,t){return e.index-t.index}),baseProperty("value")))})}function _filter(e,t,n,i){(isArrayLike(t)?filterArray:filterGeneric)(e,t,wrapAsync(n),i||noop)}function forever(e,t){function next(e){if(e)return n(e);i(next)}var n=onlyOnce(t||noop),i=wrapAsync(ensureAsync(e));next()}function mapValuesLimit(e,t,n,i){i=once(i||noop);var r={},s=wrapAsync(n);eachOfLimit(e,t,function(e,t,n){s(e,t,function(e,i){if(e)return n(e);r[t]=i,n()})},function(e){i(e,r)})}function has(e,t){return t in e}function memoize(e,t){var n=Object.create(null),i=Object.create(null);t=t||identity;var r=wrapAsync(e),s=o(function memoized(e,s){var o=t.apply(null,e);has(n,o)?u(function(){s.apply(null,n[o])}):has(i,o)?i[o].push(s):(i[o]=[s],r.apply(null,e.concat(function(){var e=slice(arguments);n[o]=e;var t=i[o];delete i[o];for(var r=0,s=t.length;r<s;r++)t[r].apply(null,e)})))});return s.memo=n,s.unmemoized=e,s}function _parallel(e,t,n){n=n||noop;var i=isArrayLike(t)?[]:{};e(t,function(e,t,n){wrapAsync(e)(function(e,r){arguments.length>2&&(r=slice(arguments,1)),i[t]=r,n(e)})},function(e){n(e,i)})}function parallelLimit(e,t){_parallel(ae,e,t)}function parallelLimit$1(e,t,n){_parallel(_eachOfLimit(t),e,n)}function race(e,t){if(t=once(t||noop),!B(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,i=e.length;n<i;n++)wrapAsync(e[n])(t)}function reduceRight(e,t,n,i){reduce(slice(e).reverse(),t,n,i)}function reflect(e){var t=wrapAsync(e);return o(function reflectOn(e,n){return e.push(function callback(e,t){if(e)n(null,{error:e});else{var i;i=arguments.length<=2?t:slice(arguments,1),n(null,{value:i})}}),t.apply(this,e)})}function reflectAll(e){var t;return B(e)?t=arrayMap(e,reflect):(t={},baseForOwn(e,function(e,n){t[n]=reflect.call(this,e)})),t}function reject$1(e,t,n,i){_filter(e,t,function(e,t){n(e,function(e,n){t(e,!n)})},i)}function constant$1(e){return function(){return e}}function retry(e,t,n){function retryAttempt(){o(function(e){e&&a++<s.times&&("function"!=typeof s.errorFilter||s.errorFilter(e))?setTimeout(retryAttempt,s.intervalFunc(a)):n.apply(null,arguments)})}var i=5,r=0,s={times:i,intervalFunc:constant$1(r)};if(arguments.length<3&&"function"==typeof e?(n=t||noop,t=e):(!function parseTimes(e,t){if("object"==typeof t)e.times=+t.times||i,e.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||r),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||i}}(s,e),n=n||noop),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var o=wrapAsync(t),a=1;retryAttempt()}function series(e,t){_parallel(ke,e,t)}function sortBy(e,t,n){function comparator(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}var i=wrapAsync(t);ce(e,function(e,t){i(e,function(n,i){if(n)return t(n);t(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);n(null,arrayMap(t.sort(comparator),baseProperty("value")))})}function timeout(e,t,n){var i=wrapAsync(e);return o(function(r,s){function timeoutCallback(){var t=e.name||"anonymous",i=new Error('Callback function "'+t+'" timed out.');i.code="ETIMEDOUT",n&&(i.info=n),a=!0,s(i)}var o,a=!1;r.push(function(){a||(s.apply(null,arguments),clearTimeout(o))}),o=setTimeout(timeoutCallback,t),i.apply(null,r)})}function baseRange(e,t,n,i){for(var r=-1,s=bt(pt((t-e)/(n||1)),0),o=Array(s);s--;)o[i?s:++r]=e,e+=n;return o}function timeLimit(e,t,n,i){var r=wrapAsync(n);le(baseRange(0,e,1),t,r,i)}function transform(e,t,n,i){arguments.length<=3&&(i=n,n=t,t=B(e)?[]:{}),i=once(i||noop);var r=wrapAsync(n);ae(e,function(e,n,i){r(t,e,n,i)},function(e){i(e,t)})}function tryEach(e,t){var n,i=null;t=t||noop,Ve(e,function(e,t){wrapAsync(e)(function(e,r){n=arguments.length>2?slice(arguments,1):r,i=e,t(!e)})},function(){t(i,n)})}function unmemoize(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function whilst(e,t,n){n=onlyOnce(n||noop);var i=wrapAsync(t);if(!e())return n(null);var r=function(t){if(t)return n(t);if(e())return i(r);var s=slice(arguments,1);n.apply(null,[null].concat(s))};i(r)}function until(e,t,n){whilst(function(){return!e.apply(this,arguments)},t,n)}var i,s=function(e){var t=slice(arguments,1);return function(){var n=slice(arguments);return e.apply(null,t.concat(n))}},o=function(e){return function(){var t=slice(arguments),n=t.pop();e.call(this,t,n)}},a="function"==typeof setImmediate&&setImmediate,c="object"==typeof t&&"function"==typeof t.nextTick;i=a?setImmediate:c?t.nextTick:fallback;var u=wrap(i),l="function"==typeof Symbol,d="object"==typeof r&&r&&r.Object===Object&&r,f="object"==typeof self&&self&&self.Object===Object&&self,h=d||f||Function("return this")(),m=h.Symbol,p=Object.prototype,b=p.hasOwnProperty,g=p.toString,_=m?m.toStringTag:void 0,y=Object.prototype,v=y.toString,x="[object Null]",j="[object Undefined]",S=m?m.toStringTag:void 0,w="[object AsyncFunction]",E="[object Function]",A="[object GeneratorFunction]",N="[object Proxy]",O=9007199254740991,T={},C="function"==typeof Symbol&&Symbol.iterator,I=function(e){return C&&e[C]&&e[C]()},R="[object Arguments]",z=Object.prototype,M=z.hasOwnProperty,k=z.propertyIsEnumerable,L=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&M.call(e,"callee")&&!k.call(e,"callee")},B=Array.isArray,P="object"==typeof e&&e&&!e.nodeType&&e,D=P&&"object"==typeof n&&n&&!n.nodeType&&n,U=D&&D.exports===P,F=U?h.Buffer:void 0,q=F?F.isBuffer:void 0,G=q||stubFalse,J=9007199254740991,H=/^(?:0|[1-9]\d*)$/,V={};V["[object Float32Array]"]=V["[object Float64Array]"]=V["[object Int8Array]"]=V["[object Int16Array]"]=V["[object Int32Array]"]=V["[object Uint8Array]"]=V["[object Uint8ClampedArray]"]=V["[object Uint16Array]"]=V["[object Uint32Array]"]=!0,V["[object Arguments]"]=V["[object Array]"]=V["[object ArrayBuffer]"]=V["[object Boolean]"]=V["[object DataView]"]=V["[object Date]"]=V["[object Error]"]=V["[object Function]"]=V["[object Map]"]=V["[object Number]"]=V["[object Object]"]=V["[object RegExp]"]=V["[object Set]"]=V["[object String]"]=V["[object WeakMap]"]=!1;var W="object"==typeof e&&e&&!e.nodeType&&e,X=W&&"object"==typeof n&&n&&!n.nodeType&&n,$=X&&X.exports===W,K=$&&d.process,Y=function(){try{return K&&K.binding&&K.binding("util")}catch(e){}}(),Q=Y&&Y.isTypedArray,Z=Q?function baseUnary(e){return function(t){return e(t)}}(Q):baseIsTypedArray,ee=Object.prototype,te=ee.hasOwnProperty,ne=Object.prototype,ie=function overArg(e,t){return function(n){return e(t(n))}}(Object.keys,Object),re=Object.prototype,se=re.hasOwnProperty,oe=doLimit(eachOfLimit,1/0),ae=function(e,t,n){(isArrayLike(e)?eachOfArrayLike:oe)(e,wrapAsync(t),n)},ce=doParallel(_asyncMap),ue=applyEach$1(ce),le=doParallelLimit(_asyncMap),de=doLimit(le,1),fe=applyEach$1(de),he=function createBaseFor(e){return function(t,n,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var c=o[e?a:++r];if(!1===n(s[c],c,s))break}return t}}(),me=function(e,t,n){function enqueueTask(e,t){u.push(function(){runTask(e,t)})}function processQueue(){if(0===u.length&&0===o)return n(null,s);for(;u.length&&o<t;){u.shift()()}}function addListener(e,t){var n=c[e];n||(n=c[e]=[]),n.push(t)}function taskComplete(e){arrayEach(c[e]||[],function(e){e()}),processQueue()}function runTask(e,t){if(!a){var i=onlyOnce(function(t,i){if(o--,arguments.length>2&&(i=slice(arguments,1)),t){var r={};baseForOwn(s,function(e,t){r[t]=e}),r[e]=i,a=!0,c=Object.create(null),n(t,r)}else s[e]=i,taskComplete(e)});o++;var r=wrapAsync(t[t.length-1]);t.length>1?r(s,i):r(i)}}function getDependents(t){var n=[];return baseForOwn(e,function(e,i){B(e)&&baseIndexOf(e,t,0)>=0&&n.push(i)}),n}"function"==typeof t&&(n=t,t=null),n=once(n||noop);var i=keys(e),r=i.length;if(!r)return n(null);t||(t=r);var s={},o=0,a=!1,c=Object.create(null),u=[],l=[],d={};baseForOwn(e,function(t,n){if(!B(t))return enqueueTask(n,[t]),void l.push(n);var i=t.slice(0,t.length-1),r=i.length;if(0===r)return enqueueTask(n,t),void l.push(n);d[n]=r,arrayEach(i,function(s){if(!e[s])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+s+"` in "+i.join(", "));addListener(s,function(){0===--r&&enqueueTask(n,t)})})}),function checkForDeadlocks(){for(var e,t=0;l.length;)e=l.pop(),t++,arrayEach(getDependents(e),function(e){0==--d[e]&&l.push(e)});if(t!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),processQueue()},pe="[object Symbol]",be=1/0,ge=m?m.prototype:void 0,_e=ge?ge.toString:void 0,ye=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ve="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",xe="\\ud83c[\\udffb-\\udfff]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",Se="[\\ud800-\\udbff][\\udc00-\\udfff]",we="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ee="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",je,Se].join("|")+")[\\ufe0e\\ufe0f]?"+we+")*",Ae="[\\ufe0e\\ufe0f]?"+we+Ee,Ne="(?:"+["[^\\ud800-\\udfff]"+ve+"?",ve,je,Se,"[\\ud800-\\udfff]"].join("|")+")",Oe=RegExp(xe+"(?="+xe+")|"+Ne+Ae,"g"),Te=/^\s+|\s+$/g,Ce=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Ie=/,/,Re=/(=.+)?(\s*)$/,ze=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;DLL.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},DLL.prototype.empty=function(){for(;this.head;)this.shift();return this},DLL.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},DLL.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},DLL.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):setInitial(this,e)},DLL.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):setInitial(this,e)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},DLL.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},DLL.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var Me,ke=doLimit(eachOfLimit,1),Le=function(){return seq.apply(null,slice(arguments).reverse())},Be=Array.prototype.concat,Pe=function(e,t,n,i){i=i||noop;var r=wrapAsync(n);le(e,t,function(e,t){r(e,function(e){return e?t(e):t(null,slice(arguments,1))})},function(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&(n=Be.apply(n,t[r]));return i(e,n)})},De=doLimit(Pe,1/0),Ue=doLimit(Pe,1),Fe=function(){var e=slice(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}},qe=doParallel(_createTester(identity,_findGetResult)),Ge=doParallelLimit(_createTester(identity,_findGetResult)),Je=doLimit(Ge,1),He=consoleFunc("dir"),Ve=doLimit(eachLimit$1,1),We=doParallel(_createTester(notId,notId)),Xe=doParallelLimit(_createTester(notId,notId)),$e=doLimit(Xe,1),Ke=doParallel(_filter),Ye=doParallelLimit(_filter),Qe=doLimit(Ye,1),Ze=function(e,t,n,i){i=i||noop;var r=wrapAsync(n);le(e,t,function(e,t){r(e,function(n,i){return n?t(n):t(null,{key:i,val:e})})},function(e,t){for(var n={},r=Object.prototype.hasOwnProperty,s=0;s<t.length;s++)if(t[s]){var o=t[s].key,a=t[s].val;r.call(n,o)?n[o].push(a):n[o]=[a]}return i(e,n)})},et=doLimit(Ze,1/0),tt=doLimit(Ze,1),nt=consoleFunc("log"),it=doLimit(mapValuesLimit,1/0),rt=doLimit(mapValuesLimit,1);Me=c?t.nextTick:a?setImmediate:fallback;var st=wrap(Me),ot=function(e,t){var n=wrapAsync(e);return queue(function(e,t){n(e[0],t)},t,1)},at=function(e,t){var n=ot(e,t);return n.push=function(e,t,i){if(null==i&&(i=noop),"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,B(e)||(e=[e]),0===e.length)return u(function(){n.drain()});t=t||0;for(var r=n._tasks.head;r&&t>=r.priority;)r=r.next;for(var s=0,o=e.length;s<o;s++){var a={data:e[s],priority:t,callback:i};r?n._tasks.insertBefore(r,a):n._tasks.push(a)}u(n.process)},delete n.unshift,n},ct=doParallel(reject$1),ut=doParallelLimit(reject$1),lt=doLimit(ut,1),dt=function(e,t){t||(t=e,e=null);var n=wrapAsync(t);return o(function(t,i){function taskFn(e){n.apply(null,t.concat(e))}e?retry(e,taskFn,i):retry(taskFn,i)})},ft=doParallel(_createTester(Boolean,identity)),ht=doParallelLimit(_createTester(Boolean,identity)),mt=doLimit(ht,1),pt=Math.ceil,bt=Math.max,gt=doLimit(timeLimit,1/0),_t=doLimit(timeLimit,1),yt=function(e,t){function nextTask(t){var i=wrapAsync(e[n++]);t.push(onlyOnce(next)),i.apply(null,t)}function next(i){if(i||n===e.length)return t.apply(null,arguments);nextTask(slice(arguments,1))}if(t=once(t||noop),!B(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;nextTask([])},vt={apply:s,applyEach:ue,applyEachSeries:fe,asyncify:asyncify,auto:me,autoInject:autoInject,cargo:cargo,compose:Le,concat:De,concatLimit:Pe,concatSeries:Ue,constant:Fe,detect:qe,detectLimit:Ge,detectSeries:Je,dir:He,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:ae,eachOfLimit:eachOfLimit,eachOfSeries:ke,eachSeries:Ve,ensureAsync:ensureAsync,every:We,everyLimit:Xe,everySeries:$e,filter:Ke,filterLimit:Ye,filterSeries:Qe,forever:forever,groupBy:et,groupByLimit:Ze,groupBySeries:tt,log:nt,map:ce,mapLimit:le,mapSeries:de,mapValues:it,mapValuesLimit:mapValuesLimit,mapValuesSeries:rt,memoize:memoize,nextTick:st,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:at,queue:ot,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:ct,rejectLimit:ut,rejectSeries:lt,retry:retry,retryable:dt,seq:seq,series:series,setImmediate:u,some:ft,someLimit:ht,someSeries:mt,sortBy:sortBy,timeout:timeout,times:gt,timesLimit:timeLimit,timesSeries:_t,transform:transform,tryEach:tryEach,unmemoize:unmemoize,until:until,waterfall:yt,whilst:whilst,all:We,allLimit:Xe,allSeries:$e,any:ft,anyLimit:ht,anySeries:mt,find:qe,findLimit:Ge,findSeries:Je,forEach:eachLimit,forEachSeries:Ve,forEachLimit:eachLimit$1,forEachOf:ae,forEachOfSeries:ke,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:Ke,selectLimit:Ye,selectSeries:Qe,wrapSync:asyncify};e.default=vt,e.apply=s,e.applyEach=ue,e.applyEachSeries=fe,e.asyncify=asyncify,e.auto=me,e.autoInject=autoInject,e.cargo=cargo,e.compose=Le,e.concat=De,e.concatLimit=Pe,e.concatSeries=Ue,e.constant=Fe,e.detect=qe,e.detectLimit=Ge,e.detectSeries=Je,e.dir=He,e.doDuring=doDuring,e.doUntil=doUntil,e.doWhilst=doWhilst,e.during=during,e.each=eachLimit,e.eachLimit=eachLimit$1,e.eachOf=ae,e.eachOfLimit=eachOfLimit,e.eachOfSeries=ke,e.eachSeries=Ve,e.ensureAsync=ensureAsync,e.every=We,e.everyLimit=Xe,e.everySeries=$e,e.filter=Ke,e.filterLimit=Ye,e.filterSeries=Qe,e.forever=forever,e.groupBy=et,e.groupByLimit=Ze,e.groupBySeries=tt,e.log=nt,e.map=ce,e.mapLimit=le,e.mapSeries=de,e.mapValues=it,e.mapValuesLimit=mapValuesLimit,e.mapValuesSeries=rt,e.memoize=memoize,e.nextTick=st,e.parallel=parallelLimit,e.parallelLimit=parallelLimit$1,e.priorityQueue=at,e.queue=ot,e.race=race,e.reduce=reduce,e.reduceRight=reduceRight,e.reflect=reflect,e.reflectAll=reflectAll,e.reject=ct,e.rejectLimit=ut,e.rejectSeries=lt,e.retry=retry,e.retryable=dt,e.seq=seq,e.series=series,e.setImmediate=u,e.some=ft,e.someLimit=ht,e.someSeries=mt,e.sortBy=sortBy,e.timeout=timeout,e.times=gt,e.timesLimit=timeLimit,e.timesSeries=_t,e.transform=transform,e.tryEach=tryEach,e.unmemoize=unmemoize,e.until=until,e.waterfall=yt,e.whilst=whilst,e.all=We,e.allLimit=Xe,e.allSeries=$e,e.any=ft,e.anyLimit=ht,e.anySeries=mt,e.find=qe,e.findLimit=Ge,e.findSeries=Je,e.forEach=eachLimit,e.forEachSeries=Ve,e.forEachLimit=eachLimit$1,e.forEachOf=ae,e.forEachOfSeries=ke,e.forEachOfLimit=eachOfLimit,e.inject=reduce,e.foldl=reduce,e.foldr=reduceRight,e.select=Ke,e.selectLimit=Ye,e.selectSeries=Qe,e.wrapSync=asyncify,Object.defineProperty(e,"__esModule",{value:!0})})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js"}],"/home/michel/stanza.io/node_modules/babel-runtime/core-js/object/assign.js":[function(e,t,n){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":"/home/michel/stanza.io/node_modules/core-js/library/fn/object/assign.js"}],"/home/michel/stanza.io/node_modules/babel-runtime/helpers/interop-require-default.js":[function(e,t,n){"use strict";n.default=function(e){return e&&e.__esModule?e:{default:e}},n.__esModule=!0},{}],"/home/michel/stanza.io/node_modules/base64-js/index.js":[function(e,t,n){"use strict";function placeHoldersCount(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function byteLength(e){return 3*e.length/4-placeHoldersCount(e)}function toByteArray(e){var t,n,i,o,a,c=e.length;o=placeHoldersCount(e),a=new s(3*c/4-o),n=o>0?c-4:c;var u=0;for(t=0;t<n;t+=4)i=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,a[u++]=255&i):1===o&&(i=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}function tripletToBase64(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function encodeChunk(e,t,n){for(var i,r=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(tripletToBase64(i));return r.join("")}function fromByteArray(e){for(var t,n=e.length,r=n%3,s="",o=[],a=0,c=n-r;a<c;a+=16383)o.push(encodeChunk(e,a,a+16383>c?c:a+16383));return 1===r?(t=e[n-1],s+=i[t>>2],s+=i[t<<4&63],s+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],s+=i[t>>10],s+=i[t>>4&63],s+=i[t<<2&63],s+="="),o.push(s),o.join("")}n.byteLength=byteLength,n.toByteArray=toByteArray,n.fromByteArray=fromByteArray;for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],"/home/michel/stanza.io/node_modules/bitwise-xor/index.js":[function(e,t,n){(function(e){function xor(t,n){e.isBuffer(t)||(t=new e(t)),e.isBuffer(n)||(n=new e(n));var i=[];if(t.length>n.length)for(var r=0;r<n.length;r++)i.push(t[r]^n[r]);else for(var r=0;r<t.length;r++)i.push(t[r]^n[r]);return new e(i)}t.exports=xor}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js"}],"/home/michel/stanza.io/node_modules/browser-resolve/empty.js":[function(e,t,n){},{}],"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js":[function(e,t,n){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(i===setTimeout)return setTimeout(e,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}function cleanUpNextTick(){c&&o&&(c=!1,o.length?a=o.concat(a):u=-1,a.length&&drainQueue())}function drainQueue(){if(!c){var e=runTimeout(cleanUpNextTick);c=!0;for(var t=a.length;t;){for(o=a,a=[];++u<t;)o&&o[u].run();u=-1,t=a.length}o=null,c=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var i,r,s=t.exports={};!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){i=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var o,a=[],c=!1,u=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||c||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],"/home/michel/stanza.io/node_modules/buffer/index.js":[function(e,t,n){(function(t){"use strict";function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,i):"string"==typeof t?fromString(e,t,n):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,i){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof i?createBuffer(e,t).fill(n,i):createBuffer(e,t).fill(n):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromString(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(t,n);e=createBuffer(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function fromArrayBuffer(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(Buffer.isBuffer(t)){var n=0|checked(t.length);return e=createBuffer(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){
if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&s(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function swap(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function bidirectionalIndexOf(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,i)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,i,r);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,i,r){function read(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,o=e.length,a=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,o/=2,a/=2,n/=2}var c;if(r){var u=-1;for(c=n;c<o;c++)if(read(e,c)===read(t,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===a)return u*s}else-1!==u&&(c-=c-u),u=-1}else for(n+a>o&&(n=o-a),c=n;c>=0;c--){for(var l=!0,d=0;d<a;d++)if(read(e,c+d)!==read(t,d)){l=!1;break}if(l)return c}return-1}function hexWrite(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function utf8Write(e,t,n,i){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,i)}function asciiWrite(e,t,n,i){return blitBuffer(asciiToBytes(t),e,n,i)}function latin1Write(e,t,n,i){return asciiWrite(e,t,n,i)}function base64Write(e,t,n,i){return blitBuffer(base64ToBytes(t),e,n,i)}function ucs2Write(e,t,n,i){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,i)}function base64Slice(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var s=e[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a<=n){var c,u,l,d;switch(a){case 1:s<128&&(o=s);break;case 2:c=e[r+1],128==(192&c)&&(d=(31&s)<<6|63&c)>127&&(o=d);break;case 3:c=e[r+1],u=e[r+2],128==(192&c)&&128==(192&u)&&(d=(15&s)<<12|(63&c)<<6|63&u)>2047&&(d<55296||d>57343)&&(o=d);break;case 4:c=e[r+1],u=e[r+2],l=e[r+3],128==(192&c)&&128==(192&u)&&128==(192&l)&&(d=(15&s)<<18|(63&c)<<12|(63&u)<<6|63&l)>65535&&d<1114112&&(o=d)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=a}return decodeCodePointsArray(i)}function decodeCodePointsArray(e){var t=e.length;if(t<=o)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=o));return n}function asciiSlice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function latin1Slice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function hexSlice(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=t;s<n;++s)r+=toHex(e[s]);return r}function utf16leSlice(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,i,r,s){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function objectWriteUInt32(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);r<s;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function checkIEEE754(e,t,n,i,r,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,i,s){return s||checkIEEE754(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),r.write(e,t,n,i,23,4),n+4}function writeDouble(e,t,n,i,s){return s||checkIEEE754(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),r.write(e,t,n,i,52,8),n+8}function base64clean(e){if(e=stringtrim(e).replace(a,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var n,i=e.length,r=null,s=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function utf16leToBytes(e,t){for(var n,i,r,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}function base64ToBytes(e){return i.toByteArray(base64clean(e))}function blitBuffer(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function isnan(e){return e!==e}var i=e("base64-js"),r=e("ieee754"),s=e("isarray");n.Buffer=Buffer,n.SlowBuffer=SlowBuffer,n.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,n){return from(null,e,t,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,n){return alloc(null,e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,s=Math.min(n,i);r<s;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=Buffer.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!Buffer.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,n,i,r){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var s=r-i,o=n-t,a=Math.min(s,o),c=this.slice(i,r),u=e.slice(t,n),l=0;l<a;++l)if(c[l]!==u[l]){s=c[l],o=u[l];break}return s<o?-1:o<s?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var o=4096;Buffer.prototype.slice=function slice(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=Buffer.prototype;else{var r=t-e;i=new Buffer(r,void 0);for(var s=0;s<r;++s)i[s]=this[s+e]}return i},Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=this[e],r=1,s=0;++s<t&&(r*=256);)i+=this[e+s]*r;return i},Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=this[e],r=1,s=0;++s<t&&(r*=256);)i+=this[e+s]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=t,r=1,s=this[e+--i];i>0&&(r*=256);)s+=this[e+--i]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),r.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),r.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),r.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),r.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,i){if(e=+e,t|=0,n|=0,!i){checkInt(this,e,t,n,Math.pow(2,8*n)-1,0)}var r=1,s=0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=e/r&255;return t+n},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,i){if(e=+e,t|=0,n|=0,!i){checkInt(this,e,t,n,Math.pow(2,8*n)-1,0)}var r=n-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+n},Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,s=i-n;if(this===e&&n<t&&t<i)for(r=s-1;r>=0;--r)e[r+t]=this[r+n];else if(s<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},Buffer.prototype.fill=function fill(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,i).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var a=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":"/home/michel/stanza.io/node_modules/base64-js/index.js",ieee754:"/home/michel/stanza.io/node_modules/ieee754/index.js",isarray:"/home/michel/stanza.io/node_modules/buffer/node_modules/isarray/index.js"}],"/home/michel/stanza.io/node_modules/buffer/node_modules/isarray/index.js":[function(e,t,n){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],"/home/michel/stanza.io/node_modules/cipher-base/index.js":[function(e,t,n){function CipherBase(e){r.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var i=e("safe-buffer").Buffer,r=e("stream").Transform,s=e("string_decoder").StringDecoder;e("inherits")(CipherBase,r),CipherBase.prototype.update=function(e,t,n){"string"==typeof e&&(e=i.from(e,t));var r=this._update(e);return this.hashMode?this:(n&&(r=this._toString(r,n)),r)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(e,t,n){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){i=e}finally{n(i)}},CipherBase.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},CipherBase.prototype._finalOrDigest=function(e){var t=this.__final()||i.alloc(0);return e&&(t=this._toString(t,e,!0)),t},CipherBase.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new s(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return n&&(i+=this._decoder.end()),i},t.exports=CipherBase},{inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js",stream:"/home/michel/stanza.io/node_modules/stream-browserify/index.js",string_decoder:"/home/michel/stanza.io/node_modules/string_decoder/index.js"}],"/home/michel/stanza.io/node_modules/core-js/library/fn/object/assign.js":[function(e,t,n){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.core.js","../../modules/es6.object.assign":"/home/michel/stanza.io/node_modules/core-js/library/modules/es6.object.assign.js"}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.a-function.js":[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.cof.js":[function(e,t,n){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.core.js":[function(e,t,n){var i=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.ctx.js":[function(e,t,n){var i=e("./$.a-function");t.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.a-function.js"}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.defined.js":[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.export.js":[function(e,t,n){var i=e("./$.global"),r=e("./$.core"),s=e("./$.ctx"),o=function(e,t,n){var a,c,u,l=e&o.F,d=e&o.G,f=e&o.S,h=e&o.P,m=e&o.B,p=e&o.W,b=d?r:r[t]||(r[t]={}),g=d?i:f?i[t]:(i[t]||{}).prototype;d&&(n=t);for(a in n)(c=!l&&g&&a in g)&&a in b||(u=c?g[a]:n[a],b[a]=d&&"function"!=typeof g[a]?n[a]:m&&c?s(u,i):p&&g[a]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(u):h&&"function"==typeof u?s(Function.call,u):u,h&&((b.prototype||(b.prototype={}))[a]=u))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},{"./$.core":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.core.js","./$.ctx":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.ctx.js","./$.global":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.global.js"}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.fails.js":[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.global.js":[function(e,t,n){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.iobject.js":[function(e,t,n){var i=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./$.cof":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.cof.js"}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.js":[function(e,t,n){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},{}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.object-assign.js":[function(e,t,n){var i=e("./$"),r=e("./$.to-object"),s=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=r})?function assign(e,t){for(var n=r(e),o=arguments,a=o.length,c=1,u=i.getKeys,l=i.getSymbols,d=i.isEnum;a>c;)for(var f,h=s(o[c++]),m=l?u(h).concat(l(h)):u(h),p=m.length,b=0;p>b;)d.call(h,f=m[b++])&&(n[f]=h[f]);return n}:Object.assign},{"./$":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.js","./$.fails":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.fails.js","./$.iobject":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.iobject.js","./$.to-object":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.to-object.js"}],"/home/michel/stanza.io/node_modules/core-js/library/modules/$.to-object.js":[function(e,t,n){var i=e("./$.defined");t.exports=function(e){return Object(i(e))}},{"./$.defined":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.defined.js"}],"/home/michel/stanza.io/node_modules/core-js/library/modules/es6.object.assign.js":[function(e,t,n){var i=e("./$.export");i(i.S+i.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.export.js","./$.object-assign":"/home/michel/stanza.io/node_modules/core-js/library/modules/$.object-assign.js"}],"/home/michel/stanza.io/node_modules/core-util-is/lib/util.js":[function(e,t,n){(function(e){function isArray(e){return Array.isArray?Array.isArray(e):"[object Array]"===objectToString(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return"[object Date]"===objectToString(e)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}n.isArray=isArray,n.isBoolean=isBoolean,n.isNull=isNull,n.isNullOrUndefined=isNullOrUndefined,n.isNumber=isNumber,n.isString=isString,n.isSymbol=isSymbol,n.isUndefined=isUndefined,n.isRegExp=isRegExp,n.isObject=isObject,n.isDate=isDate,n.isError=isError,n.isFunction=isFunction,n.isPrimitive=isPrimitive,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":"/home/michel/stanza.io/node_modules/is-buffer/index.js"}],"/home/michel/stanza.io/node_modules/create-hash/browser.js":[function(e,t,n){(function(n){"use strict";function HashNoConstructor(e){a.call(this,"digest"),this._hash=e,this.buffers=[]}function Hash(e){a.call(this,"digest"),this._hash=e}var i=e("inherits"),r=e("./md5"),s=e("ripemd160"),o=e("sha.js"),a=e("cipher-base");i(HashNoConstructor,a),HashNoConstructor.prototype._update=function(e){this.buffers.push(e)},HashNoConstructor.prototype._final=function(){var e=n.concat(this.buffers),t=this._hash(e);return this.buffers=null,t},i(Hash,a),Hash.prototype._update=function(e){this._hash.update(e)},Hash.prototype._final=function(){return this._hash.digest()},t.exports=function createHash(e){return e=e.toLowerCase(),"md5"===e?new HashNoConstructor(r):new Hash("rmd160"===e||"ripemd160"===e?new s:o(e))}}).call(this,e("buffer").Buffer)},{"./md5":"/home/michel/stanza.io/node_modules/create-hash/md5.js",buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","cipher-base":"/home/michel/stanza.io/node_modules/cipher-base/index.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js",ripemd160:"/home/michel/stanza.io/node_modules/ripemd160/index.js","sha.js":"/home/michel/stanza.io/node_modules/sha.js/index.js"}],"/home/michel/stanza.io/node_modules/create-hash/make-hash.js":[function(e,t,n){(function(e){"use strict";function toArray(t){if(t.length%n!=0){var r=t.length+(n-t.length%n);t=e.concat([t,i],r)}for(var s=new Array(t.length>>>2),o=0,a=0;o<t.length;o+=n,a++)s[a]=t.readInt32LE(o);return s}var n=4,i=new e(n);i.fill(0);t.exports=function hash(t,n){var i=n(toArray(t),8*t.length);t=new e(16);for(var r=0;r<i.length;r++)t.writeInt32LE(i[r],r<<2,!0);return t}}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js"}],"/home/michel/stanza.io/node_modules/create-hash/md5.js":[function(e,t,n){"use strict";function core_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,s=271733878,o=0;o<e.length;o+=16){var a=n,c=i,u=r,l=s;n=md5_ff(n,i,r,s,e[o+0],7,-680876936),s=md5_ff(s,n,i,r,e[o+1],12,-389564586),r=md5_ff(r,s,n,i,e[o+2],17,606105819),i=md5_ff(i,r,s,n,e[o+3],22,-1044525330),n=md5_ff(n,i,r,s,e[o+4],7,-176418897),s=md5_ff(s,n,i,r,e[o+5],12,1200080426),r=md5_ff(r,s,n,i,e[o+6],17,-1473231341),i=md5_ff(i,r,s,n,e[o+7],22,-45705983),n=md5_ff(n,i,r,s,e[o+8],7,1770035416),s=md5_ff(s,n,i,r,e[o+9],12,-1958414417),r=md5_ff(r,s,n,i,e[o+10],17,-42063),i=md5_ff(i,r,s,n,e[o+11],22,-1990404162),n=md5_ff(n,i,r,s,e[o+12],7,1804603682),s=md5_ff(s,n,i,r,e[o+13],12,-40341101),
r=md5_ff(r,s,n,i,e[o+14],17,-1502002290),i=md5_ff(i,r,s,n,e[o+15],22,1236535329),n=md5_gg(n,i,r,s,e[o+1],5,-165796510),s=md5_gg(s,n,i,r,e[o+6],9,-1069501632),r=md5_gg(r,s,n,i,e[o+11],14,643717713),i=md5_gg(i,r,s,n,e[o+0],20,-373897302),n=md5_gg(n,i,r,s,e[o+5],5,-701558691),s=md5_gg(s,n,i,r,e[o+10],9,38016083),r=md5_gg(r,s,n,i,e[o+15],14,-660478335),i=md5_gg(i,r,s,n,e[o+4],20,-405537848),n=md5_gg(n,i,r,s,e[o+9],5,568446438),s=md5_gg(s,n,i,r,e[o+14],9,-1019803690),r=md5_gg(r,s,n,i,e[o+3],14,-187363961),i=md5_gg(i,r,s,n,e[o+8],20,1163531501),n=md5_gg(n,i,r,s,e[o+13],5,-1444681467),s=md5_gg(s,n,i,r,e[o+2],9,-51403784),r=md5_gg(r,s,n,i,e[o+7],14,1735328473),i=md5_gg(i,r,s,n,e[o+12],20,-1926607734),n=md5_hh(n,i,r,s,e[o+5],4,-378558),s=md5_hh(s,n,i,r,e[o+8],11,-2022574463),r=md5_hh(r,s,n,i,e[o+11],16,1839030562),i=md5_hh(i,r,s,n,e[o+14],23,-35309556),n=md5_hh(n,i,r,s,e[o+1],4,-1530992060),s=md5_hh(s,n,i,r,e[o+4],11,1272893353),r=md5_hh(r,s,n,i,e[o+7],16,-155497632),i=md5_hh(i,r,s,n,e[o+10],23,-1094730640),n=md5_hh(n,i,r,s,e[o+13],4,681279174),s=md5_hh(s,n,i,r,e[o+0],11,-358537222),r=md5_hh(r,s,n,i,e[o+3],16,-722521979),i=md5_hh(i,r,s,n,e[o+6],23,76029189),n=md5_hh(n,i,r,s,e[o+9],4,-640364487),s=md5_hh(s,n,i,r,e[o+12],11,-421815835),r=md5_hh(r,s,n,i,e[o+15],16,530742520),i=md5_hh(i,r,s,n,e[o+2],23,-995338651),n=md5_ii(n,i,r,s,e[o+0],6,-198630844),s=md5_ii(s,n,i,r,e[o+7],10,1126891415),r=md5_ii(r,s,n,i,e[o+14],15,-1416354905),i=md5_ii(i,r,s,n,e[o+5],21,-57434055),n=md5_ii(n,i,r,s,e[o+12],6,1700485571),s=md5_ii(s,n,i,r,e[o+3],10,-1894986606),r=md5_ii(r,s,n,i,e[o+10],15,-1051523),i=md5_ii(i,r,s,n,e[o+1],21,-2054922799),n=md5_ii(n,i,r,s,e[o+8],6,1873313359),s=md5_ii(s,n,i,r,e[o+15],10,-30611744),r=md5_ii(r,s,n,i,e[o+6],15,-1560198380),i=md5_ii(i,r,s,n,e[o+13],21,1309151649),n=md5_ii(n,i,r,s,e[o+4],6,-145523070),s=md5_ii(s,n,i,r,e[o+11],10,-1120210379),r=md5_ii(r,s,n,i,e[o+2],15,718787259),i=md5_ii(i,r,s,n,e[o+9],21,-343485551),n=safe_add(n,a),i=safe_add(i,c),r=safe_add(r,u),s=safe_add(s,l)}return[n,i,r,s]}function md5_cmn(e,t,n,i,r,s){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(i,s)),r),n)}function md5_ff(e,t,n,i,r,s,o){return md5_cmn(t&n|~t&i,e,t,r,s,o)}function md5_gg(e,t,n,i,r,s,o){return md5_cmn(t&i|n&~i,e,t,r,s,o)}function md5_hh(e,t,n,i,r,s,o){return md5_cmn(t^n^i,e,t,r,s,o)}function md5_ii(e,t,n,i,r,s,o){return md5_cmn(n^(t|~i),e,t,r,s,o)}function safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function bit_rol(e,t){return e<<t|e>>>32-t}var i=e("./make-hash");t.exports=function md5(e){return i(e,core_md5)}},{"./make-hash":"/home/michel/stanza.io/node_modules/create-hash/make-hash.js"}],"/home/michel/stanza.io/node_modules/create-hmac/browser.js":[function(e,t,n){"use strict";function Hmac(e,t){s.call(this,"digest"),"string"==typeof t&&(t=o.from(t));var n="sha512"===e||"sha384"===e?128:64;if(this._alg=e,this._key=t,t.length>n){t=("rmd160"===e?new c:u(e)).update(t).digest()}else t.length<n&&(t=o.concat([t,l],n));for(var i=this._ipad=o.allocUnsafe(n),r=this._opad=o.allocUnsafe(n),a=0;a<n;a++)i[a]=54^t[a],r[a]=92^t[a];this._hash="rmd160"===e?new c:u(e),this._hash.update(i)}var i=e("inherits"),r=e("./legacy"),s=e("cipher-base"),o=e("safe-buffer").Buffer,a=e("create-hash/md5"),c=e("ripemd160"),u=e("sha.js"),l=o.alloc(128);i(Hmac,s),Hmac.prototype._update=function(e){this._hash.update(e)},Hmac.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:u(this._alg)).update(this._opad).update(e).digest()},t.exports=function createHmac(e,t){return e=e.toLowerCase(),"rmd160"===e||"ripemd160"===e?new Hmac("rmd160",t):"md5"===e?new r(a,t):new Hmac(e,t)}},{"./legacy":"/home/michel/stanza.io/node_modules/create-hmac/legacy.js","cipher-base":"/home/michel/stanza.io/node_modules/cipher-base/index.js","create-hash/md5":"/home/michel/stanza.io/node_modules/create-hash/md5.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js",ripemd160:"/home/michel/stanza.io/node_modules/ripemd160/index.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js","sha.js":"/home/michel/stanza.io/node_modules/sha.js/index.js"}],"/home/michel/stanza.io/node_modules/create-hmac/legacy.js":[function(e,t,n){"use strict";function Hmac(e,t){s.call(this,"digest"),"string"==typeof t&&(t=r.from(t)),this._alg=e,this._key=t,t.length>a?t=e(t):t.length<a&&(t=r.concat([t,o],a));for(var n=this._ipad=r.allocUnsafe(a),i=this._opad=r.allocUnsafe(a),c=0;c<a;c++)n[c]=54^t[c],i[c]=92^t[c];this._hash=[n]}var i=e("inherits"),r=e("safe-buffer").Buffer,s=e("cipher-base"),o=r.alloc(128),a=64;i(Hmac,s),Hmac.prototype._update=function(e){this._hash.push(e)},Hmac.prototype._final=function(){var e=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,e]))},t.exports=Hmac},{"cipher-base":"/home/michel/stanza.io/node_modules/cipher-base/index.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/events/events.js":[function(e,t,n){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}t.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,i,r,s,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var a=new Error('Uncaught, unspecified "error" event. ('+t+")");throw a.context=t,a}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(isObject(n))for(r=Array.prototype.slice.call(arguments,1),o=n.slice(),i=o.length,s=0;s<i;s++)o[s].apply(this,r);return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function g(){this.removeListener(e,g),n||(n=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return g.listener=t,this.on(e,g),this},EventEmitter.prototype.removeListener=function(e,t){var n,i,r,s;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],r=n.length,i=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(s=r;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)}},{}],"/home/michel/stanza.io/node_modules/extend-object/extend-object.js":[function(e,t,n){var i=[],r=i.forEach,s=i.slice;t.exports=function(e){return r.call(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e}},{}],"/home/michel/stanza.io/node_modules/filetransfer/filetransfer.js":[function(e,t,n){function Sender(e){i.call(this);var t=e||{};this.config={chunksize:16384,pacing:0};var n;for(n in t)this.config[n]=t[n];this.file=null,this.channel=null}function Receiver(){i.call(this),this.receiveBuffer=[],this.received=0,this.metadata={},this.channel=null}var i=e("wildemitter"),r=e("util");r.inherits(Sender,i),Sender.prototype.send=function(e,t){var n=this;this.file=e,this.channel=t;var i="number"!=typeof t.bufferedAmountLowThreshold,r=0,s=function(){var o=new window.FileReader;o.onload=function(){return function(o){n.channel.send(o.target.result),n.emit("progress",r,e.size,o.target.result),e.size>r+o.target.result.byteLength?i?window.setTimeout(s,n.config.pacing):t.bufferedAmount<=t.bufferedAmountLowThreshold&&window.setTimeout(s,0):(n.emit("progress",e.size,e.size,null),n.emit("sentFile")),r+=n.config.chunksize}}();var a=e.slice(r,r+n.config.chunksize);o.readAsArrayBuffer(a)};i||(t.bufferedAmountLowThreshold=8*this.config.chunksize,t.addEventListener("bufferedamountlow",s)),window.setTimeout(s,0)},r.inherits(Receiver,i),Receiver.prototype.receive=function(e,t){var n=this;e&&(this.metadata=e),this.channel=t,t.binaryType="arraybuffer",this.channel.onmessage=function(e){var t=e.data.byteLength;n.received+=t,n.receiveBuffer.push(e.data),n.emit("progress",n.received,n.metadata.size,e.data),n.received===n.metadata.size?(n.emit("receivedFile",new window.Blob(n.receiveBuffer),n.metadata),n.receiveBuffer=[]):n.received>n.metadata.size&&(console.error("received more than expected, discarding..."),n.receiveBuffer=[])}},t.exports={},t.exports.support="undefined"!=typeof window&&window&&window.File&&window.FileReader&&window.Blob,t.exports.Sender=Sender,t.exports.Receiver=Receiver},{util:"/home/michel/stanza.io/node_modules/util/util.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/node_modules/filetransfer/hashed.js":[function(e,t,n){function Sender(e){i.call(this);var t=this;this.base=new o.Sender(e);var n=e||{};n.hash||(n.hash="sha-1"),this.hash=s.createHash(n.hash),this.base.on("progress",function(e,n,i){t.emit("progress",e,n,i),i&&t.hash.update(new Uint8Array(i))}),this.base.on("sentFile",function(){t.emit("sentFile",{hash:t.hash.digest("hex"),algo:n.hash})})}function Receiver(e){i.call(this);var t=this;this.base=new o.Receiver(e);var n=e||{};n.hash||(n.hash="sha-1"),this.hash=s.createHash(n.hash),this.base.on("progress",function(e,n,i){t.emit("progress",e,n,i),i&&t.hash.update(new Uint8Array(i))}),this.base.on("receivedFile",function(e,n){n.actualhash=t.hash.digest("hex"),t.emit("receivedFile",e,n)})}var i=e("wildemitter"),r=e("util"),s=e("iana-hashes"),o=e("./filetransfer");r.inherits(Sender,i),Sender.prototype.send=function(){this.base.send.apply(this.base,arguments)},r.inherits(Receiver,i),Receiver.prototype.receive=function(){this.base.receive.apply(this.base,arguments)},Object.defineProperty(Receiver.prototype,"metadata",{get:function(){return this.base.metadata},set:function(e){this.base.metadata=e}}),t.exports={},t.exports.support=o.support,t.exports.Sender=Sender,t.exports.Receiver=Receiver},{"./filetransfer":"/home/michel/stanza.io/node_modules/filetransfer/filetransfer.js","iana-hashes":"/home/michel/stanza.io/node_modules/iana-hashes/index.js",util:"/home/michel/stanza.io/node_modules/util/util.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/node_modules/for-each/index.js":[function(e,t,n){function forEach(e,t,n){if(!i(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===r.call(e)?forEachArray(e,t,n):"string"==typeof e?forEachString(e,t,n):forEachObject(e,t,n)}function forEachArray(e,t,n){for(var i=0,r=e.length;i<r;i++)s.call(e,i)&&t.call(n,e[i],i,e)}function forEachString(e,t,n){for(var i=0,r=e.length;i<r;i++)t.call(n,e.charAt(i),i,e)}function forEachObject(e,t,n){for(var i in e)s.call(e,i)&&t.call(n,e[i],i,e)}var i=e("is-function");t.exports=forEach;var r=Object.prototype.toString,s=Object.prototype.hasOwnProperty},{"is-function":"/home/michel/stanza.io/node_modules/is-function/index.js"}],"/home/michel/stanza.io/node_modules/global/window.js":[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/michel/stanza.io/node_modules/hash-base/index.js":[function(e,t,n){(function(n){"use strict";function HashBase(e){i.call(this),this._block=new n(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var i=e("stream").Transform;e("inherits")(HashBase,i),HashBase.prototype._transform=function(e,t,i){var r=null;try{"buffer"!==t&&(e=new n(e,t)),this.update(e)}catch(e){r=e}i(r)},HashBase.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(e){t=e}e(t)},HashBase.prototype.update=function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=new n(e,t||"binary"));for(var i=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)i[s++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)i[this._blockOffset++]=e[r++];for(var o=0,a=8*e.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},HashBase.prototype._update=function(e){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=HashBase}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js",stream:"/home/michel/stanza.io/node_modules/stream-browserify/index.js"}],"/home/michel/stanza.io/node_modules/hostmeta/index.js":[function(e,t,n){"use strict";var i=e("async"),r=e("request"),s=e("jxt").createRegistry();s.use(e("./lib/xrd")),t.exports=function(e,t){"string"==typeof e&&(e={host:e});var n={ssl:!0,json:!0,xrd:!0};for(var o in e)n[o]=e[o];var a=n.ssl?"https://":"http://";i.parallel([function(e){r(a+n.host+"/.well-known/host-meta.json",function(t,n,i){if(t)return e(null);var r;try{r=JSON.parse(i)}catch(e){r=null}return e(r)})},function(e){r(a+n.host+"/.well-known/host-meta",function(t,n,i){if(t)return e(null);var r=s.parse(i);return e(r.toJSON())})}],function(e){e?t(null,e):t("no-host-meta")})}},{"./lib/xrd":"/home/michel/stanza.io/node_modules/hostmeta/lib/xrd.js",async:"/home/michel/stanza.io/node_modules/async/dist/async.js",jxt:"/home/michel/stanza.io/node_modules/jxt/index.js",request:"/home/michel/stanza.io/node_modules/xhr/index.js"}],"/home/michel/stanza.io/node_modules/hostmeta/lib/xrd.js":[function(e,t,n){"use strict";var i=e("jxt"),r="http://docs.oasis-open.org/ns/xri/xrd-1.0";t.exports=function(e){var t={get:function(){for(var e={},t=i.find(this.xml,r,"Property"),n=0,s=t.length;n<s;n++){var o=t[n];e[i.getAttribute(o,"type")]=o.textContent}return e}},n=e.define({name:"xrd",namespace:r,element:"XRD",fields:{subject:i.subText(r,"Subject"),expires:i.dateSub(r,"Expires"),aliases:i.multiSubText(r,"Alias"),properties:t}}),s=e.define({name:"_xrdlink",namespace:r,element:"Link",fields:{rel:i.attribute("rel"),href:i.attribute("href"),type:i.attribute("type"),template:i.attribute("template"),titles:i.subLangText(r,"Title","default"),properties:t}});return e.extend(n,s,"links"),n}},{jxt:"/home/michel/stanza.io/node_modules/jxt/index.js"}],"/home/michel/stanza.io/node_modules/iana-hashes/index.js":[function(e,t,n){var i=e("create-hash"),r=e("create-hmac"),s=e("./lib/get-hashes"),o={md2:"md2",md5:"md5","sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512"},a=Object.keys(o);n.getHashes=function(){for(var e=[],t=s(),n=0,i=a.length;n<i;n++)t.indexOf(o[a[n]])>=0&&e.push(a[n]);return e},n.createHash=function(e){return e=e.toLowerCase(),o[e]&&(e=o[e]),i(e)},n.createHmac=function(e,t){return e=e.toLowerCase(),o[e]&&(e=o[e]),r(e,t)}},{"./lib/get-hashes":"/home/michel/stanza.io/node_modules/iana-hashes/lib/get-hashes-browser.js","create-hash":"/home/michel/stanza.io/node_modules/create-hash/browser.js","create-hmac":"/home/michel/stanza.io/node_modules/create-hmac/browser.js"}],"/home/michel/stanza.io/node_modules/iana-hashes/lib/get-hashes-browser.js":[function(e,t,n){t.exports=function(){return["sha1","sha224","sha256","sha384","sha512","md5","rmd160"]}},{}],"/home/michel/stanza.io/node_modules/ieee754/index.js":[function(e,t,n){n.read=function(e,t,n,i,r){var s,o,a=8*r-i-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?r-1:0,f=n?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=256*s+e[t+d],d+=f,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=256*o+e[t+d],d+=f,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),s-=u}return(h?-1:1)*o*Math.pow(2,s-i)},n.write=function(e,t,n,i,r,s){var o,a,c,u=8*s-r-1,l=(1<<u)-1,d=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:s-1,m=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),t+=o+d>=1?f/c:f*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*c-1)*Math.pow(2,r),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&a,h+=m,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;e[n+h]=255&o,h+=m,o/=256,u-=8);e[n+h-m]|=128*p}},{}],"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js":[function(e,t,n){"function"==typeof Object.create?t.exports=function inherits(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function inherits(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],"/home/michel/stanza.io/node_modules/intersect/index.js":[function(e,t,n){function intersect(e,t){for(var n=[],i=0;i<e.length;i++)indexOf(t,e[i])>-1&&n.push(e[i]);return n}function indexOf(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}t.exports=intersect,intersect.big=function(e,t){for(var n=[],i={},r=0;r<t.length;r++)i[t[r]]=!0;for(var r=0;r<e.length;r++)i[e[r]]&&n.push(e[r]);return n}},{}],"/home/michel/stanza.io/node_modules/is-buffer/index.js":[function(e,t,n){function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}t.exports=function(e){return null!=e&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)}},{}],"/home/michel/stanza.io/node_modules/is-function/index.js":[function(e,t,n){function isFunction(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=isFunction;var i=Object.prototype.toString},{}],"/home/michel/stanza.io/node_modules/jingle-filetransfer-session/index.js":[function(e,t,n){function FileTransferSession(e){s.call(this,e),this.pc=new o({iceServers:e.iceServers||[],useJingle:!0},e.constraints||{}),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("iceConnectionStateChange",this.onIceStateChange.bind(this)),this.pc.on("addChannel",this.onChannelAdded.bind(this)),this.sender=null,this.receiver=null}var i=e("util"),r=e("extend-object"),s=e("jingle-session"),o=e("rtcpeerconnection"),a=e("filetransfer/hashed");i.inherits(FileTransferSession,s),FileTransferSession.prototype=r(FileTransferSession.prototype,{start:function(e){var t=this;this.state="pending",this.pc.isInitiator=!0,this.sender=new a.Sender,this.sender.on("progress",function(e,n){t._log("info","Send progress "+e+"/"+n)}),this.sender.on("sentFile",function(e){t._log("info","Sent file",e.name);var n=t.pc.localDescription.contents[0];delete n.transport,n.application={applicationType:"filetransfer",offer:{hash:{algo:e.algo,value:e.hash}}},t.send("description-info",{contents:[n]}),t.emit("sentFile",t,e)});var n=this.pc.createDataChannel("filetransfer");n.onopen=function(){t.sender.send(e,n)};var i={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this.pc.offer(i,function(n,i){if(n)return t._log("error","Could not create WebRTC offer",n),t.end("failed-application",!0);i.jingle.contents[0].application={applicationType:"filetransfer",offer:{date:e.lastModifiedDate,name:e.name,size:e.size,hash:{algo:"sha-1",value:""}}},t.send("session-initiate",i.jingle)})},accept:function(){var e=this;this._log("info","Accepted incoming session"),this.state="active",this.pc.answer(function(t,n){if(t)return e._log("error","Could not create WebRTC answer",t),e.end("failed-application");e.send("session-accept",n.jingle)})},end:function(e,t){this.pc.close(),s.prototype.end.call(this,e,t)},maybeReceivedFile:function(){this.receiver.metadata.hash.value&&(this.receiver.metadata.hash.value===this.receiver.metadata.actualhash?(this._log("info","File hash matches"),this.emit("receivedFile",this,this.receivedFile,this.receiver.metadata),this.end("success")):(this._log("error","File hash does not match"),this.end("media-error")))},onIceCandidate:function(e){this._log("info","Discovered new ICE candidate",e.jingle),this.send("transport-info",e.jingle)},onIceStateChange:function(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":"stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected";break;case"failed":this.connectionState="failed",this.end("failed-transport");break;case"closed":this.connectionState="disconnected"}},onChannelAdded:function(e){this.receiver.receive(null,e)},onSessionInitiate:function(e,t){var n=this;this._log("info","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1;var i=e.contents[0].application;this.receiver=new a.Receiver({hash:i.offer.hash.algo}),this.receiver.on("progress",function(e,t){n._log("info","Receive progress "+e+"/"+t)}),this.receiver.on("receivedFile",function(e){n.receivedFile=e,n.maybeReceivedFile()}),this.receiver.metadata=i.offer,e.contents[0].application={applicationType:"datachannel"},this.pc.handleOffer({type:"offer",jingle:e},function(e){if(e)return n._log("error","Could not create WebRTC answer"),t({condition:"general-error"});t()})},onSessionAccept:function(e,t){var n=this;this.state="active",e.contents[0].application={applicationType:"datachannel"},this.pc.handleAnswer({type:"answer",jingle:e},function(e){if(e)return n._log("error","Could not process WebRTC answer"),t({condition:"general-error"});n.emit("accepted",n),t()})},onSessionTerminate:function(e,t){this._log("info","Terminating session"),this.pc.close(),s.prototype.end.call(this,e.reason,!0),t()},onDescriptionInfo:function(e,t){var n=e.contents[0].application.offer.hash;this.receiver.metadata.hash=n,this.receiver.metadata.actualhash&&this.maybeReceivedFile(),t()},onTransportInfo:function(e,t){this.pc.processIce(e,function(){t()})}}),t.exports=FileTransferSession},{"extend-object":"/home/michel/stanza.io/node_modules/extend-object/extend-object.js","filetransfer/hashed":"/home/michel/stanza.io/node_modules/filetransfer/hashed.js","jingle-session":"/home/michel/stanza.io/node_modules/jingle-session/index.js",rtcpeerconnection:"/home/michel/stanza.io/node_modules/rtcpeerconnection/rtcpeerconnection.js",util:"/home/michel/stanza.io/node_modules/util/util.js"}],"/home/michel/stanza.io/node_modules/jingle-media-session/index.js":[function(e,t,n){function filterContentSources(e,t){"rtp"===e.application.applicationType&&(delete e.transport,delete e.application.payloads,delete e.application.headerExtensions,e.application.mux=!1,e.application.sources&&(e.application.sources=e.application.sources.filter(function(e){return!(e.parameters.length<2)&&t.id===e.parameters[1].value.split(" ")[0]})),e.application.sourceGroups&&(e.application.sourceGroups=e.application.sourceGroups.filter(function(t){for(var n=!1,i=0;i<e.application.sources.length;i++)if(e.application.sources[i].ssrc===t.sources[0]){n=!0;break}return n})))}function filterUnusedLabels(e){(e.application.sources||[]).forEach(function(e){e.parameters=e.parameters.filter(function(e){return!("mslabel"===e.key||"label"===e.key)})})}function MediaSession(e){s.call(this,e),this.pc=new o({iceServers:e.iceServers||[],useJingle:!0},e.constraints||{}),this.pc.on("ice",this.onIceCandidate.bind(this,e)),this.pc.on("endOfCandidates",this.onIceEndOfCandidates.bind(this,e)),this.pc.on("iceConnectionStateChange",this.onIceStateChange.bind(this)),this.pc.on("addStream",this.onAddStream.bind(this)),this.pc.on("removeStream",this.onRemoveStream.bind(this)),this.pc.on("addChannel",this.onAddChannel.bind(this)),e.stream&&this.addStream(e.stream),this._ringing=!1}var i=e("util"),r=e("extend-object"),s=e("jingle-session"),o=e("rtcpeerconnection");i.inherits(MediaSession,s),Object.defineProperties(MediaSession.prototype,{ringing:{get:function(){return this._ringing},set:function(e){e!==this._ringing&&(this._ringing=e,this.emit("change:ringing",e))}},streams:{get:function(){return"closed"!==this.pc.signalingState?this.pc.getRemoteStreams():[]}}}),MediaSession.prototype=r(MediaSession.prototype,{start:function(e,t){var n=this;this.state="pending",t=t||function(){},this.pc.isInitiator=!0,this.pc.offer(e,function(i,r){if(i)return n._log("error","Could not create WebRTC offer",i),n.end("failed-application",!0);e&&e.mandatory&&r.jingle.contents.forEach(function(t){var n=t.application.media;t.description&&"rtp"===t.application.applicationType&&(e.mandatory.OfferToReceiveAudio||"audio"!==n||(t.senders="initiator"),e.mandatory.OfferToReceiveVideo||"video"!==n||(t.senders="initiator"))}),r.jingle.contents.forEach(filterUnusedLabels),n.send("session-initiate",r.jingle),t()})},accept:function(e,t){var n=this;1===arguments.length&&"function"==typeof e&&(t=e,e={}),t=t||function(){},e=e||{},n.constraints=e.constraints||{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this._log("info","Accepted incoming session"),this.state="active",this.pc.answer(n.constraints,function(e,i){if(e)return n._log("error","Could not create WebRTC answer",e),n.end("failed-application");i.jingle.contents.forEach(filterUnusedLabels),n.send("session-accept",i.jingle),t()})},end:function(e,t){var n=this;this.streams.forEach(function(e){n.onRemoveStream({stream:e})}),this.pc.close(),s.prototype.end.call(this,e,t)},ring:function(){this._log("info","Ringing on incoming session"),this.ringing=!0,this.send("session-info",{ringing:!0})},mute:function(e,t){this._log("info","Muting",t),this.send("session-info",{mute:{creator:e,name:t}})},unmute:function(e,t){this._log("info","Unmuting",t),this.send("session-info",{unmute:{creator:e,name:t}})},hold:function(){this._log("info","Placing on hold"),this.send("session-info",{hold:!0})},resume:function(){this._log("info","Resuming from hold"),this.send("session-info",{active:!0})},addStream:function(e,t,n){var i=this;n=n||function(){},this.pc.addStream(e),t&&("object"==typeof t&&(i.constraints=t),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(t){if(t)return i._log("error","Could not create offer for adding new stream"),n(t);i.pc.answer(i.constraints,function(t,r){if(t)return i._log("error","Could not create answer for adding new stream"),n(t);r.jingle.contents.forEach(function(t){filterContentSources(t,e)}),r.jingle.contents=r.jingle.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete r.jingle.groups,i.send("source-add",r.jingle),n()})}))},addStream2:function(e,t){this.addStream(e,!0,t)},removeStream:function(e,t,n){var i=this;if(n=n||function(){},!t)return void this.pc.removeStream(e);"object"==typeof t&&(i.constraints=t);var r=this.pc.localDescription;r.contents.forEach(function(t){filterContentSources(t,e)}),r.contents=r.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete r.groups,this.send("source-remove",r),this.pc.removeStream(e),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){if(e)return i._log("error","Could not process offer for removing stream"),n(e);i.pc.answer(i.constraints,function(e){if(e)return i._log("error","Could not process answer for removing stream"),n(e);n()})})},removeStream2:function(e,t){this.removeStream(e,!0,t)},switchStream:function(e,t,n){var i=this;n=n||function(){};var r=this.pc.localDescription;r.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),this.pc.removeStream(e),this.send("source-remove",r),this.pc.addStream(t),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){if(e)return i._log("error","Could not process offer for switching streams"),n(e);i.pc.answer(i.constraints,function(e,t){if(e)return i._log("error","Could not process answer for switching streams"),n(e);t.jingle.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),i.send("source-add",t.jingle),n()})})},onIceCandidate:function(e,t){this._log("info","Discovered new ICE candidate",t.jingle),this.send("transport-info",t.jingle),e.signalEndOfCandidates&&(this.lastCandidate=t)},onIceEndOfCandidates:function(e){if(this._log("info","ICE end of candidates"),e.signalEndOfCandidates){var t=this.lastCandidate.jingle;t.contents[0].transport={transportType:t.contents[0].transport.transportType,gatheringComplete:!0},this.lastCandidate=null,this.send("transport-info",t)}},onIceStateChange:function(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":"stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected";break;case"failed":this.connectionState="failed",this.end("failed-transport");break;case"closed":this.connectionState="disconnected"}},onAddStream:function(e){this._log("info","Stream added"),this.emit("peerStreamAdded",this,e.stream)},
onRemoveStream:function(e){this._log("info","Stream removed"),this.emit("peerStreamRemoved",this,e.stream)},onSessionInitiate:function(e,t){var n=this;this._log("info","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1,this.pc.handleOffer({type:"offer",jingle:e},function(e){if(e)return n._log("error","Could not create WebRTC answer"),t({condition:"general-error"});t()})},onSessionAccept:function(e,t){var n=this;this.state="active",this.pc.handleAnswer({type:"answer",jingle:e},function(e){if(e)return n._log("error","Could not process WebRTC answer"),t({condition:"general-error"});n.emit("accepted",n),t()})},onSessionTerminate:function(e,t){var n=this;this._log("info","Terminating session"),this.streams.forEach(function(e){n.onRemoveStream({stream:e})}),this.pc.close(),s.prototype.end.call(this,e.reason,!0),t()},onSessionInfo:function(e,t){return e.ringing?(this._log("info","Outgoing session is ringing"),this.ringing=!0,this.emit("ringing",this),t()):e.hold?(this._log("info","On hold"),this.emit("hold",this),t()):e.active?(this._log("info","Resuming from hold"),this.emit("resumed",this),t()):e.mute?(this._log("info","Muting",e.mute),this.emit("mute",this,e.mute),t()):e.unmute?(this._log("info","Unmuting",e.unmute),this.emit("unmute",this,e.unmute),t()):void t()},onTransportInfo:function(e,t){this.pc.processIce(e,function(){t()})},onSourceAdd:function(e,t){var n=this;this._log("info","Adding new stream source");var i=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(t,n){var r=t.application,s=r.sources||[],o=r.sourceGroups||[];e.contents&&e.contents.forEach(function(e){if(t.name===e.name){var r=e.application,a=r.sources||[];s=s.concat(a),i.contents[n].application.sources=JSON.parse(JSON.stringify(s));var c=r.sourceGroups||[];o=o.concat(c),i.contents[n].application.sourceGroups=JSON.parse(JSON.stringify(o))}})}),this.pc.handleOffer({type:"offer",jingle:i},function(e){if(e)return n._log("error","Error adding new stream source"),t({condition:"general-error"});n.pc.answer(n.constraints,function(e){if(e)return n._log("error","Error adding new stream source"),t({condition:"general-error"});t()})})},onSourceRemove:function(e,t){var n=this;this._log("info","Removing stream source");var i=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(t,n){var r=t.application,s=r.sources||[],o=r.sourceGroups||[];e.contents.forEach(function(e){if(t.name===e.name){var r,a,c,u,l=e.application,d=l.sources||[],f=l.sourceGroups||[];for(a=0;a<d.length;a++){for(r=-1,c=0;c<s.length;c++)if(d[a].ssrc===s[c].ssrc){r=c;break}r>-1&&(s.splice(r,1),i.contents[n].application.sources=JSON.parse(JSON.stringify(s)))}for(a=0;a<f.length;a++){for(r=-1,c=0;c<o.length;c++)if(f[a].semantics===o[c].semantics&&f[a].sources.length===o[c].sources.length){var h=!0;for(u=0;u<f[a].sources.length;u++)if(f[a].sources[u]!==o[c].sources[u]){h=!1;break}if(h){r=c;break}}r>-1&&(o.splice(r,1),i.contents[n].application.sourceGroups=JSON.parse(JSON.stringify(o)))}}})}),this.pc.handleOffer({type:"offer",jingle:i},function(e){if(e)return n._log("error","Error removing stream source"),t({condition:"general-error"});n.pc.answer(n.constraints,function(e){if(e)return n._log("error","Error removing stream source"),t({condition:"general-error"});t()})})},onAddChannel:function(e){this.emit("addChannel",e)}}),t.exports=MediaSession},{"extend-object":"/home/michel/stanza.io/node_modules/extend-object/extend-object.js","jingle-session":"/home/michel/stanza.io/node_modules/jingle-session/index.js",rtcpeerconnection:"/home/michel/stanza.io/node_modules/rtcpeerconnection/rtcpeerconnection.js",util:"/home/michel/stanza.io/node_modules/util/util.js"}],"/home/michel/stanza.io/node_modules/jingle-session/index.js":[function(e,t,n){function JingleSession(e){a.call(this);var t=this;this.sid=e.sid||r.v4(),this.peer=e.peer,this.peerID=e.peerID||this.peer.full||this.peer,this.isInitiator=e.initiator||!1,this.parent=e.parent,this.state="starting",this.connectionState="starting",this.pendingApplicationTypes=e.applicationTypes||[],this.pendingAction=!1,this.processingQueue=s.queue(function(e,n){if(t.ended)return n();var i=e.action,r=e.changes,s=e.cb;if(t._log("debug",i),!c[i])return t._log("error","Invalid action: "+i),s({condition:"bad-request"}),n();t[c[i]](r,function(e,t){return s(e,t),n()})})}var i=e("util"),r=e("uuid"),s=e("async"),o=e("extend-object"),a=e("wildemitter"),c={"content-accept":"onContentAccept","content-add":"onContentAdd","content-modify":"onContentModify","content-reject":"onContentReject","content-remove":"onContentRemove","description-info":"onDescriptionInfo","security-info":"onSecurityInfo","session-accept":"onSessionAccept","session-info":"onSessionInfo","session-initiate":"onSessionInitiate","session-terminate":"onSessionTerminate","transport-accept":"onTransportAccept","transport-info":"onTransportInfo","transport-reject":"onTransportReject","transport-replace":"onTransportReplace","source-add":"onSourceAdd","source-remove":"onSourceRemove"};i.inherits(JingleSession,a),Object.keys(c).forEach(function(e){var t=c[e];JingleSession.prototype[t]=function(t,n){this._log("error","Unsupported action: "+e),n()}}),Object.defineProperties(JingleSession.prototype,{state:{get:function(){return this._sessionState},set:function(e){if(e!==this._sessionState){var t=this._sessionState;this._log("info","Changing session state to: "+e),this._sessionState=e,this.emit("change:sessionState",this,e),this.emit("change:"+e,this,!0),t&&this.emit("change:"+t,this,!1)}}},connectionState:{get:function(){return this._connectionState},set:function(e){if(e!==this._connectionState){var t=this._connectionState;this._log("info","Changing connection state to: "+e),this._connectionState=e,this.emit("change:connectionState",this,e),this.emit("change:"+e,this,!0),t&&this.emit("change:"+t,this,!1)}}},starting:{get:function(){return"starting"===this._sessionState}},pending:{get:function(){return"pending"===this._sessionState}},active:{get:function(){return"active"===this._sessionState}},ended:{get:function(){return"ended"===this._sessionState}},connected:{get:function(){return"connected"===this._connectionState}},connecting:{get:function(){return"connecting"===this._connectionState}},disconnected:{get:function(){return"disconnected"===this._connectionState}},interrupted:{get:function(){return"interrupted"===this._connectionState}}}),JingleSession.prototype=o(JingleSession.prototype,{_log:function(e,t){t=this.sid+": "+t,this.emit("log:"+e,t)},send:function(e,t){t=t||{},t.sid=this.sid,t.action=e;var n={"session-inititate":!0,"session-accept":!0,"content-add":!0,"content-remove":!0,"content-reject":!0,"content-accept":!0,"content-modify":!0,"transport-replace":!0,"transport-reject":!0,"transport-accept":!0,"source-add":!0,"source-remove":!0};this.pendingAction=!!n[e]&&e,this.emit("send",{to:this.peer,id:r.v4(),type:"set",jingle:t})},process:function(e,t,n){this.processingQueue.push({action:e,changes:t,cb:n})},start:function(){this._log("error","Can not start base sessions"),this.end("unsupported-applications",!0)},accept:function(){this._log("error","Can not accept base sessions"),this.end("unsupported-applications")},cancel:function(){this.end("cancel")},decline:function(){this.end("decline")},end:function(e,t){this.state="ended",this.processingQueue.kill(),e||(e="success"),"string"==typeof e&&(e={condition:e}),t||this.send("session-terminate",{reason:e}),this.emit("terminated",this,e)},onSessionTerminate:function(e,t){this.end(e.reason,!0),t()},onSessionInfo:function(e,t){var n={sid:!0,action:!0,initiator:!0,responder:!0},i=!1;Object.keys(e).forEach(function(e){n[e]||(i=!0)}),i?t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"}):t()},onDescriptionInfo:function(e,t){t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onTransportInfo:function(e,t){t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onContentAdd:function(e,t){t(),this.send("content-reject",{reason:{condition:"failed-application",text:"content-add is not supported"}})},onTransportReplace:function(e,t){t(),this.send("transport-reject",{reason:{condition:"failed-application",text:"transport-replace is not supported"}})}}),t.exports=JingleSession},{async:"/home/michel/stanza.io/node_modules/async/dist/async.js","extend-object":"/home/michel/stanza.io/node_modules/extend-object/extend-object.js",util:"/home/michel/stanza.io/node_modules/util/util.js",uuid:"/home/michel/stanza.io/node_modules/uuid/index.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/node_modules/jingle/index.js":[function(e,t,n){function SessionManager(e){s.call(this),e=e||{},this.jid=e.jid,this.selfID=e.selfID||this.jid&&this.jid.full||this.jid||"",this.sessions={},this.peers={},this.prepareSession=e.prepareSession||function(e){return e.applicationTypes.indexOf("rtp")>=0?new a(e):e.applicationTypes.indexOf("filetransfer")>=0?new c(e):void 0},this.performTieBreak=e.performTieBreak||function(e,t){var n=t.jingle.contents.map(function(e){if(e.application)return e.application.applicationType});return r(e.pendingApplicationTypes,n).length>0},this.config={debug:!1,peerConnectionConfig:{iceServers:e.iceServers||[{urls:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!1}]},media:{audio:!0,video:!0}};for(var t in e)this.config[t]=e[t];this.iceServers=this.config.peerConnectionConfig.iceServers}var i=e("util"),r=e("intersect"),s=e("wildemitter"),o=e("jingle-session"),a=e("jingle-media-session"),c=e("jingle-filetransfer-session");i.inherits(SessionManager,s),SessionManager.prototype.addICEServer=function(e){"string"==typeof e&&(e={urls:e}),this.iceServers.push(e)},SessionManager.prototype.addSession=function(e){var t=this,n=e.sid,i=e.peerID;return this.sessions[n]=e,this.peers[i]||(this.peers[i]=[]),this.peers[i].push(e),e.on("terminated",function(){var r=t.peers[i]||[];r.length&&r.splice(r.indexOf(e),1),delete t.sessions[n]}),e.on("*",function(n,i,r,s){if("send"===n){var o=i.jingle&&i.jingle.action;e.isInitiator&&"session-initiate"===o&&t.emit("outgoing",e)}!t.config.debug||"log:debug"!==n&&"log:error"!==n||console.log("Jingle:",i,r,s),0!==n.indexOf("change")&&t.emit(n,i,r,s)}),this.emit("createdSession",e),e},SessionManager.prototype.createMediaSession=function(e,t,n){var i=new a({sid:t,peer:e,initiator:!0,stream:n,parent:this,iceServers:this.iceServers,constraints:this.config.peerConnectionConstraints});return this.addSession(i),i},SessionManager.prototype.createFileTransferSession=function(e,t){var n=new c({sid:t,peer:e,initiator:!0,parent:this,iceServers:this.iceServers});return this.addSession(n),n},SessionManager.prototype.endPeerSessions=function(e,t,n){e=e.full||e;var i=this.peers[e]||[];delete this.peers[e],i.forEach(function(e){e.end(t||"gone",n)})},SessionManager.prototype.endAllSessions=function(e,t){var n=this;Object.keys(this.peers).forEach(function(i){n.endPeerSessions(i,e,t)})},SessionManager.prototype._createIncomingSession=function(e,t){var n;return this.prepareSession&&(n=this.prepareSession(e,t)),n||(n=new o(e)),this.addSession(n),n},SessionManager.prototype._sendError=function(e,t,n){n.type||(n.type="cancel"),this.emit("send",{to:e,id:t,type:"error",error:n})},SessionManager.prototype._log=function(e,t){this.emit("log:"+e,t)},SessionManager.prototype.process=function(e){var t=this,n=e.jingle?e.jingle.sid:null,i=this.sessions[n]||null,r=e.id,s=e.from.full||e.from;if("error"===e.type){var o=e.error&&"tie-break"===e.error.jingleCondition;return i&&i.pending&&o?i.end("alternative-session",!0):(i&&(i.pendingAction=!1),this.emit("error",e))}if("result"===e.type)return void(i&&(i.pendingAction=!1));var a=e.jingle.action,c=e.jingle.contents||[],u=c.map(function(e){if(e.application)return e.application.applicationType}),l=c.map(function(e){if(e.transport)return e.transport.transportType});if("session-initiate"!==a){if(!i)return this._log("error","Unknown session",n),this._sendError(s,r,{condition:"item-not-found",jingleCondition:"unknown-session"});if(i.peerID!==s||i.ended)return this._log("error","Session has ended, or action has wrong sender"),this._sendError(s,r,{condition:"item-not-found",jingleCondition:"unknown-session"});if("session-accept"===a&&!i.pending)return this._log("error","Tried to accept session twice",n),this._sendError(s,r,{condition:"unexpected-request",jingleCondition:"out-of-order"});if("session-terminate"!==a&&a===i.pendingAction&&(this._log("error","Tie break during pending request"),i.isInitiator))return this._sendError(s,r,{condition:"conflict",jingleCondition:"tie-break"})}else if(i){if(i.peerID!==s)return this._log("error","Duplicate sid from new sender"),this._sendError(s,r,{condition:"service-unavailable"});if(!i.pending)return this._log("error","Someone is doing this wrong"),this._sendError(s,r,{condition:"unexpected-request",jingleCondition:"out-of-order"});if(this.selfID>i.peerID&&this.performTieBreak(i,e))return this._log("error","Tie break new session because of duplicate sids"),this._sendError(s,r,{condition:"conflict",jingleCondition:"tie-break"})}else if(this.peers[s]&&this.peers[s].length)for(var d=0,f=this.peers[s].length;d<f;d++){var h=this.peers[s][d];if(h&&h.pending&&h.sid>n&&this.performTieBreak(h,e))return this._log("info","Tie break session-initiate"),this._sendError(s,r,{condition:"conflict",jingleCondition:"tie-break"})}if("session-initiate"===a){if(!c.length)return t._sendError(s,r,{condition:"bad-request"});i=this._createIncomingSession({sid:n,peer:e.from,peerID:s,initiator:!1,parent:this,applicationTypes:u,transportTypes:l,iceServers:this.iceServers,constraints:this.config.peerConnectionConstraints},e)}i.process(a,e.jingle,function(n){n?(t._log("error","Could not process request",e,n),t._sendError(s,r,n)):(t.emit("send",{to:s,id:r,type:"result"}),"session-initiate"===a&&t.emit("incoming",i))})},t.exports=SessionManager},{intersect:"/home/michel/stanza.io/node_modules/intersect/index.js","jingle-filetransfer-session":"/home/michel/stanza.io/node_modules/jingle-filetransfer-session/index.js","jingle-media-session":"/home/michel/stanza.io/node_modules/jingle-media-session/index.js","jingle-session":"/home/michel/stanza.io/node_modules/jingle-session/index.js",util:"/home/michel/stanza.io/node_modules/util/util.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp-types/lib/index.js":[function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./shortcuts"),r=_interopRequireDefault(i),s=e("./types"),o=_interopRequireDefault(s);n.default=function(e){e.use(o.default),e.use(r.default)},t.exports=n.default},{"./shortcuts":"/home/michel/stanza.io/node_modules/jxt-xmpp-types/lib/shortcuts.js","./types":"/home/michel/stanza.io/node_modules/jxt-xmpp-types/lib/types.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp-types/lib/shortcuts.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r={client:i.Namespace.CLIENT,server:i.Namespace.SERVER,component:i.Namespace.COMPONENT};n.default=function(e){e.extendMessage=function(e,t){var n=this;this.withMessage(function(i){n.extend(i,e,t)})},e.extendPresence=function(e,t){var n=this;this.withPresence(function(i){n.extend(i,e,t)})},e.extendIQ=function(e,t){var n=this;this.withIQ(function(i){n.extend(i,e,t)})},e.extendStreamFeatures=function(e){var t=this;this.withStreamFeatures(function(n){t.extend(n,e)})},e.extendPubsubItem=function(e){var t=this;this.withPubsubItem(function(n){t.extend(n,e)})},e.withIQ=function(e){this.withDefinition("iq",i.Namespace.CLIENT,e),this.withDefinition("iq",i.Namespace.COMPONENT,e)},e.withMessage=function(e){this.withDefinition("message",i.Namespace.CLIENT,e),this.withDefinition("message",i.Namespace.COMPONENT,e)},e.withPresence=function(e){this.withDefinition("presence",i.Namespace.CLIENT,e),this.withDefinition("presence",i.Namespace.COMPONENT,e)},e.withStreamFeatures=function(e){this.withDefinition("features",i.Namespace.STREAM,e)},e.withStanzaError=function(e){this.withDefinition("error",i.Namespace.CLIENT,e),this.withDefinition("error",i.Namespace.COMPONENT,e)},e.withDataForm=function(e){this.withDefinition("x",i.Namespace.DATAFORM,e)},e.withPubsubItem=function(e){this.withDefinition("item",i.Namespace.PUBSUB,e),this.withDefinition("item",i.Namespace.PUBSUB_EVENT,e)},e.getMessage=function(){var e=void 0===arguments[0]?"client":arguments[0];return this.getDefinition("message",r[e])},e.getPresence=function(){var e=void 0===arguments[0]?"client":arguments[0];return this.getDefinition("presence",r[e])},e.getIQ=function(){var e=void 0===arguments[0]?"client":arguments[0];return this.getDefinition("iq",r[e])},e.getStreamError=function(){return this.getDefinition("error",i.Namespace.STREAM)},e.getIq=e.getIQ,e.withIq=e.withIQ},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp-types/lib/types.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-jid");n.default=function(e){var t=e.utils;t.jidAttribute=function(e,n){return{get:function get(){var r=new i.JID(t.getAttribute(this.xml,e));return n&&(r.prepped=!0),r},set:function set(n){t.setAttribute(this.xml,e,(n||"").toString())}}},t.jidSub=function(e,n,r){return{get:function get(){var s=new i.JID(t.getSubText(this.xml,e,n));return r&&(s.prepped=!0),s},set:function set(i){t.setSubText(this.xml,e,n,(i||"").toString())}}},t.tzoSub=t.field(function(e,n,i,r){var s=void 0,o=void 0,a=void 0,c=-1,u=t.getSubText(e,n,i);return u?("-"===u.charAt(0)&&(c=1,u=u.slice(1)),a=u.split(":"),s=parseInt(a[0],10),o=parseInt(a[1],10),(60*s+o)*c):r},function(e,n,i,r){var s=void 0,o=void 0,a="-";"number"==typeof r?(r<0&&(r=-r,a="+"),s=r/60,o=r%60,a+=(s<10?"0":"")+s+":"+(o<10?"0":"")+o):a=r,t.setSubText(e,n,i,a)})},t.exports=n.default},{"xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/addresses.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"_address",namespace:i.Namespace.ADDRESS,element:"address",fields:{jid:t.jidAttribute("jid"),uri:t.attribute("uri"),node:t.attribute("node"),description:t.attribute("desc"),delivered:t.boolAttribute("delivered"),type:t.attribute("type")}}),r=t.subMultiExtension(i.Namespace.ADDRESS,"addresses",n);e.withMessage(function(t){e.add(t,"addresses",r)}),e.withPresence(function(t){e.add(t,"addresses",r)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/avatar.js":[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(n,"__esModule",{value:!0});var r=e("xmpp-constants"),s=e("lodash.foreach"),o=i(s);n.default=function(e){var t=e.utils,n=e.define({name:"avatar",namespace:r.Namespace.AVATAR_METADATA,element:"info",fields:{id:t.attribute("id"),bytes:t.attribute("bytes"),height:t.attribute("height"),width:t.attribute("width"),type:t.attribute("type","image/png"),url:t.attribute("url")}}),i={get:function get(){var e=t.find(this.xml,r.Namespace.AVATAR_METADATA,"metadata"),i=[];if(e.length){var s=t.find(e[0],r.Namespace.AVATAR_METADATA,"info");(0,o.default)(s,function(e){i.push(new n({},e))})}return i},set:function set(e){var i=t.findOrCreate(this.xml,r.Namespace.AVATAR_METADATA,"metadata");t.setAttribute(i,"xmlns",r.Namespace.AVATAR_METADATA),(0,o.default)(e,function(e){var t=new n(e);i.appendChild(t.xml)})}};e.withPubsubItem(function(n){e.add(n,"avatars",i),e.add(n,"avatarData",t.textSub(r.Namespace.AVATAR_DATA,"data"))})},t.exports=n.default},{"babel-runtime/helpers/interop-require-default":"/home/michel/stanza.io/node_modules/babel-runtime/helpers/interop-require-default.js","lodash.foreach":"/home/michel/stanza.io/node_modules/lodash.foreach/index.js","xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bind.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"bind",namespace:i.Namespace.BIND,element:"bind",fields:{resource:t.textSub(i.Namespace.BIND,"resource"),jid:t.jidSub(i.Namespace.BIND,"jid")}});e.extendIQ(n),e.extendStreamFeatures(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/blocking.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=e("xmpp-jid");n.default=function(e){var t=e.utils,n={get:function get(){var e=[],n=t.find(this.xml,i.Namespace.BLOCKING,"item");return n.length?(n.forEach(function(n){e.push(new r.JID(t.getAttribute(n,"jid","")))}),e):e},set:function set(e){var n=this;e.forEach(function(e){var r=t.createElement(i.Namespace.BLOCKING,"item",i.Namespace.BLOCKING);t.setAttribute(r,"jid",e.toString()),n.xml.appendChild(r)})}},s=e.define({name:"block",namespace:i.Namespace.BLOCKING,element:"block",fields:{jids:n}}),o=e.define({name:"unblock",namespace:i.Namespace.BLOCKING,element:"unblock",fields:{jids:n}}),a=e.define({name:"blockList",namespace:i.Namespace.BLOCKING,element:"blocklist",fields:{jids:n}});e.extendIQ(s),e.extendIQ(o),e.extendIQ(a)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bob.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"bob",namespace:i.Namespace.BOB,element:"data",fields:{cid:t.attribute("cid"),maxAge:t.numberAttribute("max-age"),type:t.attribute("type"),data:t.text()}});e.extendIQ(n),e.extendMessage(n),e.extendPresence(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bookmarks.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"_conference",namespace:i.Namespace.BOOKMARKS,element:"conference",fields:{name:t.attribute("name"),autoJoin:t.boolAttribute("autojoin"),jid:t.jidAttribute("jid"),nick:t.textSub(i.Namespace.BOOKMARKS,"nick")}}),r=e.define({name:"bookmarks",namespace:i.Namespace.BOOKMARKS,element:"storage"});e.extend(r,n,"conferences"),e.withDefinition("query",i.Namespace.PRIVATE,function(t){e.extend(t,r)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bosh.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils;e.define({name:"bosh",namespace:i.Namespace.BOSH,element:"body",prefixes:{xmpp:i.Namespace.BOSH_XMPP},fields:{accept:t.attribute("accept"),ack:t.numberAttribute("ack"),authid:t.attribute("authid"),charsets:t.attribute("charsets"),condition:t.attribute("condition"),content:t.attribute("content"),from:t.jidAttribute("from",!0),hold:t.numberAttribute("hold"),inactivity:t.numberAttribute("inactivity"),key:t.attribute("key"),maxpause:t.numberAttribute("maxpause"),newKey:t.attribute("newkey"),pause:t.numberAttribute("pause"),polling:t.numberAttribute("polling"),resport:t.numberAttribute("report"),requests:t.numberAttribute("requests"),rid:t.numberAttribute("rid"),sid:t.attribute("sid"),stream:t.attribute("stream"),time:t.attribute("time"),to:t.jidAttribute("to",!0),type:t.attribute("type"),ver:t.attribute("ver"),wait:t.numberAttribute("wait"),uri:t.textSub(i.Namespace.BOSH,"uri"),lang:t.langAttribute(),version:t.attribute("xmpp:version","1.0"),restart:t.attribute("xmpp:restart"),restartLogic:t.boolAttribute("xmpp:restartLogic"),payload:{get:function get(){for(var t=[],n=0,i=this.xml.childNodes.length;n<i;n++){var r=e.build(this.xml.childNodes[n]);void 0!==r&&t.push(r)}return t},set:function set(e){var t=this;e.forEach(function(e){t.xml.appendChild(e.xml)})}}}})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/carbons.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"carbonSent",eventName:"carbon:sent",namespace:i.Namespace.CARBONS_2,element:"sent"}),n=e.define({name:"carbonReceived",eventName:"carbon:received",namespace:i.Namespace.CARBONS_2,element:"received"}),r=e.define({name:"carbonPrivate",eventName:"carbon:private",namespace:i.Namespace.CARBONS_2,element:"private"}),s=e.define({name:"enableCarbons",namespace:i.Namespace.CARBONS_2,element:"enable"}),o=e.define({name:"disableCarbons",namespace:i.Namespace.CARBONS_2,element:"disable"});e.withDefinition("forwarded",i.Namespace.FORWARD_0,function(i){e.extend(t,i),e.extend(n,i)}),e.extendMessage(t),e.extendMessage(n),e.extendMessage(r),e.extendIQ(s),e.extendIQ(o)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/command.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["next","prev","complete","cancel"],s=["bad-action","bad-locale","bad-payload","bad-sessionid","malformed-action","session-expired"];n.default=function(e){var t=e.utils,n=e.define({name:"command",namespace:i.Namespace.ADHOC_COMMANDS,element:"command",fields:{action:t.attribute("action"),node:t.attribute("node"),sessionid:t.attribute("sessionid"),status:t.attribute("status"),execute:t.subAttribute(i.Namespace.ADHOC_COMMANDS,"actions","execute"),actions:{get:function get(){var e=[],n=t.find(this.xml,i.Namespace.ADHOC_COMMANDS,"actions");return n.length?(r.forEach(function(r){t.find(n[0],i.Namespace.ADHOC_COMMANDS,r).length&&e.push(r)}),e):[]},set:function set(e){for(var n=t.findOrCreate(this.xml,i.Namespace.ADHOC_COMMANDS,"actions"),r=0,s=n.childNodes.length;r<s;r++)n.removeChild(n.childNodes[r]);e.forEach(function(e){n.appendChild(t.createElement(i.Namespace.ADHOC_COMMANDS,e.toLowerCase(),i.Namespace.ADHOC_COMMANDS))})}}}}),o=e.define({name:"_commandNote",namespace:i.Namespace.ADHOC_COMMANDS,element:"note",fields:{type:t.attribute("type"),value:t.text()}});e.extend(n,o,"notes"),e.extendIQ(n),e.withStanzaError(function(n){e.add(n,"adhocCommandCondition",t.enumSub(i.Namespace.ADHOC_COMMANDS,s))}),e.withDataForm(function(t){e.extend(n,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/csi.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"clientStateIndication",namespace:i.Namespace.CSI,element:"csi"});e.define({name:"csiActive",eventName:"csi:active",namespace:i.Namespace.CSI,element:"active",topLevel:!0}),e.define({name:"csiInactive",eventName:"csi:inactive",namespace:i.Namespace.CSI,element:"inactive",topLevel:!0}),e.extendStreamFeatures(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/dataforms.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=e("xmpp-jid"),s=["text-single","text-private","list-single","jid-single"];n.default=function(e){var t=e.utils,n=e.define({name:"_field",namespace:i.Namespace.DATAFORM,element:"field",init:function init(e){this._type=(e||{}).type||this.type},fields:{type:{get:function get(){return t.getAttribute(this.xml,"type","text-single")},set:function set(e){this._type=e,t.setAttribute(this.xml,"type",e)}},name:t.attribute("var"),desc:t.textSub(i.Namespace.DATAFORM,"desc"),required:t.boolSub(i.Namespace.DATAFORM,"required"),label:t.attribute("label"),value:{get:function get(){var e=t.getMultiSubText(this.xml,i.Namespace.DATAFORM,"value");return"boolean"===this._type?"1"===e[0]||"true"===e[0]:e.length>1?"text-multi"===this._type?e.join("\n"):"jid-multi"===this._type?e.map(function(e){return new r.JID(e)}):e:s.indexOf(this._type)>=0?"jid-single"===this._type?new r.JID(e[0]):e[0]:e},set:function set(e){if("boolean"===this._type||!0===e||!1===e){var n=!0===e||"true"===e||"1"===e,r=t.createElement(i.Namespace.DATAFORM,"value",i.Namespace.DATAFORM);r.textContent=n?"1":"0",this.xml.appendChild(r)}else"text-multi"===this._type&&"string"==typeof e&&(e=e.split("\n")),t.setMultiSubText(this.xml,i.Namespace.DATAFORM,"value",e,function(e){var n=t.createElement(i.Namespace.DATAFORM,"value",i.Namespace.DATAFORM);n.textContent=e,this.xml.appendChild(n)}.bind(this))}}}}),o=e.define({name:"_formoption",namespace:i.Namespace.DATAFORM,element:"option",fields:{label:t.attribute("label"),value:t.textSub(i.Namespace.DATAFORM,"value")}}),a=e.define({name:"_formitem",namespace:i.Namespace.DATAFORM,element:"item"}),c=e.define({name:"media",element:"media",namespace:i.Namespace.DATAFORM_MEDIA,fields:{height:t.numberAttribute("height"),width:t.numberAttribute("width")}}),u=e.define({name:"_mediaURI",element:"uri",namespace:i.Namespace.DATAFORM_MEDIA,fields:{uri:t.text(),type:t.attribute("type")}}),l=e.define({name:"validation",element:"validate",namespace:i.Namespace.DATAFORM_VALIDATION,fields:{dataType:t.attribute("datatype"),basic:t.boolSub(i.Namespace.DATAFORM_VALIDATION,"basic"),open:t.boolSub(i.Namespace.DATAFORM_VALIDATION,"open"),regex:t.textSub(i.Namespace.DATAFORM_VALIDATION,"regex")}}),d=e.define({name:"range",element:"range",namespace:i.Namespace.DATAFORM_VALIDATION,fields:{min:t.attribute("min"),max:t.attribute("max")}}),f=e.define({name:"select",element:"list-range",namespace:i.Namespace.DATAFORM_VALIDATION,fields:{min:t.numberAttribute("min"),max:t.numberAttribute("max")}}),h={get:function get(){for(var e=[],t=0,n=this.xml.childNodes.length;t<n;t++){var r=this.xml.childNodes[t];if(r.namespaceURI===i.Namespace.DATAFORM_LAYOUT)switch(r.localName){case"text":e.push({text:r.textContent});break;case"fieldref":e.push({field:r.getAttribute("var")});break;case"reportedref":e.push({reported:!0});break;case"section":e.push({section:new m(null,r,this).toJSON()})}}return e},set:function set(e){for(var n=0,r=e.length;n<r;n++){var s=e[n];if(s.text){var o=t.createElement(i.Namespace.DATAFORM_LAYOUT,"text",i.Namespace.DATAFORM_LAYOUT);o.textContent=s.text,this.xml.appendChild(o)}if(s.field){var a=t.createElement(i.Namespace.DATAFORM_LAYOUT,"fieldref",i.Namespace.DATAFORM_LAYOUT);a.setAttribute("var",s.field),this.xml.appendChild(a)}if(s.reported&&this.xml.appendChild(t.createElement(i.Namespace.DATAFORM_LAYOUT,"reportedref",i.Namespace.DATAFORM_LAYOUT)),s.section){var c=t.createElement(i.Namespace.DATAFORM_LAYOUT,"section",i.Namespace.DATAFORM_LAYOUT);this.xml.appendChild(c);var u=new m(null,c);u.label=s.section.label,u.contents=s.section.contents}}}},m=e.define({name:"_section",element:"section",namespace:i.Namespace.DATAFORM_LAYOUT,fields:{label:t.attribute("label"),contents:h}}),p=e.define({name:"_page",element:"page",namespace:i.Namespace.DATAFORM_LAYOUT,fields:{label:t.attribute("label"),contents:h}}),b=e.define({name:"form",
namespace:i.Namespace.DATAFORM,element:"x",init:function init(){if(this.reportedFields.length){var e={};this.reportedFields.forEach(function(t){e[t.name]=t.type}),this.items.forEach(function(t){t.fields.forEach(function(t){t.type=t._type=e[t.name]})})}},fields:{title:t.textSub(i.Namespace.DATAFORM,"title"),instructions:t.multiTextSub(i.Namespace.DATAFORM,"instructions"),type:t.attribute("type","form"),reportedFields:t.subMultiExtension(i.Namespace.DATAFORM,"reported",n)}});e.extend(b,n,"fields"),e.extend(b,a,"items"),e.extend(b,p,"layout"),e.extend(n,c),e.extend(n,l),e.extend(n,o,"options"),e.extend(a,n,"fields"),e.extend(c,u,"uris"),e.extend(l,d),e.extend(l,f),e.extendMessage(b)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/delayed.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"delay",namespace:i.Namespace.DELAY,element:"delay",fields:{from:t.jidAttribute("from"),stamp:t.dateAttribute("stamp"),reason:t.text()}});e.extendMessage(n),e.extendPresence(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/disco.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"caps",namespace:i.Namespace.CAPS,element:"c",fields:{ver:t.attribute("ver"),node:t.attribute("node"),hash:t.attribute("hash"),ext:t.attribute("ext")}}),r=e.define({name:"discoInfo",namespace:i.Namespace.DISCO_INFO,element:"query",fields:{node:t.attribute("node"),features:t.multiSubAttribute(i.Namespace.DISCO_INFO,"feature","var")}}),s=e.define({name:"_discoIdentity",namespace:i.Namespace.DISCO_INFO,element:"identity",fields:{category:t.attribute("category"),type:t.attribute("type"),name:t.attribute("name"),lang:t.langAttribute()}}),o=e.define({name:"discoItems",namespace:i.Namespace.DISCO_ITEMS,element:"query",fields:{node:t.attribute("node")}}),a=e.define({name:"_discoItem",namespace:i.Namespace.DISCO_ITEMS,element:"item",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node"),name:t.attribute("name")}});e.extend(o,a,"items"),e.extend(r,s,"identities"),e.extendIQ(r),e.extendIQ(o),e.extendPresence(n),e.extendStreamFeatures(n),e.withDataForm(function(t){e.extend(r,t,"extensions")}),e.withDefinition("set",i.Namespace.RSM,function(t){e.extend(o,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/error.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["bad-request","conflict","feature-not-implemented","forbidden","gone","internal-server-error","item-not-found","jid-malformed","not-acceptable","not-allowed","not-authorized","payment-required","recipient-unavailable","redirect","registration-required","remote-server-not-found","remote-server-timeout","resource-constraint","service-unavailable","subscription-required","undefined-condition","unexpected-request"];n.default=function(e){var t=e.utils,n=e.define({name:"error",namespace:i.Namespace.CLIENT,element:"error",fields:{lang:{get:function get(){return(this.parent||{}).lang||""}},condition:t.enumSub(i.Namespace.STANZA_ERROR,r),gone:{get:function get(){return t.getSubText(this.xml,i.Namespace.STANZA_ERROR,"gone")},set:function set(e){this.condition="gone",t.setSubText(this.xml,i.Namespace.STANZA_ERROR,"gone",e)}},redirect:{get:function get(){return t.getSubText(this.xml,i.Namespace.STANZA_ERROR,"redirect")},set:function set(e){this.condition="redirect",t.setSubText(this.xml,i.Namespace.STANZA_ERROR,"redirect",e)}},code:t.attribute("code"),type:t.attribute("type"),by:t.jidAttribute("by"),$text:{get:function get(){return t.getSubLangText(this.xml,i.Namespace.STANZA_ERROR,"text",this.lang)}},text:{get:function get(){return this.$text[this.lang]||""},set:function set(e){t.setSubLangText(this.xml,i.Namespace.STANZA_ERROR,"text",e,this.lang)}}}});e.extendMessage(n),e.extendPresence(n),e.extendIQ(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/extdisco.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,r=n.Services=e.define({name:"services",namespace:i.Namespace.DISCO_EXTERNAL_1,element:"services",fields:{type:t.attribute("type")}}),s=n.Credentials=e.define({name:"credentials",namespace:i.Namespace.DISCO_EXTERNAL_1,element:"credentials"}),o=e.define({name:"service",namespace:i.Namespace.DISCO_EXTERNAL_1,element:"service",fields:{host:t.attribute("host"),port:t.attribute("port"),transport:t.attribute("transport"),type:t.attribute("type"),username:t.attribute("username"),password:t.attribute("password")}});e.extend(r,o,"services"),e.extend(s,o),e.extendIQ(r),e.extendIQ(s),e.withDataForm(function(t){e.extend(o,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/file.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=i.Namespace.FILE_TRANSFER_4;n.default=function(e){var t=e.utils,n=e.define({name:"file",namespace:r,element:"file",fields:{name:t.textSub(r,"name"),description:t.textSub(r,"desc"),mediaType:t.textSub(r,"media-type"),size:t.numberSub(r,"size"),date:t.dateSub(r,"date")}}),s=e.define({name:"range",namespace:r,element:"range",fields:{offset:t.numberAttribute("offset"),length:t.numberAttribute("length")}}),o=e.define({name:"_"+r,namespace:r,element:"description",tags:["jingle-application"],fields:{applicationType:{value:r}}}),a=e.define({name:"_{"+r+"}received",namespace:r,element:"received",tags:["jingle-info"],fields:{infoType:{value:"{"+r+"}received"},creator:t.attribute("creator"),name:t.attribute("name")}}),c=e.define({name:"_{"+r+"}checksum",namespace:r,element:"checksum",tags:["jingle-info"],fields:{infoType:{value:"{"+r+"}checksum"},creator:t.attribute("creator"),name:t.attribute("name")}});e.extend(n,s),e.extend(c,n),e.extend(o,n),e.withDefinition("hash",i.Namespace.HASHES_1,function(t){e.extend(n,t,"hashes"),e.extend(s,t,"hashes")}),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,o)}),e.withDefinition("jingle",i.Namespace.JINGLE_1,function(t){e.extend(t,a),e.extend(t,c)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/file3.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=i.Namespace.FILE_TRANSFER_3;n.default=function(e){var t=e.utils,n=e.define({name:"_file",namespace:r,element:"file",fields:{name:t.textSub(r,"name"),desc:t.textSub(r,"desc"),size:t.numberSub(r,"size"),date:t.dateSub(r,"date")}}),s=e.define({name:"range",namespace:r,element:"range",fields:{offset:t.numberAttribute("offset")}}),o=e.define({name:"thumbnail",namespace:i.Namespace.THUMBS_0,element:"thumbnail",fields:{cid:t.attribute("cid"),mimeType:t.attribute("mime-type"),width:t.numberAttribute("width"),height:t.numberAttribute("height")}}),a=e.define({name:"_filetransfer",namespace:r,element:"description",tags:["jingle-application"],fields:{applicationType:{value:"filetransfer"},offer:t.subExtension("offer",r,"offer",n),request:t.subExtension("request",r,"request",n)}});e.extend(n,s),e.extend(n,o),e.withDefinition("hash",i.Namespace.HASHES_1,function(t){e.extend(n,t,"hashes")}),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,a)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/forwarded.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"forwarded",namespace:i.Namespace.FORWARD_0,element:"forwarded"});e.withMessage(function(n){e.extend(n,t),e.extend(t,n)}),e.withPresence(function(n){e.extend(n,t),e.extend(t,n)}),e.withIQ(function(n){e.extend(n,t),e.extend(t,n)}),e.withDefinition("delay",i.Namespace.DELAY,function(n){e.extend(t,n)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/framing.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils;e.define({name:"openStream",namespace:i.Namespace.FRAMING,element:"open",topLevel:!0,fields:{lang:t.langAttribute(),id:t.attribute("id"),version:t.attribute("version","1.0"),to:t.jidAttribute("to",!0),from:t.jidAttribute("from",!0)}}),e.define({name:"closeStream",namespace:i.Namespace.FRAMING,element:"close",topLevel:!0,fields:{seeOtherURI:t.attribute("see-other-uri")}})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/geoloc.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"geoloc",namespace:i.Namespace.GEOLOC,element:"geoloc",fields:{accuracy:t.numberSub(i.Namespace.GEOLOC,"accuracy",!0),altitude:t.numberSub(i.Namespace.GEOLOC,"alt",!0),area:t.textSub(i.Namespace.GEOLOC,"area"),heading:t.numberSub(i.Namespace.GEOLOC,"bearing",!0),bearing:t.numberSub(i.Namespace.GEOLOC,"bearing",!0),building:t.textSub(i.Namespace.GEOLOC,"building"),country:t.textSub(i.Namespace.GEOLOC,"country"),countrycode:t.textSub(i.Namespace.GEOLOC,"countrycode"),datum:t.textSub(i.Namespace.GEOLOC,"datum"),description:t.textSub(i.Namespace.GEOLOC,"description"),error:t.numberSub(i.Namespace.GEOLOC,"error",!0),floor:t.textSub(i.Namespace.GEOLOC,"floor"),latitude:t.numberSub(i.Namespace.GEOLOC,"lat",!0),locality:t.textSub(i.Namespace.GEOLOC,"locality"),longitude:t.numberSub(i.Namespace.GEOLOC,"lon",!0),postalcode:t.textSub(i.Namespace.GEOLOC,"postalcode"),region:t.textSub(i.Namespace.GEOLOC,"region"),room:t.textSub(i.Namespace.GEOLOC,"room"),speed:t.numberSub(i.Namespace.GEOLOC,"speed",!0),street:t.textSub(i.Namespace.GEOLOC,"street"),text:t.textSub(i.Namespace.GEOLOC,"text"),timestamp:t.dateSub(i.Namespace.GEOLOC,"timestamp"),tzo:t.tzoSub(i.Namespace.GEOLOC,"tzo"),uri:t.textSub(i.Namespace.GEOLOC,"uri")}});e.extendPubsubItem(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/hash.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){e.define({name:"hash",namespace:i.Namespace.HASHES_1,element:"hash",fields:{algo:e.utils.attribute("algo"),value:e.utils.text()}})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/hats.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"_hat",namespace:i.Namespace.HATS_0,element:"hat",fields:{lang:e.utils.langAttribute(),name:e.utils.attribute("name"),displayName:e.utils.attribute("displayName")}});e.withPresence(function(n){e.add(n,"hats",e.utils.subMultiExtension(i.Namespace.HATS_0,"hats",t))})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/ibb.js":[function(e,t,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("xmpp-constants"),s="http://jabber.org/protocol/ibb",o="urn:xmpp:jingle:transports:ibb:1";n.default=function(e){var t=e.utils,n={get:function get(){var e=t.find(this.xml,s,"data");if(e.length)return e=e[0],{action:"data",sid:t.getAttribute(e,"sid"),seq:parseInt(t.getAttribute(e,"seq")||"0",10),data:new i(t.getText(e),"base64")};var n=t.find(this.xml,s,"open");if(n.length){n=n[0];var r=t.getAttribute(n,"stanza");return r="message"!==r,{action:"open",sid:t.getAttribute(n,"sid"),blockSize:t.getAttribute(n,"block-size"),ack:r}}var o=t.find(this.xml,s,"close");return o.length?{action:"close",sid:t.getAttribute(o[0],"sid")}:void 0},set:function set(e){if("data"===e.action){var n=t.createElement(s,"data");t.setAttribute(n,"sid",e.sid),t.setAttribute(n,"seq",e.seq.toString()),t.setText(n,e.data.toString("base64")),this.xml.appendChild(n)}if("open"===e.action){var i=t.createElement(s,"open");t.setAttribute(i,"sid",e.sid),t.setAttribute(i,"block-size",(e.blockSize||"4096").toString()),!1===e.ack?t.setAttribute(i,"stanza","message"):t.setAttribute(i,"stanza","iq"),this.xml.appendChild(i)}if("close"===e.action){var r=t.createElement(s,"close");t.setAttribute(r,"sid",e.sid),this.xml.appendChild(r)}}},a=e.define({name:"_"+o,namespace:o,element:"transport",tags:["jingle-transport"],fields:{transportType:{value:o},sid:t.attribute("sid"),blockSize:t.numberAttribute("block-size"),ack:{get:function get(){return"message"!==t.getAttribute(this.xml,"stanza")},set:function set(e){!1===e.ack?t.setAttribute(this.xml,"stanza","message"):t.setAttribute(this.xml,"stanza","iq")}}}});e.withDefinition("content",r.Namespace.JINGLE_1,function(t){e.extend(t,a)}),e.withIQ(function(t){e.add(t,"ibb",n)}),e.withMessage(function(t){e.add(t,"ibb",n)})},t.exports=n.default}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/iceUdp.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"_iceUdp",namespace:i.Namespace.JINGLE_ICE_UDP_1,element:"transport",tags:["jingle-transport"],fields:{transportType:{value:"iceUdp"},pwd:t.attribute("pwd"),ufrag:t.attribute("ufrag")}}),r=e.define({name:"remoteCandidate",namespace:i.Namespace.JINGLE_ICE_UDP_1,element:"remote-candidate",fields:{component:t.attribute("component"),ip:t.attribute("ip"),port:t.attribute("port")}}),s=e.define({name:"_iceUdpCandidate",namespace:i.Namespace.JINGLE_ICE_UDP_1,element:"candidate",fields:{component:t.attribute("component"),foundation:t.attribute("foundation"),generation:t.attribute("generation"),id:t.attribute("id"),ip:t.attribute("ip"),network:t.attribute("network"),port:t.attribute("port"),priority:t.attribute("priority"),protocol:t.attribute("protocol"),relAddr:t.attribute("rel-addr"),relPort:t.attribute("rel-port"),tcpType:t.attribute("tcptype"),type:t.attribute("type")}}),o=e.define({name:"_iceFingerprint",namespace:i.Namespace.JINGLE_DTLS_0,element:"fingerprint",fields:{hash:t.attribute("hash"),setup:t.attribute("setup"),value:t.text(),required:t.boolAttribute("required")}}),a=e.define({name:"_sctpMap",namespace:i.Namespace.DTLS_SCTP_1,element:"sctpmap",fields:{number:t.attribute("number"),protocol:t.attribute("protocol"),streams:t.attribute("streams")}});e.extend(n,s,"candidates"),e.extend(n,r),e.extend(n,o,"fingerprints"),e.extend(n,a,"sctp"),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,n)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/index.js":[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(n,"__esModule",{value:!0});var r=e("./addresses"),s=i(r),o=e("./avatar"),a=i(o),c=e("./bind"),u=i(c),l=e("./blocking"),d=i(l),f=e("./bob"),h=i(f),m=e("./bookmarks"),p=i(m),b=e("./bosh"),g=i(b),_=e("./carbons"),y=i(_),v=e("./command"),x=i(v),j=e("./csi"),S=i(j),w=e("./dataforms"),E=i(w),A=e("./delayed"),N=i(A),O=e("./disco"),T=i(O),C=e("./error"),I=i(C),R=e("./extdisco"),z=i(R),M=e("./file"),k=i(M),L=e("./file3"),B=i(L),P=e("./forwarded"),D=i(P),U=e("./framing"),F=i(U),q=e("./geoloc"),G=i(q),J=e("./hash"),H=i(J),V=e("./hats"),W=i(V),X=e("./iceUdp"),$=i(X),K=e("./ibb"),Y=i(K),Q=e("./iq"),Z=i(Q),ee=e("./jidprep"),te=i(ee),ne=e("./jingle"),ie=i(ne),re=e("./json"),se=i(re),oe=e("./logging"),ae=i(oe),ce=e("./mam"),ue=i(ce),le=e("./message"),de=i(le),fe=e("./mood"),he=i(fe),me=e("./muc"),pe=i(me),be=e("./nick"),ge=i(be),_e=e("./oob"),ye=i(_e),ve=e("./ping"),xe=i(ve),je=e("./presence"),Se=i(je),we=e("./private"),Ee=i(we),Ae=e("./psa"),Ne=i(Ae),Oe=e("./pubsub"),Te=i(Oe),Ce=e("./pubsubError"),Ie=i(Ce),Re=e("./pubsubEvents"),ze=i(Re),Me=e("./pubsubOwner"),ke=i(Me),Le=e("./push"),Be=i(Le),Pe=e("./reach"),De=i(Pe),Ue=e("./register"),Fe=i(Ue),qe=e("./references"),Ge=i(qe),Je=e("./roster"),He=i(Je),Ve=e("./rsm"),We=i(Ve),Xe=e("./rtp"),$e=i(Xe),Ke=e("./rtt"),Ye=i(Ke),Qe=e("./sasl"),Ze=i(Qe),et=e("./session"),tt=i(et),nt=e("./shim"),it=i(nt),rt=e("./sm"),st=i(rt),ot=e("./stream"),at=i(ot),ct=e("./streamError"),ut=i(ct),lt=e("./streamFeatures"),dt=i(lt),ft=e("./time"),ht=i(ft),mt=e("./tune"),pt=i(mt),bt=e("./vcard"),gt=i(bt),_t=e("./version"),yt=i(_t),vt=e("./visibility"),xt=i(vt);n.default=function(e){e.use(s.default),e.use(a.default),e.use(u.default),e.use(d.default),e.use(h.default),e.use(p.default),e.use(g.default),e.use(y.default),e.use(x.default),e.use(S.default),e.use(E.default),e.use(N.default),e.use(T.default),e.use(I.default),e.use(z.default),e.use(k.default),e.use(B.default),e.use(D.default),e.use(F.default),e.use(G.default),e.use(H.default),e.use(W.default),e.use($.default),e.use(Y.default),e.use(Z.default),e.use(te.default),e.use(ie.default),e.use(se.default),e.use(ae.default),e.use(ue.default),e.use(de.default),e.use(he.default),e.use(pe.default),e.use(ge.default),e.use(ye.default),e.use(xe.default),e.use(Se.default),e.use(Ee.default),e.use(Ne.default),e.use(Te.default),e.use(Ie.default),e.use(ze.default),e.use(ke.default),e.use(Be.default),e.use(De.default),e.use(Fe.default),e.use(Ge.default),e.use(He.default),e.use(We.default),e.use($e.default),e.use(Ye.default),e.use(Ze.default),e.use(tt.default),e.use(it.default),e.use(st.default),e.use(at.default),e.use(ut.default),e.use(dt.default),e.use(ht.default),e.use(pt.default),e.use(gt.default),e.use(yt.default),e.use(xt.default)},t.exports=n.default},{"./addresses":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/addresses.js","./avatar":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/avatar.js","./bind":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bind.js","./blocking":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/blocking.js","./bob":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bob.js","./bookmarks":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bookmarks.js","./bosh":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/bosh.js","./carbons":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/carbons.js","./command":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/command.js","./csi":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/csi.js","./dataforms":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/dataforms.js","./delayed":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/delayed.js","./disco":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/disco.js","./error":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/error.js","./extdisco":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/extdisco.js","./file":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/file.js","./file3":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/file3.js","./forwarded":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/forwarded.js","./framing":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/framing.js","./geoloc":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/geoloc.js","./hash":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/hash.js","./hats":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/hats.js","./ibb":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/ibb.js","./iceUdp":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/iceUdp.js","./iq":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/iq.js","./jidprep":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/jidprep.js","./jingle":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/jingle.js","./json":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/json.js","./logging":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/logging.js","./mam":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/mam.js","./message":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/message.js","./mood":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/mood.js","./muc":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/muc.js","./nick":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/nick.js","./oob":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/oob.js","./ping":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/ping.js","./presence":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/presence.js","./private":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/private.js","./psa":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/psa.js","./pubsub":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsub.js","./pubsubError":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsubError.js","./pubsubEvents":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsubEvents.js","./pubsubOwner":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsubOwner.js","./push":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/push.js","./reach":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/reach.js","./references":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/references.js","./register":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/register.js","./roster":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/roster.js","./rsm":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/rsm.js","./rtp":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/rtp.js","./rtt":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/rtt.js","./sasl":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/sasl.js","./session":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/session.js","./shim":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/shim.js","./sm":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/sm.js","./stream":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/stream.js","./streamError":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/streamError.js","./streamFeatures":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/streamFeatures.js","./time":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/time.js","./tune":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/tune.js","./vcard":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/vcard.js","./version":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/version.js","./visibility":"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/visibility.js","babel-runtime/helpers/interop-require-default":"/home/michel/stanza.io/node_modules/babel-runtime/helpers/interop-require-default.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/iq.js":[function(e,t,n){"use strict";var i=e("babel-runtime/core-js/object/assign").default;Object.defineProperty(n,"__esModule",{value:!0});var r=e("xmpp-constants"),s={};s.defineIQ=function(e,t,n){var r=e.utils,s=e.define({name:t,namespace:n,element:"iq",topLevel:!0,fields:{lang:r.langAttribute(),id:r.attribute("id"),to:r.jidAttribute("to",!0),from:r.jidAttribute("from",!0),type:r.attribute("type")}}),o=s.prototype.toJSON;i(s.prototype,{toJSON:function toJSON(){var e=o.call(this);return e.resultReply=this.resultReply,e.errorReply=this.errorReply,e},resultReply:function resultReply(e){return e=e||{},e.to=this.from,e.id=this.id,e.type="result",new s(e)},errorReply:function errorReply(e){return e=e||{},e.to=this.from,e.id=this.id,e.type="error",new s(e)}})},n.default=function(e){s.defineIQ(e,"iq",r.Namespace.CLIENT),s.defineIQ(e,"serverIQ",r.Namespace.SERVER),s.defineIQ(e,"componentIQ",r.Namespace.COMPONENT)},t.exports=n.default},{"babel-runtime/core-js/object/assign":"/home/michel/stanza.io/node_modules/babel-runtime/core-js/object/assign.js","xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/jidprep.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=e("xmpp-jid");n.default=function(e){e.withIQ(function(t){e.add(t,"jidPrep",{get:function get(){var t=e.utils.getSubText(this.xml,i.Namespace.JID_PREP_0,"jid");if(t){var n=new r.JID(t);return n.prepped=!0,n}},set:function set(t){e.utils.setSubText(this.xml,i.Namespace.JID_PREP_0,"jid",(t||"").toString())}})})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/jingle.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["out-of-order","tie-break","unknown-session","unsupported-info"],s=["alternative-session","busy","cancel","connectivity-error","decline","expired","failed-application","failed-transport","general-error","gone","incompatible-parameters","media-error","security-error","success","timeout","unsupported-applications","unsupported-transports"];n.default=function(e){var t=e.utils,n=e.define({name:"jingle",namespace:i.Namespace.JINGLE_1,element:"jingle",fields:{action:t.attribute("action"),initiator:t.attribute("initiator"),responder:t.attribute("responder"),sid:t.attribute("sid"),info:{get:function get(){for(var n=e.tagged("jingle-info").map(function(e){return e.prototype._name}),i=0,r=n.length;i<r;i++)if(this._extensions[n[i]])return this._extensions[n[i]];if("session-info"===t.getAttribute(this.xml,"action"))return 0===this.xml.children.length?{infoType:"ping"}:{infoType:"unknown"}},set:function set(e){if("ping"!==e.infoType){this["_"+e.infoType]=e}}}}}),o=e.define({name:"_jingleContent",namespace:i.Namespace.JINGLE_1,element:"content",fields:{creator:t.attribute("creator"),disposition:t.attribute("disposition","session"),name:t.attribute("name"),senders:t.attribute("senders","both"),application:{get:function get(){for(var t=e.tagged("jingle-application").map(function(e){return e.prototype._name}),n=0,i=t.length;n<i;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function set(e){this["_"+e.applicationType]=e}},transport:{get:function get(){for(var t=e.tagged("jingle-transport").map(function(e){return e.prototype._name}),n=0,i=t.length;n<i;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function set(e){this["_"+e.transportType]=e}},security:{get:function get(){for(var t=e.tagged("jingle-security").map(function(e){return Security.prototype._name}),n=0,i=t.length;n<i;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function set(e){this["_"+e.securityType]=e}}}}),a=e.define({name:"reason",namespace:i.Namespace.JINGLE_1,element:"reason",fields:{condition:t.enumSub(i.Namespace.JINGLE_1,s),alternativeSession:{get:function get(){return t.getSubText(this.xml,i.Namespace.JINGLE_1,"alternative-session")},set:function set(e){this.condition="alternative-session",t.setSubText(this.xml,i.Namespace.JINGLE_1,"alternative-session",e)}},text:t.textSub(i.Namespace.JINGLE_1,"text")}});e.extend(n,o,"contents"),e.extend(n,a),e.extendIQ(n),e.withStanzaError(function(n){e.add(n,"jingleCondition",t.enumSub(i.Namespace.JINGLE_ERRORS_1,r))})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/json.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t={get:function get(){var t=e.utils.getSubText(this.xml,i.Namespace.JSON_0,"json");if(t)return JSON.parse(t)},set:function set(t){(t=JSON.stringify(t))&&e.utils.setSubText(this.xml,i.Namespace.JSON_0,"json",t)}};e.withMessage(function(n){e.add(n,"json",t)}),e.withPubsubItem(function(n){e.add(n,"json",t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/logging.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"log",namespace:i.Namespace.EVENTLOG,element:"log",fields:{id:t.attribute("id"),timestamp:t.dateAttribute("timestamp"),type:t.attribute("type"),level:t.attribute("level"),object:t.attribute("object"),subject:t.attribute("subject"),facility:t.attribute("facility"),module:t.attribute("module"),message:t.textSub(i.Namespace.EVENTLOG,"message"),stackTrace:t.textSub(i.Namespace.EVENTLOG,"stackTrace")}}),r=e.define({name:"_logtag",namespace:i.Namespace.EVENTLOG,element:"tag",fields:{name:t.attribute("name"),value:t.attribute("value"),type:t.attribute("type")}});e.extend(n,r,"tags"),e.extendMessage(n),e.extendPubsubItem(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/mam.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=e("xmpp-jid");n.default=function(e){var t=e.utils,n=e.define({name:"mam",namespace:i.Namespace.MAM_2,element:"query",fields:{queryid:t.attribute("queryid"),node:t.attribute("node")}}),s=e.define({name:"mamItem",namespace:i.Namespace.MAM_2,element:"result",fields:{queryid:t.attribute("queryid"),id:t.attribute("id")}}),o=e.define({name:"mamResult",namespace:i.Namespace.MAM_2,element:"fin",fields:{complete:t.boolAttribute("complete"),stable:t.boolAttribute("stable")}}),a=e.define({name:"mamPrefs",namespace:i.Namespace.MAM_2,element:"prefs",fields:{defaultCondition:t.attribute("default"),always:{get:function get(){var e=[],n=t.find(this.xml,i.Namespace.MAM_2,"always");return 0===n.length?e:(n=n[0],t.getMultiSubText(n,i.Namespace.MAM_2,"jid").forEach(function(t){e.push(new r.JID(t.textContent))}),e)},set:function set(e){if(e.length>0){var n=t.findOrCreate(this.xml,i.Namespace.MAM_2,"always");t.setMultiSubText(n,i.Namespace.MAM_2,"jid",e)}}},never:{get:function get(){var e=[],n=t.find(this.xml,i.Namespace.MAM_2,"always");return 0===n.length?e:(n=n[0],t.getMultiSubText(n,i.Namespace.MAM_2,"jid").forEach(function(t){e.push(new r.JID(t.textContent))}),e)},set:function set(e){if(e.length>0){var n=t.findOrCreate(this.xml,i.Namespace.MAM_2,"never");t.setMultiSubText(n,i.Namespace.MAM_2,"jid",e)}}}}});e.extendMessage(s),e.extendIQ(n),e.extendIQ(a),e.extendIQ(o),e.withDataForm(function(t){e.extend(n,t)}),e.withDefinition("forwarded",i.Namespace.FORWARD_0,function(t){e.extend(s,t)}),e.withDefinition("set",i.Namespace.RSM,function(t){e.extend(n,t),e.extend(o,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js","xmpp-jid":"/home/michel/stanza.io/node_modules/xmpp-jid/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/message.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r={};r.defineMessage=function(e,t,n){var r=e.utils;e.define({name:t,namespace:n,element:"message",topLevel:!0,fields:{lang:r.langAttribute(),id:r.attribute("id"),to:r.jidAttribute("to",!0),from:r.jidAttribute("from",!0),type:r.attribute("type","normal"),thread:r.textSub(n,"thread"),parentThread:r.subAttribute(n,"thread","parent"),
subject:r.textSub(n,"subject"),$body:{get:function getBody$(){return r.getSubLangText(this.xml,n,"body",this.lang)}},body:{get:function getBody(){return this.$body[this.lang]||""},set:function setBody(e){r.setSubLangText(this.xml,n,"body",e,this.lang)}},attention:r.boolSub(i.Namespace.ATTENTION_0,"attention"),chatState:r.enumSub(i.Namespace.CHAT_STATES,["active","composing","paused","inactive","gone"]),replace:r.subAttribute(i.Namespace.CORRECTION_0,"replace","id"),requestReceipt:r.boolSub(i.Namespace.RECEIPTS,"request"),receipt:r.subAttribute(i.Namespace.RECEIPTS,"received","id")}})},n.default=function(e){r.defineMessage(e,"message",i.Namespace.CLIENT),r.defineMessage(e,"serverMessage",i.Namespace.SERVER),r.defineMessage(e,"componentMessage",i.Namespace.COMPONENT)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/mood.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["afraid","amazed","amorous","angry","annoyed","anxious","aroused","ashamed","bored","brave","calm","cautious","cold","confident","confused","contemplative","contented","cranky","crazy","creative","curious","dejected","depressed","disappointed","disgusted","dismayed","distracted","embarrassed","envious","excited","flirtatious","frustrated","grateful","grieving","grumpy","guilty","happy","hopeful","hot","humbled","humiliated","hungry","hurt","impressed","in_awe","in_love","indignant","interested","intoxicated","invincible","jealous","lonely","lucky","mean","moody","nervous","neutral","offended","outraged","playful","proud","relaxed","relieved","remorseful","restless","sad","sarcastic","serious","shocked","shy","sick","sleepy","spontaneous","stressed","strong","surprised","thankful","thirsty","tired","undefined","weak","worried"];n.default=function(e){var t=e.define({name:"mood",namespace:i.Namespace.MOOD,element:"mood",fields:{text:e.utils.textSub(i.Namespace.MOOD,"text"),value:e.utils.enumSub(i.Namespace.MOOD,r)}});e.extendMessage(t),e.extendPubsubItem(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/muc.js":[function(e,t,n){"use strict";function proxy(e,t){return{get:function get(){if(this._extensions[e])return this[e][t]},set:function set(n){this[e][t]=n}}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"_mucUserItem",namespace:i.Namespace.MUC_USER,element:"item",fields:{affiliation:t.attribute("affiliation"),nick:t.attribute("nick"),jid:t.jidAttribute("jid"),role:t.attribute("role"),reason:t.textSub(i.Namespace.MUC_USER,"reason")}}),r=e.define({name:"_mucUserActor",namespace:i.Namespace.MUC_USER,element:"actor",fields:{nick:t.attribute("nick"),jid:t.jidAttribute("jid")}}),s=e.define({name:"destroyed",namespace:i.Namespace.MUC_USER,element:"destroy",fields:{jid:t.jidAttribute("jid"),reason:t.textSub(i.Namespace.MUC_USER,"reason")}}),o=e.define({name:"invite",namespace:i.Namespace.MUC_USER,element:"invite",fields:{to:t.jidAttribute("to"),from:t.jidAttribute("from"),reason:t.textSub(i.Namespace.MUC_USER,"reason"),thread:t.subAttribute(i.Namespace.MUC_USER,"continue","thread"),continue:t.boolSub(i.Namespace.MUC_USER,"continue")}}),a=e.define({name:"decline",namespace:i.Namespace.MUC_USER,element:"decline",fields:{to:t.jidAttribute("to"),from:t.jidAttribute("from"),reason:t.textSub(i.Namespace.MUC_USER,"reason")}}),c=e.define({name:"_mucAdminItem",namespace:i.Namespace.MUC_ADMIN,element:"item",fields:{affiliation:t.attribute("affiliation"),nick:t.attribute("nick"),jid:t.jidAttribute("jid"),role:t.attribute("role"),reason:t.textSub(i.Namespace.MUC_ADMIN,"reason")}}),u=e.define({name:"actor",namespace:i.Namespace.MUC_USER,element:"actor",fields:{nick:t.attribute("nick"),jid:t.jidAttribute("jid")}}),l=e.define({name:"destroy",namespace:i.Namespace.MUC_OWNER,element:"destroy",fields:{jid:t.jidAttribute("jid"),password:t.textSub(i.Namespace.MUC_OWNER,"password"),reason:t.textSub(i.Namespace.MUC_OWNER,"reason")}}),d=e.define({name:"muc",namespace:i.Namespace.MUC_USER,element:"x",fields:{affiliation:proxy("_mucUserItem","affiliation"),nick:proxy("_mucUserItem","nick"),jid:proxy("_mucUserItem","jid"),role:proxy("_mucUserItem","role"),actor:proxy("_mucUserItem","_mucUserActor"),reason:proxy("_mucUserItem","reason"),password:t.textSub(i.Namespace.MUC_USER,"password"),codes:{get:function get(){return t.getMultiSubText(this.xml,i.Namespace.MUC_USER,"status",function(e){return t.getAttribute(e,"code")})},set:function set(e){var n=this;t.setMultiSubText(this.xml,i.Namespace.MUC_USER,"status",e,function(e){var r=t.createElement(i.Namespace.MUC_USER,"status",i.Namespace.MUC_USER);t.setAttribute(r,"code",e),n.xml.appendChild(r)})}}}}),f=e.define({name:"mucAdmin",namespace:i.Namespace.MUC_ADMIN,element:"query",fields:{affiliation:proxy("_mucAdminItem","affiliation"),nick:proxy("_mucAdminItem","nick"),jid:proxy("_mucAdminItem","jid"),role:proxy("_mucAdminItem","role"),actor:proxy("_mucAdminItem","_mucAdminActor"),reason:proxy("_mucAdminItem","reason")}}),h=e.define({name:"mucOwner",namespace:i.Namespace.MUC_OWNER,element:"query"}),m=e.define({name:"joinMuc",namespace:i.Namespace.MUC,element:"x",fields:{password:t.textSub(i.Namespace.MUC,"password"),history:{get:function get(){var e={},n=t.find(this.xml,i.Namespace.MUC,"history");if(!n.length)return{};n=n[0];var r=n.getAttribute("maxchars")||"",s=n.getAttribute("maxstanzas")||"",o=n.getAttribute("seconds")||"",a=n.getAttribute("since")||"";r&&(e.maxchars=parseInt(r,10)),s&&(e.maxstanzas=parseInt(s,10)),o&&(e.seconds=parseInt(o,10)),a&&(e.since=new Date(a))},set:function set(e){var n=t.find(this.xml,i.Namespace.MUC,"history");if(n.length)for(var r=0;r<n.length;r++)this.xml.removeChild(n[r]);var s=t.createElement(i.Namespace.MUC,"history",i.Namespace.MUC);this.xml.appendChild(s),e.maxchars&&s.setAttribute("maxchars",""+e.maxchars),e.maxstanzas&&s.setAttribute("maxstanzas",""+e.maxstanzas),e.seconds&&s.setAttribute("seconds",""+e.seconds),e.since&&s.setAttribute("since",e.since.toISOString())}}}}),p=e.define({name:"mucInvite",namespace:i.Namespace.MUC_DIRECT_INVITE,element:"x",fields:{jid:t.jidAttribute("jid"),password:t.attribute("password"),reason:t.attribute("reason"),thread:t.attribute("thread"),continue:t.boolAttribute("continue")}});e.extend(n,r),e.extend(d,n),e.extend(d,o,"invites"),e.extend(d,a),e.extend(d,s),e.extend(c,u),e.extend(f,c,"items"),e.extend(h,l),e.extendPresence(d),e.extendPresence(m),e.extendMessage(d),e.extendMessage(p),e.withIQ(function(n){e.add(n,"mucUnique",t.textSub(i.Namespace.MUC_UNIQUE,"unique")),e.extend(n,f),e.extend(n,h)}),e.withDataForm(function(t){e.extend(h,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/nick.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils.textSub(i.Namespace.NICK,"nick");e.withPubsubItem(function(n){e.add(n,"nick",t)}),e.withPresence(function(n){e.add(n,"nick",t)}),e.withMessage(function(n){e.add(n,"nick",t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/oob.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"oob",element:"x",namespace:i.Namespace.OOB,fields:{url:e.utils.textSub(i.Namespace.OOB,"url"),desc:e.utils.textSub(i.Namespace.OOB,"desc")}});e.extendMessage(t,"oobURIs")},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/ping.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"ping",namespace:i.Namespace.PING,element:"ping"});e.extendIQ(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/presence.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r={};r.definePresence=function(e,t,n){var r=e.utils;e.define({name:t,namespace:n,element:"presence",topLevel:!0,fields:{lang:r.langAttribute(),id:r.attribute("id"),to:r.jidAttribute("to",!0),from:r.jidAttribute("from",!0),priority:r.numberSub(n,"priority",!1,0),show:r.textSub(n,"show"),type:{get:function get(){return r.getAttribute(this.xml,"type","available")},set:function set(e){"available"===e&&(e=!1),r.setAttribute(this.xml,"type",e)}},$status:{get:function get(){return r.getSubLangText(this.xml,n,"status",this.lang)}},status:{get:function get(){return this.$status[this.lang]||""},set:function set(e){r.setSubLangText(this.xml,n,"status",e,this.lang)}},idleSince:r.dateSubAttribute(i.Namespace.IDLE_1,"idle","since"),decloak:r.subAttribute(i.Namespace.DECLOAK_0,"decloak","reason"),avatarId:{get:function get(){var e=r.find(this.xml,i.Namespace.VCARD_TEMP_UPDATE,"x");return e.length?r.getSubText(e[0],i.Namespace.VCARD_TEMP_UPDATE,"photo"):""},set:function set(e){var t=r.findOrCreate(this.xml,i.Namespace.VCARD_TEMP_UPDATE,"x");if(""===e)r.setBoolSub(t,i.Namespace.VCARD_TEMP_UPDATE,"photo",!0);else{if(!0===e)return;e?r.setSubText(t,i.Namespace.VCARD_TEMP_UPDATE,"photo",e):this.xml.removeChild(t)}}}}})},n.default=function(e){r.definePresence(e,"presence",i.Namespace.CLIENT),r.definePresence(e,"serverPresence",i.Namespace.SERVER),r.definePresence(e,"componentPresence",i.Namespace.COMPONENT)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/private.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"privateStorage",namespace:i.Namespace.PRIVATE,element:"query"});e.extendIQ(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/psa.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["server-unavailable","connection-paused"];n.default=function(e){var t=e.define({name:"state",namespace:i.Namespace.PSA,element:"state-annotation",fields:{from:e.utils.jidAttribute("from"),condition:e.utils.enumSub(i.Namespace.PSA,r),description:e.utils.textSub(i.Namespace.PSA,"description")}});e.extendPresence(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsub.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"pubsub",namespace:i.Namespace.PUBSUB,element:"pubsub",fields:{create:{get:function get(){var e=t.getSubAttribute(this.xml,i.Namespace.PUBSUB,"create","node");return e||t.getBoolSub(this.xml,i.Namespace.PUBSUB,"create")},set:function set(e){!0!==e&&e?t.setSubAttribute(this.xml,i.Namespace.PUBSUB,"create","node",e):t.setBoolSub(this.xml,i.Namespace.PUBSUB,"create",e)}},publishOptions:{get:function get(){var n=e.getDefinition("x",i.Namespace.DATAFORM),r=t.find(this.xml,i.Namespace.PUBSUB,"publish-options");if(r.length&&r[0].childNodes.length)return new n({},r[0].childNodes[0])},set:function set(n){var r=e.getDefinition("x",i.Namespace.DATAFORM),s=t.findOrCreate(this.xml,i.Namespace.PUBSUB,"publish-options");if(n){var o=new r(n);s.appendChild(o.xml)}}}}}),r=e.define({name:"config",namespace:i.Namespace.PUBSUB,element:"configure"}),s=e.define({name:"subscribe",namespace:i.Namespace.PUBSUB,element:"subscribe",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid")}}),o=e.define({name:"subscription",namespace:i.Namespace.PUBSUB,element:"subscription",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),subid:t.attribute("subid"),type:t.attribute("subscription"),configurable:t.boolSub("subscribe-options"),configurationRequired:{get:function get(){var e=t.find(this.xml,i.Namespace.PUBSUB,"subscribe-options");return!!e.length&&t.getBoolSub(e[0],i.Namespace.PUBSUB,"required")}}}}),a=e.define({name:"subscriptions",namespace:i.Namespace.PUBSUB,element:"subscriptions",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid")}}),c=e.define({name:"affiliation",namespace:i.Namespace.PUBSUB,element:"affiliation",fields:{node:t.attribute("node"),type:t.attribute("affiliation")}}),u=e.define({name:"affiliations",namespace:i.Namespace.PUBSUB,element:"affiliations",fields:{node:t.attribute("node")}}),l=e.define({name:"subscriptionOptions",namespace:i.Namespace.PUBSUB,element:"options",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),subid:t.attribute("subid")}}),d=e.define({name:"unsubscribe",namespace:i.Namespace.PUBSUB,element:"unsubscribe",fields:{node:t.attribute("node"),subid:t.attribute("subid"),jid:t.jidAttribute("jid")}}),f=e.define({name:"publish",namespace:i.Namespace.PUBSUB,element:"publish",fields:{node:t.attribute("node")}}),h=e.define({name:"retract",namespace:i.Namespace.PUBSUB,element:"retract",fields:{node:t.attribute("node"),notify:t.boolAttribute("notify"),id:t.subAttribute(i.Namespace.PUBSUB,"item","id")}}),m=e.define({name:"retrieve",namespace:i.Namespace.PUBSUB,element:"items",fields:{node:t.attribute("node"),max:t.attribute("max_items")}}),p=e.define({name:"item",namespace:i.Namespace.PUBSUB,element:"item",fields:{id:t.attribute("id"),publisher:t.jidAttribute("publisher")}});e.extend(n,r),e.extend(n,s),e.extend(n,d),e.extend(n,f),e.extend(n,h),e.extend(n,m),e.extend(n,o),e.extend(n,l),e.extend(n,a),e.extend(n,u),e.extend(f,p,"items"),e.extend(m,p,"items"),e.extend(a,o,"list"),e.extend(u,c,"list"),e.extendIQ(n),e.withDataForm(function(t){e.extend(l,t),e.extend(p,t),e.extend(r,t)}),e.withDefinition("set",i.Namespace.RSM,function(t){e.extend(n,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsubError.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["closed-node","configuration-required","invalid-jid","invalid-options","invalid-payload","invalid-subid","item-forbidden","item-required","jid-required","max-items-exceeded","max-nodes-exceeded","nodeid-required","not-in-roster-group","not-subscribed","payload-too-big","payload-required","pending-subscription","presence-subscription-required","subid-required","too-many-subscriptions","unsupported","unsupported-access-model"];n.default=function(e){e.withStanzaError(function(t){e.add(t,"pubsubCondition",e.utils.enumSub(i.Namespace.PUBSUB_ERRORS,r)),e.add(t,"pubsubUnsupportedFeature",{get:function get(){return e.utils.getSubAttribute(this.xml,i.Namespace.PUBSUB_ERRORS,"unsupported","feature")},set:function set(t){t&&(this.pubsubCondition="unsupported"),e.utils.setSubAttribute(this.xml,i.Namespace.PUBSUB_ERRORS,"unsupported","feature",t)}})})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsubEvents.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"event",namespace:i.Namespace.PUBSUB_EVENT,element:"event"}),r=e.define({name:"purged",namespace:i.Namespace.PUBSUB_EVENT,element:"purge",fields:{node:t.attribute("node")}}),s=e.define({name:"deleted",namespace:i.Namespace.PUBSUB_EVENT,element:"delete",fields:{node:t.attribute("node"),redirect:t.subAttribute(i.Namespace.PUBSUB_EVENT,"redirect","uri")}}),o=e.define({name:"subscriptionChanged",namespace:i.Namespace.PUBSUB_EVENT,element:"subscription",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),type:t.attribute("subscription"),subid:t.attribute("subid"),expiry:{get:function get(){var e=t.getAttribute(this.xml,"expiry");return"presence"===e?e:e?new Date(e):void 0},set:function set(e){e&&("string"!=typeof e&&(e=e.toISOString()),t.setAttribute(this.xml,"expiry",e))}}}}),a=e.define({name:"configurationChanged",namespace:i.Namespace.PUBSUB_EVENT,element:"configuration",fields:{node:t.attribute("node")}}),c=e.define({name:"updated",namespace:i.Namespace.PUBSUB_EVENT,element:"items",fields:{node:t.attribute("node"),retracted:{get:function get(){var e=[];return t.find(this.xml,i.Namespace.PUBSUB_EVENT,"retract").forEach(function(t){e.push(t.getAttribute("id"))}),e},set:function set(e){e.forEach(function(e){var n=t.createElement(i.Namespace.PUBSUB_EVENT,"retract",i.Namespace.PUBSUB_EVENT);n.setAttribute("id",e),this.xml.appendChild(n)})}}}}),u=e.define({name:"_eventItem",namespace:i.Namespace.PUBSUB_EVENT,element:"item",fields:{id:t.attribute("id"),node:t.attribute("node"),publisher:t.jidAttribute("publisher")}});e.extend(c,u,"published"),e.extend(n,c),e.extend(n,o),e.extend(n,a),e.extend(n,s),e.extend(n,r),e.extendMessage(n),e.withDataForm(function(t){e.extend(a,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/pubsubOwner.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"pubsubOwner",namespace:i.Namespace.PUBSUB_OWNER,element:"pubsub",fields:{purge:t.subAttribute(i.Namespace.PUBSUB_OWNER,"purge","node"),del:t.subAttribute(i.Namespace.PUBSUB_OWNER,"delete","node"),redirect:{get:function get(){var e=t.find(this.xml,i.Namespace.PUBSUB_OWNER,"delete");return e.length?t.getSubAttribute(e[0],i.Namespace.PUBSUB_OWNER,"redirect","uri"):""},set:function set(e){var n=t.findOrCreate(this.xml,i.Namespace.PUBSUB_OWNER,"delete");t.setSubAttribute(n,i.Namespace.PUBSUB_OWNER,"redirect","uri",e)}}}}),r=e.define({name:"subscription",namespace:i.Namespace.PUBSUB_OWNER,element:"subscription",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),subid:t.attribute("subid"),type:t.attribute("subscription"),configurable:t.boolSub("subscribe-options"),configurationRequired:{get:function get(){var e=t.find(this.xml,i.Namespace.PUBSUB_OWNER,"subscribe-options");return!!e.length&&t.getBoolSub(e[0],i.Namespace.PUBSUB_OWNER,"required")}}}}),s=e.define({name:"subscriptions",namespace:i.Namespace.PUBSUB_OWNER,element:"subscriptions",fields:{node:t.attribute("node")}}),o=e.define({name:"affiliation",namespace:i.Namespace.PUBSUB_OWNER,element:"affiliation",fields:{jid:t.jidAttribute("jid"),type:t.attribute("affiliation")}}),a=e.define({name:"affiliations",namespace:i.Namespace.PUBSUB_OWNER,element:"affiliations",fields:{node:t.attribute("node")}}),c=e.define({name:"config",namespace:i.Namespace.PUBSUB_OWNER,element:"configure",fields:{node:t.attribute("node")}});e.extend(n,c),e.extend(n,s),e.extend(n,a),e.extend(s,r,"list"),e.extend(a,o,"list"),e.extendIQ(n),e.withDataForm(function(t){e.extend(c,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/push.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"enablePush",element:"enable",namespace:i.Namespace.PUSH_0,fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")}}),r=e.define({name:"disablePush",element:"disable",namespace:i.Namespace.PUSH_0,fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")}}),s=e.define({name:"pushNotification",element:"notification",namespace:i.Namespace.PUSH_0});e.withDataForm(function(t){e.extend(s,t),e.extend(n,t)}),e.extendIQ(n),e.extendIQ(r)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/reach.js":[function(e,t,n){"use strict";var i=e("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(n,"__esModule",{value:!0});var r=e("xmpp-constants"),s=e("lodash.foreach"),o=i(s);n.default=function(e){var t=e.utils,n=e.define({name:"_reachAddr",namespace:r.Namespace.REACH_0,element:"addr",fields:{uri:t.attribute("uri"),$desc:{get:function get(){return t.getSubLangText(this.xml,r.Namespace.REACH_0,"desc",this.lang)}},desc:{get:function get(){return this.$desc[this.lang]||""},set:function set(e){t.setSubLangText(this.xml,r.Namespace.REACH_0,"desc",e,this.lang)}}}}),i={get:function get(){var e=t.find(this.xml,r.Namespace.REACH_0,"reach"),i=[];if(e.length){var s=t.find(e[0],r.Namespace.REACH_0,"addr");(0,o.default)(s,function(e){i.push(new n({},e))})}return i},set:function set(e){var i=t.findOrCreate(this.xml,r.Namespace.REACH_0,"reach");t.setAttribute(i,"xmlns",r.Namespace.REACH_0),(0,o.default)(e,function(e){var t=new n(e);i.appendChild(t.xml)})}};e.withPubsubItem(function(t){e.add(t,"reach",i)}),e.withPresence(function(t){e.add(t,"reach",i)})},t.exports=n.default},{"babel-runtime/helpers/interop-require-default":"/home/michel/stanza.io/node_modules/babel-runtime/helpers/interop-require-default.js","lodash.foreach":"/home/michel/stanza.io/node_modules/lodash.foreach/index.js","xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/references.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"reference",element:"reference",namespace:i.Namespace.REFERENCE_0,fields:{type:t.attribute("type"),begin:t.numberAttribute("begin"),end:t.numberAttribute("end"),uri:t.attribute("uri"),anchor:t.attribute("anchor")}}),r=t.multiExtension(n);e.withMessage(function(t){e.add(t,"references",r)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/register.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"register",namespace:i.Namespace.REGISTER,element:"query",fields:{instructions:t.textSub(i.Namespace.REGISTER,"instructions"),registered:t.boolSub(i.Namespace.REGISTER,"registered"),remove:t.boolSub(i.Namespace.REGISTER,"remove"),username:t.textSub(i.Namespace.REGISTER,"username"),nick:t.textSub(i.Namespace.REGISTER,"nick"),password:t.textSub(i.Namespace.REGISTER,"password"),name:t.textSub(i.Namespace.REGISTER,"name"),first:t.textSub(i.Namespace.REGISTER,"first"),last:t.textSub(i.Namespace.REGISTER,"last"),email:t.textSub(i.Namespace.REGISTER,"email"),address:t.textSub(i.Namespace.REGISTER,"address"),city:t.textSub(i.Namespace.REGISTER,"city"),state:t.textSub(i.Namespace.REGISTER,"state"),zip:t.textSub(i.Namespace.REGISTER,"zip"),phone:t.textSub(i.Namespace.REGISTER,"phone"),url:t.textSub(i.Namespace.REGISTER,"url"),date:t.textSub(i.Namespace.REGISTER,"date"),misc:t.textSub(i.Namespace.REGISTER,"misc"),text:t.textSub(i.Namespace.REGISTER,"text"),key:t.textSub(i.Namespace.REGISTER,"key")}});e.extendIQ(n),e.withDefinition("x",i.Namespace.OOB,function(t){e.extend(n,t)}),e.withDataForm(function(t){e.extend(n,t)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/roster.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"roster",namespace:i.Namespace.ROSTER,element:"query",fields:{ver:{get:function get(){return t.getAttribute(this.xml,"ver")},set:function set(e){var n=""===e;t.setAttribute(this.xml,"ver",e,n)}}}}),r=e.define({name:"_rosterItem",namespace:i.Namespace.ROSTER,element:"item",fields:{jid:t.jidAttribute("jid",!0),name:t.attribute("name"),subscription:t.attribute("subscription","none"),subscriptionRequested:{get:function get(){return"subscribe"===t.getAttribute(this.xml,"ask")}},preApproved:t.boolAttribute(i.Namespace.ROSTER,"approved"),groups:t.multiTextSub(i.Namespace.ROSTER,"group")}});e.extend(n,r,"items"),e.extendIQ(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/rsm.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils;e.define({name:"rsm",namespace:i.Namespace.RSM,element:"set",fields:{after:t.textSub(i.Namespace.RSM,"after"),before:{get:function get(){return t.getSubText(this.xml,i.Namespace.RSM,"before")},set:function set(e){!0===e?t.findOrCreate(this.xml,i.Namespace.RSM,"before"):t.setSubText(this.xml,i.Namespace.RSM,"before",e)}},count:t.numberSub(i.Namespace.RSM,"count",!1,0),first:t.textSub(i.Namespace.RSM,"first"),firstIndex:t.subAttribute(i.Namespace.RSM,"first","index"),index:t.textSub(i.Namespace.RSM,"index"),last:t.textSub(i.Namespace.RSM,"last"),max:t.textSub(i.Namespace.RSM,"max")}})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/rtp.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n={get:function get(){var e=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb"),n=[];return e.forEach(function(e){n.push({type:t.getAttribute(e,"type"),subtype:t.getAttribute(e,"subtype")})}),e=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int"),e.forEach(function(e){n.push({type:t.getAttribute(e,"type"),value:t.getAttribute(e,"value")})}),n},set:function set(e){var n=this,r=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb");r.forEach(function(e){n.xml.removeChild(e)}),r=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int"),r.forEach(function(e){n.xml.removeChild(e)}),e.forEach(function(e){var r=void 0;"trr-int"===e.type?(r=t.createElement(i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int",i.Namespace.JINGLE_RTP_1),t.setAttribute(r,"type",e.type),t.setAttribute(r,"value",e.value)):(r=t.createElement(i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb",i.Namespace.JINGLE_RTP_1),t.setAttribute(r,"type",e.type),t.setAttribute(r,"subtype",e.subtype)),n.xml.appendChild(r)})}},r=e.define({name:"bandwidth",namespace:i.Namespace.JINGLE_RTP_1,element:"bandwidth",fields:{type:t.attribute("type"),bandwidth:t.text()}}),s=e.define({name:"_rtp",namespace:i.Namespace.JINGLE_RTP_1,element:"description",tags:["jingle-application"],fields:{applicationType:{value:"rtp"},media:t.attribute("media"),ssrc:t.attribute("ssrc"),mux:t.boolSub(i.Namespace.JINGLE_RTP_1,"rtcp-mux"),encryption:{get:function get(){var e=t.find(this.xml,i.Namespace.JINGLE_RTP_1,"encryption");if(!e.length)return[];e=e[0];var n=this,r=t.find(e,i.Namespace.JINGLE_RTP_1,"crypto"),s=[];return r.forEach(function(e){s.push(new a({},e,n).toJSON())}),s},set:function set(e){var n=t.find(this.xml,i.Namespace.JINGLE_RTP_1,"encryption");if(n.length&&this.xml.removeChild(n),e.length){t.setBoolSubAttribute(this.xml,i.Namespace.JINGLE_RTP_1,"encryption","required",!0),n=t.find(this.xml,i.Namespace.JINGLE_RTP_1,"encryption")[0];var r=this;e.forEach(function(e){var t=new a(e,null,r);n.appendChild(t.xml)})}}},feedback:n,headerExtensions:{get:function get(){var e=t.find(this.xml,i.Namespace.JINGLE_RTP_HDREXT_0,"rtp-hdrext"),n=[];return e.forEach(function(e){n.push({id:t.getAttribute(e,"id"),uri:t.getAttribute(e,"uri"),senders:t.getAttribute(e,"senders")})}),n},set:function set(e){var n=this;t.find(this.xml,i.Namespace.JINGLE_RTP_HDREXT_0,"rtp-hdrext").forEach(function(e){n.xml.removeChild(e)}),e.forEach(function(e){var r=t.createElement(i.Namespace.JINGLE_RTP_HDREXT_0,"rtp-hdrext",i.Namespace.JINGLE_RTP_1);t.setAttribute(r,"id",e.id),t.setAttribute(r,"uri",e.uri),t.setAttribute(r,"senders",e.senders),n.xml.appendChild(r)})}}}}),o=e.define({name:"_payloadType",namespace:i.Namespace.JINGLE_RTP_1,element:"payload-type",fields:{channels:t.attribute("channels"),clockrate:t.attribute("clockrate"),id:t.attribute("id"),maxptime:t.attribute("maxptime"),name:t.attribute("name"),ptime:t.attribute("ptime"),feedback:n,parameters:{get:function get(){var e=[];return t.find(this.xml,i.Namespace.JINGLE_RTP_1,"parameter").forEach(function(n){e.push({key:t.getAttribute(n,"name"),value:t.getAttribute(n,"value")})}),e},set:function set(e){var n=this;e.forEach(function(e){var r=t.createElement(i.Namespace.JINGLE_RTP_1,"parameter");t.setAttribute(r,"name",e.key),t.setAttribute(r,"value",e.value),n.xml.appendChild(r)})}}}}),a=e.define({name:"crypto",namespace:i.Namespace.JINGLE_RTP_1,element:"crypto",fields:{cipherSuite:t.attribute("crypto-suite"),keyParams:t.attribute("key-params"),sessionParams:t.attribute("session-params"),tag:t.attribute("tag")}}),c=e.define({name:"_group",namespace:i.Namespace.JINGLE_GROUPING_0,element:"group",fields:{semantics:t.attribute("semantics"),contents:t.multiSubAttribute(i.Namespace.JINGLE_GROUPING_0,"content","name")}}),u=e.define({name:"_sourceGroup",namespace:i.Namespace.JINGLE_RTP_SSMA_0,element:"ssrc-group",fields:{semantics:t.attribute("semantics"),sources:t.multiSubAttribute(i.Namespace.JINGLE_RTP_SSMA_0,"source","ssrc")}}),l=e.define({name:"_source",namespace:i.Namespace.JINGLE_RTP_SSMA_0,element:"source",fields:{ssrc:t.attribute("ssrc"),parameters:{get:function get(){var e=[];return t.find(this.xml,i.Namespace.JINGLE_RTP_SSMA_0,"parameter").forEach(function(n){e.push({key:t.getAttribute(n,"name"),value:t.getAttribute(n,"value")})}),e},set:function set(e){var n=this;e.forEach(function(e){var r=t.createElement(i.Namespace.JINGLE_RTP_SSMA_0,"parameter");t.setAttribute(r,"name",e.key),t.setAttribute(r,"value",e.value),n.xml.appendChild(r)})}}}}),d=e.define({name:"mute",namespace:i.Namespace.JINGLE_RTP_INFO_1,element:"mute",fields:{creator:t.attribute("creator"),name:t.attribute("name")}}),f=e.define({name:"unmute",namespace:i.Namespace.JINGLE_RTP_INFO_1,element:"unmute",fields:{creator:t.attribute("creator"),name:t.attribute("name")}});e.extend(s,r),e.extend(s,o,"payloads"),e.extend(s,l,"sources"),e.extend(s,u,"sourceGroups"),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,s)}),e.withDefinition("jingle",i.Namespace.JINGLE_1,function(n){e.extend(n,d),e.extend(n,f),e.extend(n,c,"groups"),e.add(n,"ringing",t.boolSub(i.Namespace.JINGLE_RTP_INFO_1,"ringing")),e.add(n,"hold",t.boolSub(i.Namespace.JINGLE_RTP_INFO_1,"hold")),e.add(n,"active",t.boolSub(i.Namespace.JINGLE_RTP_INFO_1,"active"))})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/rtt.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r={insert:"t",erase:"e",wait:"w"},s={t:"insert",e:"erase",w:"wait"};n.default=function(e){var t=e.utils,n=e.define({name:"rtt",namespace:i.Namespace.RTT_0,element:"rtt",fields:{id:t.attribute("id"),event:t.attribute("event","edit"),seq:t.numberAttribute("seq"),actions:{get:function get(){for(var e=[],n=0,r=this.xml.childNodes.length;n<r;n++){var o=this.xml.childNodes[n],a=o.localName,c={};if(o.namespaceURI===i.Namespace.RTT_0&&s[a]){c.type=s[a];var u=t.getAttribute(o,"p");u&&(c.pos=parseInt(u,10));var l=t.getAttribute(o,"n");l&&(c.num=parseInt(l,10));var d=t.getText(o)
;d&&"t"===a&&(c.text=d),e.push(c)}}return e},set:function set(e){for(var n=this,s=0,o=this.xml.childNodes.length;s<o;s++)this.xml.removeChild(this.xml.childNodes[s]);e.forEach(function(e){if(r[e.type]){var s=t.createElement(i.Namespace.RTT_0,r[e.type],i.Namespace.RTT_0);void 0!==e.pos&&t.setAttribute(s,"p",e.pos.toString()),e.num&&t.setAttribute(s,"n",e.num.toString()),e.text&&t.setText(s,e.text),n.xml.appendChild(s)}})}}}});e.extendMessage(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/sasl.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["aborted","account-disabled","credentials-expired","encryption-required","incorrect-encoding","invalid-authzid","invalid-mechanism","malformed-request","mechanism-too-weak","not-authorized","temporary-auth-failure"];n.default=function(e){var t=e.utils,n=e.define({name:"sasl",namespace:i.Namespace.SASL,element:"mechanisms",fields:{mechanisms:t.multiTextSub(i.Namespace.SASL,"mechanism")}});e.define({name:"saslAuth",eventName:"sasl:auth",namespace:i.Namespace.SASL,element:"auth",topLevel:!0,fields:{value:t.text(),mechanism:t.attribute("mechanism")}}),e.define({name:"saslChallenge",eventName:"sasl:challenge",namespace:i.Namespace.SASL,element:"challenge",topLevel:!0,fields:{value:t.text()}}),e.define({name:"saslResponse",eventName:"sasl:response",namespace:i.Namespace.SASL,element:"response",topLevel:!0,fields:{value:t.text()}}),e.define({name:"saslAbort",eventName:"sasl:abort",namespace:i.Namespace.SASL,element:"abort",topLevel:!0}),e.define({name:"saslSuccess",eventName:"sasl:success",namespace:i.Namespace.SASL,element:"success",topLevel:!0,fields:{value:t.text()}}),e.define({name:"saslFailure",eventName:"sasl:failure",namespace:i.Namespace.SASL,element:"failure",topLevel:!0,fields:{lang:{get:function get(){return this._lang||""},set:function set(e){this._lang=e}},condition:t.enumSub(i.Namespace.SASL,r),$text:{get:function get(){return t.getSubLangText(this.xml,i.Namespace.SASL,"text",this.lang)}},text:{get:function get(){return this.$text[this.lang]||""},set:function set(e){t.setSubLangText(this.xml,i.Namespace.SASL,"text",e,this.lang)}}}}),e.extendStreamFeatures(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/session.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"session",namespace:i.Namespace.SESSION,element:"session",fields:{required:e.utils.boolSub(i.Namespace.SESSION,"required"),optional:e.utils.boolSub(i.Namespace.SESSION,"optional")}});e.extendIQ(t),e.extendStreamFeatures(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/shim.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n={get:function get(){var e=t.find(this.xml,i.Namespace.SHIM,"headers");return e.length?t.getMultiSubText(e[0],i.Namespace.SHIM,"header",function(e){var n=t.getAttribute(e,"name");if(n)return{name:n,value:t.getText(e)}}):[]},set:function set(n){var r=t.findOrCreate(this.xml,i.Namespace.SHIM,"headers");e.setMultiSubText(r,i.Namespace.SHIM,"header",n,function(e){var n=t.createElement(i.Namespace.SHIM,"header",i.Namespace.SHIM);t.setAttribute(n,"name",e.name),t.setText(n,e.value),r.appendChild(n)})}};e.withMessage(function(t){e.add(t,"headers",n)}),e.withPresence(function(t){e.add(t,"headers",n)})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/sm.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"streamManagement",namespace:i.Namespace.SMACKS_3,element:"sm"});e.define({name:"smEnable",eventName:"stream:management:enable",namespace:i.Namespace.SMACKS_3,element:"enable",topLevel:!0,fields:{resume:t.boolAttribute("resume")}}),e.define({name:"smEnabled",eventName:"stream:management:enabled",namespace:i.Namespace.SMACKS_3,element:"enabled",topLevel:!0,fields:{id:t.attribute("id"),resume:t.boolAttribute("resume")}}),e.define({name:"smResume",eventName:"stream:management:resume",namespace:i.Namespace.SMACKS_3,element:"resume",topLevel:!0,fields:{h:t.numberAttribute("h",!1,0),previd:t.attribute("previd")}}),e.define({name:"smResumed",eventName:"stream:management:resumed",namespace:i.Namespace.SMACKS_3,element:"resumed",topLevel:!0,fields:{h:t.numberAttribute("h",!1,0),previd:t.attribute("previd")}}),e.define({name:"smFailed",eventName:"stream:management:failed",namespace:i.Namespace.SMACKS_3,element:"failed",topLevel:!0}),e.define({name:"smAck",eventName:"stream:management:ack",namespace:i.Namespace.SMACKS_3,element:"a",topLevel:!0,fields:{h:t.numberAttribute("h",!1,0)}}),e.define({name:"smRequest",eventName:"stream:management:request",namespace:i.Namespace.SMACKS_3,element:"r",topLevel:!0}),e.extendStreamFeatures(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/stream.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils;e.define({name:"stream",namespace:i.Namespace.STREAM,element:"stream",fields:{lang:t.langAttribute(),id:t.attribute("id"),version:t.attribute("version","1.0"),to:t.jidAttribute("to",!0),from:t.jidAttribute("from",!0)}})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/streamError.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants"),r=["bad-format","bad-namespace-prefix","conflict","connection-timeout","host-gone","host-unknown","improper-addressing","internal-server-error","invalid-from","invalid-namespace","invalid-xml","not-authorized","not-well-formed","policy-violation","remote-connection-failed","reset","resource-constraint","restricted-xml","see-other-host","system-shutdown","undefined-condition","unsupported-encoding","unsupported-feature","unsupported-stanza-type","unsupported-version"];n.default=function(e){var t=e.utils;e.define({name:"streamError",namespace:i.Namespace.STREAM,element:"error",topLevel:!0,fields:{lang:{get:function get(){return this._lang||""},set:function set(e){this._lang=e}},condition:t.enumSub(i.Namespace.STREAM_ERROR,r),seeOtherHost:{get:function get(){return t.getSubText(this.xml,i.Namespace.STREAM_ERROR,"see-other-host")},set:function set(e){this.condition="see-other-host",t.setSubText(this.xml,i.Namespace.STREAM_ERROR,"see-other-host",e)}},$text:{get:function get(){return t.getSubLangText(this.xml,i.Namespace.STREAM_ERROR,"text",this.lang)}},text:{get:function get(){return this.$text[this.lang]||""},set:function set(e){t.setSubLangText(this.xml,i.Namespace.STREAM_ERROR,"text",e,this.lang)}}}})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/streamFeatures.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=(e.define({name:"streamFeatures",namespace:i.Namespace.STREAM,element:"features",topLevel:!0}),e.define({name:"rosterVersioning",namespace:i.Namespace.ROSTER_VERSIONING,element:"ver"})),n=e.define({name:"subscriptionPreApproval",namespace:i.Namespace.SUBSCRIPTION_PREAPPROVAL,element:"sub"});e.extendStreamFeatures(t),e.extendStreamFeatures(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/time.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"time",namespace:i.Namespace.TIME,element:"time",fields:{utc:e.utils.dateSub(i.Namespace.TIME,"utc"),tzo:e.utils.tzoSub(i.Namespace.TIME,"tzo",0)}});e.extendIQ(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/tune.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"tune",namespace:i.Namespace.TUNE,element:"tune",fields:{artist:t.textSub(i.Namespace.TUNE,"artist"),length:t.numberSub(i.Namespace.TUNE,"length"),rating:t.numberSub(i.Namespace.TUNE,"rating"),source:t.textSub(i.Namespace.TUNE,"source"),title:t.textSub(i.Namespace.TUNE,"title"),track:t.textSub(i.Namespace.TUNE,"track"),uri:t.textSub(i.Namespace.TUNE,"uri")}});e.extendPubsubItem(n),e.extendMessage(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/vcard.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.utils,n=e.define({name:"vCardTemp",namespace:i.Namespace.VCARD_TEMP,element:"vCard",fields:{role:t.textSub(i.Namespace.VCARD_TEMP,"ROLE"),website:t.textSub(i.Namespace.VCARD_TEMP,"URL"),title:t.textSub(i.Namespace.VCARD_TEMP,"TITLE"),description:t.textSub(i.Namespace.VCARD_TEMP,"DESC"),fullName:t.textSub(i.Namespace.VCARD_TEMP,"FN"),birthday:t.dateSub(i.Namespace.VCARD_TEMP,"BDAY"),nicknames:t.multiTextSub(i.Namespace.VCARD_TEMP,"NICKNAME"),jids:t.multiTextSub(i.Namespace.VCARD_TEMP,"JABBERID")}}),r=e.define({name:"_email",namespace:i.Namespace.VCARD_TEMP,element:"EMAIL",fields:{email:t.textSub(i.Namespace.VCARD_TEMP,"USERID"),home:t.boolSub(i.Namespace.VCARD_TEMP,"HOME"),work:t.boolSub(i.Namespace.VCARD_TEMP,"WORK"),preferred:t.boolSub(i.Namespace.VCARD_TEMP,"PREF")}}),s=e.define({name:"_tel",namespace:i.Namespace.VCARD_TEMP,element:"TEL",fields:{number:t.textSub(i.Namespace.VCARD_TEMP,"NUMBER"),home:t.boolSub(i.Namespace.VCARD_TEMP,"HOME"),work:t.boolSub(i.Namespace.VCARD_TEMP,"WORK"),mobile:t.boolSub(i.Namespace.VCARD_TEMP,"CELL"),preferred:t.boolSub(i.Namespace.VCARD_TEMP,"PREF")}}),o=e.define({name:"_address",namespace:i.Namespace.VCARD_TEMP,element:"ADR",fields:{street:t.textSub(i.Namespace.VCARD_TEMP,"STREET"),street2:t.textSub(i.Namespace.VCARD_TEMP,"EXTADD"),country:t.textSub(i.Namespace.VCARD_TEMP,"CTRY"),city:t.textSub(i.Namespace.VCARD_TEMP,"LOCALITY"),region:t.textSub(i.Namespace.VCARD_TEMP,"REGION"),postalCode:t.textSub(i.Namespace.VCARD_TEMP,"PCODE"),pobox:t.textSub(i.Namespace.VCARD_TEMP,"POBOX"),home:t.boolSub(i.Namespace.VCARD_TEMP,"HOME"),work:t.boolSub(i.Namespace.VCARD_TEMP,"WORK"),preferred:t.boolSub(i.Namespace.VCARD_TEMP,"PREF")}}),a=e.define({name:"organization",namespace:i.Namespace.VCARD_TEMP,element:"ORG",fields:{name:t.textSub(i.Namespace.VCARD_TEMP,"ORGNAME"),unit:t.textSub(i.Namespace.VCARD_TEMP,"ORGUNIT")}}),c=e.define({name:"name",namespace:i.Namespace.VCARD_TEMP,element:"N",fields:{family:t.textSub(i.Namespace.VCARD_TEMP,"FAMILY"),given:t.textSub(i.Namespace.VCARD_TEMP,"GIVEN"),middle:t.textSub(i.Namespace.VCARD_TEMP,"MIDDLE"),prefix:t.textSub(i.Namespace.VCARD_TEMP,"PREFIX"),suffix:t.textSub(i.Namespace.VCARD_TEMP,"SUFFIX")}}),u=e.define({name:"photo",namespace:i.Namespace.VCARD_TEMP,element:"PHOTO",fields:{type:t.textSub(i.Namespace.VCARD_TEMP,"TYPE"),data:t.textSub(i.Namespace.VCARD_TEMP,"BINVAL"),url:t.textSub(i.Namespace.VCARD_TEMP,"EXTVAL")}});e.extend(n,r,"emails"),e.extend(n,o,"addresses"),e.extend(n,s,"phoneNumbers"),e.extend(n,a),e.extend(n,c),e.extend(n,u),e.extendIQ(n)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/version.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){var t=e.define({name:"version",namespace:i.Namespace.VERSION,element:"query",fields:{name:e.utils.textSub(i.Namespace.VERSION,"name"),version:e.utils.textSub(i.Namespace.VERSION,"version"),os:e.utils.textSub(i.Namespace.VERSION,"os")}});e.extendIQ(t)},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt-xmpp/lib/visibility.js":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("xmpp-constants");n.default=function(e){e.withIQ(function(t){e.add(t,"visible",e.utils.boolSub(i.Namespace.INVISIBLE_0,"visible")),e.add(t,"invisible",e.utils.boolSub(i.Namespace.INVISIBLE_0,"invisible"))})},t.exports=n.default},{"xmpp-constants":"/home/michel/stanza.io/node_modules/xmpp-constants/index.js"}],"/home/michel/stanza.io/node_modules/jxt/index.js":[function(e,t,n){"use strict";function JXT(){this._LOOKUP={},this._LOOKUP_EXT={},this._TAGS={},this._CB_DEFINITION={},this._CB_TAG={},this._ID=r.v4(),this.utils=i({},s,o)}var i=e("lodash.assign"),r=e("uuid"),s=e("./lib/types"),o=e("./lib/helpers"),a=e("./lib/stanza");JXT.prototype.use=function(e){return e&&"function"==typeof e?(e["__JXT_LOADED_"+this._ID]||(e(this),e["__JXT_LOADED_"+this._ID]=!0),this):this},JXT.prototype.getDefinition=function(e,t,n){var i=this._LOOKUP[t+"|"+e];if(n&&!i)throw new Error("Could not find definition for <"+e+' xmlns="'+t+'" />');return i},JXT.prototype.getExtensions=function(e,t){return this._LOOKUP_EXT[t+"|"+e]||{}},JXT.prototype.withDefinition=function(e,t,n){var i=t+"|"+e;this._CB_DEFINITION[i]||(this._CB_DEFINITION[i]=[]),this._CB_DEFINITION[i].push(n),this._LOOKUP[i]&&n(this._LOOKUP[i])},JXT.prototype.withTag=function(e,t){this._CB_TAG[e]||(this._CB_TAG[e]=[]),this._CB_TAG[e].push(t),this.tagged(e).forEach(function(e){t(e)})},JXT.prototype.tagged=function(e){return this._TAGS[e]||[]},JXT.prototype.build=function(e){var t=this.getDefinition(e.localName,e.namespaceURI);if(t)return new t(null,e)},JXT.prototype.parse=function(e){var t=o.parse(e);if(t)return this.build(t)},JXT.prototype.extend=function(e,t,n,i){var r=e.prototype._NS+"|"+e.prototype._EL,o=t.prototype._name,a=t.prototype._NS+"|"+t.prototype._EL;this._LOOKUP[a]=t,this._LOOKUP_EXT[a]||(this._LOOKUP_EXT[a]={}),this._LOOKUP_EXT[r]||(this._LOOKUP_EXT[r]={}),this._LOOKUP_EXT[r][o]=t,(!n||n&&!i)&&this.add(e,o,s.extension(t)),n&&this.add(e,n,s.multiExtension(t))},JXT.prototype.add=function(e,t,n){n.enumerable=!0,Object.defineProperty(e.prototype,t,n)},JXT.prototype.define=function(e){var t=this,n=a(this,e),i=n.prototype._NS,r=n.prototype._EL,s=n.prototype._TAGS,o=i+"|"+r;return this._LOOKUP[o]=n,s.forEach(function(e){t._TAGS[e]||(t._TAGS[e]=[]),t._TAGS[e].push(n)}),Object.keys(e.fields||{}).forEach(function(i){t.add(n,i,e.fields[i])}),this._CB_DEFINITION[o]&&this._CB_DEFINITION[o].forEach(function(e){e(n)}),s.forEach(function(e){t._CB_TAG[e]&&t._CB_TAG[e].forEach(function(e){e(n)})}),n},JXT.createRegistry=function(){return new JXT},i(JXT,o),i(JXT,s);var c=new JXT;JXT.define=c.define.bind(c),JXT.extend=c.extend.bind(c),JXT.add=c.add.bind(c),JXT.parse=c.parse.bind(c),JXT.build=c.build.bind(c),JXT.getExtensions=c.getExtensions.bind(c),JXT.getDefinition=c.getDefinition.bind(c),JXT.withDefinition=c.withDefinition.bind(c),JXT.withTag=c.withTag.bind(c),JXT.tagged=c.tagged.bind(c),JXT.getGlobalJXT=function(){return c},t.exports=JXT},{"./lib/helpers":"/home/michel/stanza.io/node_modules/jxt/lib/helpers.js","./lib/stanza":"/home/michel/stanza.io/node_modules/jxt/lib/stanza.js","./lib/types":"/home/michel/stanza.io/node_modules/jxt/lib/types.js","lodash.assign":"/home/michel/stanza.io/node_modules/lodash.assign/index.js",uuid:"/home/michel/stanza.io/node_modules/uuid/index.js"}],"/home/michel/stanza.io/node_modules/jxt/lib/helpers.js":[function(e,t,n){"use strict";var i=e("ltx"),r=e("ltx/lib/DOMElement"),s=n.XML_NS="http://www.w3.org/XML/1998/namespace";n.parse=function(e){var t=i.parse(e,{Element:r});if(1===t.nodeType)return t},n.createElement=function(e,t,i){var s=new r(t);return i&&i===e||n.setAttribute(s,"xmlns",e),s};var o=n.find=function(e,t,n){for(var i=[],r=e.getElementsByTagName(n),s=0,o=r.length;s<o;s++){var a=r[s];a.namespaceURI===t&&a.parentNode===e&&i.push(a)}return i};n.findOrCreate=function(e,t,i){var r=n.find(e,t,i);if(r.length)return r[0];var s=n.createElement(t,i,e.namespaceURI);return e.appendChild(s),s},n.getAttribute=function(e,t,n){return e.getAttribute(t)||n||""},n.getAttributeNS=function(e,t,n,i){return e.getAttributeNS(t,n)||i||""},n.setAttribute=function(e,t,n,i){n||i?e.setAttribute(t,n):e.removeAttribute(t)},n.setAttributeNS=function(e,t,n,i,r){i||r?e.setAttributeNS(t,n,i):e.removeAttributeNS(t,n)},n.getBoolAttribute=function(e,t,n){var i=e.getAttribute(t)||n||"";return"true"===i||"1"===i},n.setBoolAttribute=function(e,t,n){n?e.setAttribute(t,"1"):e.removeAttribute(t)},n.getSubAttribute=function(e,t,n,i,r){var s=o(e,t,n);if(!s)return"";for(var a=0;a<s.length;a++)return s[a].getAttribute(i)||r||"";return""},n.setSubAttribute=function(e,t,i,r,s){var a=o(e,t,i);if(a.length)for(var c=0;c<a.length;c++){if(s)return void a[c].setAttribute(r,s);a[c].removeAttribute(r)}else s&&(i=n.createElement(t,i,e.namespaceURI),i.setAttribute(r,s),e.appendChild(i))},n.getBoolSubAttribute=function(e,t,n,i,r){var s=e.getSubAttribute(t,n,i)||r||"";return"true"===s||"1"===s},n.setBoolSubAttribute=function(e,t,i,r,s){s=s?"1":"",n.setSubAttribute(e,t,i,r,s)},n.getText=function(e){return e.textContent},n.setText=function(e,t){e.textContent=t},n.getSubText=n.getTextSub=function(e,t,n,i){var r=o(e,t,n);return i=i||"",r.length?r[0].textContent||i:i},n.setSubText=n.setTextSub=function(e,t,i,r){var s=o(e,t,i);if(s.length)for(var a=0;a<s.length;a++)e.removeChild(s[a]);if(r){var c=n.createElement(t,i,e.namespaceURI);!0!==r&&(c.textContent=r),e.appendChild(c)}},n.getMultiSubText=function(e,t,n,i){var r=o(e,t,n),s=[];i=i||function(e){return e.textContent||""};for(var a=0;a<r.length;a++)s.push(i(r[a]));return s},n.setMultiSubText=function(e,t,i,r,s){var a=o(e,t,i),c=[];s=s||function(r){if(r){var s=n.createElement(t,i,e.namespaceURI);s.textContent=r,e.appendChild(s)}},c="string"==typeof r?(r||"").split("\n"):r;var u,l;for(u=0,l=a.length;u<l;u++)e.removeChild(a[u]);for(u=0,l=c.length;u<l;u++)s(c[u])},n.getMultiSubAttribute=function(e,t,i,r){return n.getMultiSubText(e,t,i,function(e){return n.getAttribute(e,r)})},n.setMultiSubAttribute=function(e,t,i,r,s){n.setMultiSubText(e,t,i,s,function(s){var o=n.createElement(t,i,e.namespaceURI);n.setAttribute(o,r,s),e.appendChild(o)})},n.getSubLangText=function(e,t,n,i){var r=o(e,t,n);if(!r.length)return{};for(var a,c,u={},l=[],d=0;d<r.length;d++)c=r[d],a=c.getAttributeNS(s,"lang")||i,l.push(a),u[a]=c.textContent||"";return u},n.setSubLangText=function(e,t,i,r,a){var c,u,l=o(e,t,i);if(l.length)for(var d=0;d<l.length;d++)e.removeChild(l[d]);if("string"==typeof r)c=n.createElement(t,i,e.namespaceURI),c.textContent=r,e.appendChild(c);else if("object"==typeof r)for(u in r)r.hasOwnProperty(u)&&(c=n.createElement(t,i,e.namespaceURI),u!==a&&c.setAttributeNS(s,"lang",u),c.textContent=r[u],e.appendChild(c))},n.getBoolSub=function(e,t,n){return!!o(e,t,n).length},n.setBoolSub=function(e,t,i,r){var s=o(e,t,i);if(s.length)for(var a=0;a<s.length;a++){if(r)return;e.removeChild(s[a])}else if(r){var c=n.createElement(t,i,e.namespaceURI);e.appendChild(c)}}},{ltx:"/home/michel/stanza.io/node_modules/ltx/index.js","ltx/lib/DOMElement":"/home/michel/stanza.io/node_modules/ltx/lib/DOMElement.js"}],"/home/michel/stanza.io/node_modules/jxt/lib/stanza.js":[function(e,t,n){"use strict";var i=e("./helpers"),r=e("lodash.assign"),s={constructor:!0,parent:!0,prototype:!0,toJSON:!0,toString:!0,xml:!0};t.exports=function(e,t){function Stanza(n,s,o){var a=this,c=(s||{}).parentNode||(o||{}).xml,u=(c||{}).namespaceURI;a.xml=s||i.createElement(a._NS,a._EL,u),Object.keys(a._PREFIXES).forEach(function(e){var t=a._PREFIXES[e];a.xml.setAttribute("xmlns:"+e,t)}),a._extensions={};for(var l=0,d=a.xml.childNodes.length;l<d;l++){var f=a.xml.childNodes[l],h=e.getDefinition(f.localName,f.namespaceURI);if(void 0!==h){var m=h.prototype._name;a._extensions[m]=new h(null,f),a._extensions[m].parent=a}}return r(a,n),t.init&&t.init.apply(a,[n]),a}return Stanza.prototype._isJXT=!0,Stanza.prototype._name=t.name,Stanza.prototype._eventname=t.eventName,Stanza.prototype._NS=t.namespace,Stanza.prototype._EL=t.element||t.name,Stanza.prototype._PREFIXES=t.prefixes||{},Stanza.prototype._TAGS=t.tags||[],Stanza.prototype.toString=function(){return this.xml.toString()},Stanza.prototype.toJSON=function(){var t,n={};for(t in this._extensions)this._extensions[t].toJSON&&"_"!==t[0]&&(n[t]=this._extensions[t].toJSON());for(t in this){var i=!s[t]&&"_"!==t[0],r=e.getExtensions(this._EL,this._NS)[t];if(i&&!r){var o=this[t];if("function"==typeof o)continue;var a=Object.prototype.toString.call(o);if(a.indexOf("Object")>=0)Object.keys(o).length>0&&(o._isJXT?n[t]=o.toJSON():n[t]=o);else if(a.indexOf("Array")>=0){if(o.length>0){for(var c=[],u=o.length,l=0;l<u;l++){var d=o[l];void 0!==d&&(d._isJXT?c.push(d.toJSON()):c.push(d))}n[t]=c}}else void 0!==o&&!1!==o&&""!==o&&(n[t]=o)}}return n},Stanza}},{"./helpers":"/home/michel/stanza.io/node_modules/jxt/lib/helpers.js","lodash.assign":"/home/michel/stanza.io/node_modules/lodash.assign/index.js"}],"/home/michel/stanza.io/node_modules/jxt/lib/types.js":[function(e,t,n){(function(t){"use strict";var i=e("./helpers"),r=e("lodash.assign"),s=i.find,o=i.createElement,a=n.field=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return{get:function(){return e.apply(null,[this.xml].concat(n))},set:function(e){t.apply(null,[this.xml].concat(n).concat([e]))}}}};n.boolAttribute=a(i.getBoolAttribute,i.setBoolAttribute),n.subAttribute=a(i.getSubAttribute,i.setSubAttribute),n.boolSubAttribute=a(i.getSubBoolAttribute,i.setSubBoolAttribute),n.text=a(i.getText,i.setText),n.textSub=n.subText=a(i.getSubText,i.setSubText),n.multiTextSub=n.multiSubText=a(i.getMultiSubText,i.setMultiSubText),n.multiSubAttribute=a(i.getMultiSubAttribute,i.setMultiSubAttribute),n.langTextSub=n.subLangText=a(i.getSubLangText,i.setSubLangText),n.boolSub=a(i.getBoolSub,i.setBoolSub),n.langAttribute=a(function(e){return e.getAttributeNS(i.XML_NS,"lang")||""},function(e,t){e.setAttributeNS(i.XML_NS,"lang",t)}),n.b64Text=a(function(e){return e.textContent&&"="!==e.textContent?new t(e.textContent,"base64"):""},function(e,n){if("string"==typeof n){var i=new t(n).toString("base64");e.textContent=i||"="}else e.textContent=""}),n.dateAttribute=function(e,t){return{get:function(){var n=i.getAttribute(this.xml,e);return n?new Date(n):t?new Date(Date.now()):void 0},set:function(t){t&&("string"!=typeof t&&(t=t.toISOString()),i.setAttribute(this.xml,e,t))}}},n.dateSub=function(e,t,n){return{get:function(){var r=i.getSubText(this.xml,e,t);return r?new Date(r):n?new Date(Date.now()):void 0},set:function(n){n&&("string"!=typeof n&&(n=n.toISOString()),i.setSubText(this.xml,e,t,n))}}},n.dateSubAttribute=function(e,t,n,r){return{get:function(){var s=i.getSubAttribute(this.xml,e,t,n);return s?new Date(s):r?new Date(Date.now()):void 0},set:function(r){r&&("string"!=typeof r&&(r=r.toISOString()),i.setSubAttribute(this.xml,e,t,n,r))}}},n.numberAttribute=function(e,t,n){return{get:function(){var r=t?parseFloat:parseInt,s=i.getAttribute(this.xml,e,"");if(!s)return n;var o=r(s,10);return isNaN(o)?n:o},set:function(t){i.setAttribute(this.xml,e,t.toString())}}},n.numberSub=function(e,t,n,r){return{get:function(){var s=n?parseFloat:parseInt,o=i.getSubText(this.xml,e,t,"");if(!o)return r;var a=s(o,10);return isNaN(a)?r:a},set:function(n){i.setSubText(this.xml,e,t,n.toString())}}},n.attribute=function(e,t){return{get:function(){return i.getAttribute(this.xml,e,t)},set:function(t){i.setAttribute(this.xml,e,t)}}},n.attributeNS=function(e,t,n){return{get:function(){return i.getAttributeNS(this.xml,e,t,n)},set:function(n){i.setAttributeNS(this.xml,e,t,n)}}},n.extension=function(e){return{get:function(){var t=this,n=e.prototype._name;if(!this._extensions[n]){var i=s(this.xml,e.prototype._NS,e.prototype._EL);i.length?this._extensions[n]=new e(null,i[0],t):(this._extensions[n]=new e({},null,t),this.xml.appendChild(this._extensions[n].xml)),this._extensions[n].parent=this}return this._extensions[n]},set:function(t){if(t){var n=this[e.prototype._name];!0===t&&(t={}),r(n,t)}}}},n.multiExtension=function(e){return{get:function(){for(var t=this,n=s(this.xml,e.prototype._NS,e.prototype._EL),i=[],r=0,o=n.length;r<o;r++)i.push(new e({},n[r],t));return i},set:function(t){t=t||[];var n,i,r=this,o=s(this.xml,e.prototype._NS,e.prototype._EL);for(n=0,i=o.length;n<i;n++)r.xml.removeChild(o[n]);for(n=0,i=t.length;n<i;n++){var a=new e(t[n],null,r);r.xml.appendChild(a.xml)}}}},n.enumSub=function(e,t){return{get:function(){var n=this,i=[];return t.forEach(function(t){var r=s(n.xml,e,t);r.length&&i.push(r[0].nodeName)}),i[0]||""},set:function(n){var i=this,r=!1;if(t.forEach(function(t){var o=s(i.xml,e,t);o.length&&(t===n?r=!0:i.xml.removeChild(o[0]))}),n&&!r){var a=o(e,n);this.xml.appendChild(a)}}}},n.subExtension=function(e,t,n,i){return{get:function(){if(!this._extensions[e]){var r=s(this.xml,t,n);r.length?r=r[0]:(r=o(t,n,this._NS),this.xml.appendChild(r));var a=s(r,i.prototype._NS,i.prototype._EL);a.length?this._extensions[e]=new i(null,a[0],{xml:r}):(this._extensions[e]=new i({},null,{xml:r}),r.appendChild(this._extensions[e].xml)),this._extensions[e].parent=this}return this._extensions[e]},set:function(i){var o=s(this.xml,t,n);if(o.length&&!i&&this.xml.removeChild(o[0]),i){var a=this[e];!0===i&&(i={}),r(a,i)}}}},n.subMultiExtension=function(e,t,n){return{get:function(){var i=this,r=[],o=s(this.xml,e,t);return o.length?(o=o[0],s(o,n.prototype._NS,n.prototype._EL).forEach(function(e){r.push(new n({},e,i))}),r):r},set:function(i){var r=this,a=s(this.xml,e,t);a.length&&r.xml.removeChild(a[0]),i.length&&(a=o(e,t,this._NS),i.forEach(function(t){var i=new n(t,null,{xml:{namespaceURI:e}});a.appendChild(i.xml)}),r.xml.appendChild(a))}}}}).call(this,e("buffer").Buffer)},{"./helpers":"/home/michel/stanza.io/node_modules/jxt/lib/helpers.js",buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","lodash.assign":"/home/michel/stanza.io/node_modules/lodash.assign/index.js"}],"/home/michel/stanza.io/node_modules/lodash._arrayeach/index.js":[function(e,t,n){function arrayEach(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}t.exports=arrayEach},{}],"/home/michel/stanza.io/node_modules/lodash._arrayfilter/index.js":[function(e,t,n){function arrayFilter(e,t){for(var n=-1,i=e.length,r=-1,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[++r]=o)}return s}t.exports=arrayFilter},{}],"/home/michel/stanza.io/node_modules/lodash._baseassign/index.js":[function(e,t,n){function baseAssign(e,t){return null==t?e:i(t,r(t),e)}var i=e("lodash._basecopy"),r=e("lodash.keys");t.exports=baseAssign},{"lodash._basecopy":"/home/michel/stanza.io/node_modules/lodash._basecopy/index.js","lodash.keys":"/home/michel/stanza.io/node_modules/lodash.keys/index.js"}],"/home/michel/stanza.io/node_modules/lodash._basecallback/index.js":[function(e,t,n){function baseToString(e){return null==e?"":e+""}function baseCallback(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:r(e,t,n):null==e?identity:"object"==i?baseMatches(e):void 0===t?property(e):baseMatchesProperty(e,t)}function baseGet(e,t,n){if(null!=e){void 0!==n&&n in toObject(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&i<r;)e=e[t[i++]];return i&&i==r?e:void 0}}function baseIsMatch(e,t,n){var r=t.length,s=r,o=!n;if(null==e)return!s;for(e=toObject(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<s;){a=t[r];var c=a[0],u=e[c],l=a[1];if(o&&a[2]){if(void 0===u&&!(c in e))return!1}else{var d=n?n(u,l,c):void 0;if(!(void 0===d?i(l,u,n,!0):d))return!1}}return!0}function baseMatches(e){var t=getMatchData(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&(e[n]===i&&(void 0!==i||n in toObject(e)))}}return function(e){return baseIsMatch(e,t)}}function baseMatchesProperty(e,t){var n=s(e),r=isKey(e)&&isStrictComparable(t),o=e+"";return e=toPath(e),function(s){if(null==s)return!1;var a=o;if(s=toObject(s),(n||!r)&&!(a in s)){if(null==(s=1==e.length?s:baseGet(s,baseSlice(e,0,-1))))return!1;a=last(e),s=toObject(s)}return s[a]===t?void 0!==t||a in s:i(t,s[a],void 0,!0)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){var t=e+"";return e=toPath(e),function(n){return baseGet(n,e,t)}}function baseSlice(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,t<0&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}function getMatchData(e){for(var t=o(e),n=t.length;n--;)t[n][2]=isStrictComparable(t[n][1]);return t}function isKey(e,t){var n=typeof e;return!!("string"==n&&c.test(e)||"number"==n)||!s(e)&&(!a.test(e)||null!=t&&e in toObject(t))}function isStrictComparable(e){return e===e&&!isObject(e)}function toObject(e){return isObject(e)?e:Object(e)}function toPath(e){if(s(e))return e;var t=[];return baseToString(e).replace(u,function(e,n,i,r){t.push(i?r.replace(l,"$1"):n||e)}),t}function last(e){var t=e?e.length:0;return t?e[t-1]:void 0}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function identity(e){return e}function property(e){return isKey(e)?baseProperty(e):basePropertyDeep(e)}var i=e("lodash._baseisequal"),r=e("lodash._bindcallback"),s=e("lodash.isarray"),o=e("lodash.pairs"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,l=/\\(\\)?/g;t.exports=baseCallback},{"lodash._baseisequal":"/home/michel/stanza.io/node_modules/lodash._baseisequal/index.js","lodash._bindcallback":"/home/michel/stanza.io/node_modules/lodash._bindcallback/index.js","lodash.isarray":"/home/michel/stanza.io/node_modules/lodash.isarray/index.js","lodash.pairs":"/home/michel/stanza.io/node_modules/lodash.pairs/index.js"}],"/home/michel/stanza.io/node_modules/lodash._basecopy/index.js":[function(e,t,n){function baseCopy(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var s=t[i];n[s]=e[s]}return n}t.exports=baseCopy},{}],"/home/michel/stanza.io/node_modules/lodash._baseeach/index.js":[function(e,t,n){function baseForOwn(e,t){return o(e,t,i)}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function toObject(e){return isObject(e)?e:Object(e)}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=e("lodash.keys"),r=9007199254740991,s=function createBaseEach(e,t){return function(n,i){var r=n?a(n):0;if(!isLength(r))return e(n,i);for(var s=t?r:-1,o=toObject(n);(t?s--:++s<r)&&!1!==i(o[s],s,o););return n}}(baseForOwn),o=function createBaseFor(e){return function(t,n,i){for(var r=toObject(t),s=i(t),o=s.length,a=e?o:-1;e?a--:++a<o;){var c=s[a];if(!1===n(r[c],c,r))break}return t}}(),a=function baseProperty(e){return function(t){return null==t?void 0:t[e]}}("length");t.exports=s},{"lodash.keys":"/home/michel/stanza.io/node_modules/lodash.keys/index.js"}],"/home/michel/stanza.io/node_modules/lodash._basefilter/index.js":[function(e,t,n){function baseFilter(e,t){var n=[];return i(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}var i=e("lodash._baseeach");t.exports=baseFilter},{"lodash._baseeach":"/home/michel/stanza.io/node_modules/lodash._baseeach/index.js"}],"/home/michel/stanza.io/node_modules/lodash._baseindexof/index.js":[function(e,t,n){
function baseIndexOf(e,t,n){if(t!==t)return indexOfNaN(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function indexOfNaN(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var s=e[r];if(s!==s)return r}return-1}t.exports=baseIndexOf},{}],"/home/michel/stanza.io/node_modules/lodash._baseisequal/index.js":[function(e,t,n){function isObjectLike(e){return!!e&&"object"==typeof e}function arraySome(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function baseIsEqual(e,t,n,i,r,s){return e===t||(null==e||null==t||!isObject(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,baseIsEqual,n,i,r,s))}function baseIsEqualDeep(e,t,n,s,c,u,l){var d=i(e),h=i(t),m=a,p=a;d||(m=g.call(e),m==o?m=f:m!=f&&(d=r(e))),h||(p=g.call(t),p==o?p=f:p!=f&&(h=r(t)));var _=m==f,y=p==f,v=m==p;if(v&&!d&&!_)return equalByTag(e,t,m);if(!c){var x=_&&b.call(e,"__wrapped__"),j=y&&b.call(t,"__wrapped__");if(x||j)return n(x?e.value():e,j?t.value():t,s,c,u,l)}if(!v)return!1;u||(u=[]),l||(l=[]);for(var S=u.length;S--;)if(u[S]==e)return l[S]==t;u.push(e),l.push(t);var w=(d?equalArrays:equalObjects)(e,t,n,s,c,u,l);return u.pop(),l.pop(),w}function equalArrays(e,t,n,i,r,s,o){var a=-1,c=e.length,u=t.length;if(c!=u&&!(r&&u>c))return!1;for(;++a<c;){var l=e[a],d=t[a],f=i?i(r?d:l,r?l:d,a):void 0;if(void 0!==f){if(f)continue;return!1}if(r){if(!arraySome(t,function(e){return l===e||n(l,e,i,r,s,o)}))return!1}else if(l!==d&&!n(l,d,i,r,s,o))return!1}return!0}function equalByTag(e,t,n){switch(n){case c:case u:return+e==+t;case l:return e.name==t.name&&e.message==t.message;case d:return e!=+e?t!=+t:e==+t;case h:case m:return e==t+""}return!1}function equalObjects(e,t,n,i,r,o,a){var c=s(e),u=c.length;if(u!=s(t).length&&!r)return!1;for(var l=u;l--;){var d=c[l];if(!(r?d in t:b.call(t,d)))return!1}for(var f=r;++l<u;){d=c[l];var h=e[d],m=t[d],p=i?i(r?m:h,r?h:m,d):void 0;if(!(void 0===p?n(h,m,i,r,o,a):p))return!1;f||(f="constructor"==d)}if(!f){var g=e.constructor,_=t.constructor;if(g!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _))return!1}return!0}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=e("lodash.isarray"),r=e("lodash.istypedarray"),s=e("lodash.keys"),o="[object Arguments]",a="[object Array]",c="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Number]",f="[object Object]",h="[object RegExp]",m="[object String]",p=Object.prototype,b=p.hasOwnProperty,g=p.toString;t.exports=baseIsEqual},{"lodash.isarray":"/home/michel/stanza.io/node_modules/lodash.isarray/index.js","lodash.istypedarray":"/home/michel/stanza.io/node_modules/lodash.istypedarray/index.js","lodash.keys":"/home/michel/stanza.io/node_modules/lodash.keys/index.js"}],"/home/michel/stanza.io/node_modules/lodash._baseuniq/index.js":[function(e,t,n){function baseUniq(e,t){var n=-1,a=i,c=e.length,u=!0,l=u&&c>=o,d=l?s():null,f=[];d?(a=r,u=!1):(l=!1,d=t?[]:f);e:for(;++n<c;){var h=e[n],m=t?t(h,n,e):h;if(u&&h===h){for(var p=d.length;p--;)if(d[p]===m)continue e;t&&d.push(m),f.push(h)}else a(d,m,0)<0&&((t||l)&&d.push(m),f.push(h))}return f}var i=e("lodash._baseindexof"),r=e("lodash._cacheindexof"),s=e("lodash._createcache"),o=200;t.exports=baseUniq},{"lodash._baseindexof":"/home/michel/stanza.io/node_modules/lodash._baseindexof/index.js","lodash._cacheindexof":"/home/michel/stanza.io/node_modules/lodash._cacheindexof/index.js","lodash._createcache":"/home/michel/stanza.io/node_modules/lodash._createcache/index.js"}],"/home/michel/stanza.io/node_modules/lodash._bindcallback/index.js":[function(e,t,n){function bindCallback(e,t,n){if("function"!=typeof e)return identity;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,s){return e.call(t,n,i,r,s)};case 5:return function(n,i,r,s,o){return e.call(t,n,i,r,s,o)}}return function(){return e.apply(t,arguments)}}function identity(e){return e}t.exports=bindCallback},{}],"/home/michel/stanza.io/node_modules/lodash._cacheindexof/index.js":[function(e,t,n){function cacheIndexOf(e,t){var n=e.data;return("string"==typeof t||isObject(t)?n.set.has(t):n.hash[t])?0:-1}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=cacheIndexOf},{}],"/home/michel/stanza.io/node_modules/lodash._createassigner/index.js":[function(e,t,n){function createAssigner(e){return s(function(t,n){var s=-1,o=null==t?0:n.length,a=o>2?n[o-2]:void 0,c=o>2?n[2]:void 0,u=o>1?n[o-1]:void 0;for("function"==typeof a?(a=i(a,u,5),o-=2):(a="function"==typeof u?u:void 0,o-=a?1:0),c&&r(n[0],n[1],c)&&(a=o<3?void 0:a,o=1);++s<o;){var l=n[s];l&&e(t,l,a)}return t})}var i=e("lodash._bindcallback"),r=e("lodash._isiterateecall"),s=e("lodash.restparam");t.exports=createAssigner},{"lodash._bindcallback":"/home/michel/stanza.io/node_modules/lodash._bindcallback/index.js","lodash._isiterateecall":"/home/michel/stanza.io/node_modules/lodash._isiterateecall/index.js","lodash.restparam":"/home/michel/stanza.io/node_modules/lodash.restparam/index.js"}],"/home/michel/stanza.io/node_modules/lodash._createcache/index.js":[function(e,t,n){(function(n){function SetCache(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new r};t--;)this.push(e[t])}function cachePush(e){var t=this.data;"string"==typeof e||isObject(e)?t.set.add(e):t.hash[e]=!0}function createCache(e){return s&&r?new SetCache(e):null}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=e("lodash._getnative"),r=i(n,"Set"),s=i(Object,"create");SetCache.prototype.push=cachePush,t.exports=createCache}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._getnative":"/home/michel/stanza.io/node_modules/lodash._getnative/index.js"}],"/home/michel/stanza.io/node_modules/lodash._getnative/index.js":[function(e,t,n){function isObjectLike(e){return!!e&&"object"==typeof e}function getNative(e,t){var n=null==e?void 0:e[t];return isNative(n)?n:void 0}function isFunction(e){return isObject(e)&&c.call(e)==i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isNative(e){return null!=e&&(isFunction(e)?u.test(o.call(e)):isObjectLike(e)&&r.test(e))}var i="[object Function]",r=/^\[object .+?Constructor\]$/,s=Object.prototype,o=Function.prototype.toString,a=s.hasOwnProperty,c=s.toString,u=RegExp("^"+o.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=getNative},{}],"/home/michel/stanza.io/node_modules/lodash._isiterateecall/index.js":[function(e,t,n){function isArrayLike(e){return null!=e&&isLength(s(e))}function isIndex(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var i=typeof t;if("number"==i?isArrayLike(n)&&isIndex(t,n.length):"string"==i&&t in n){var r=n[t];return e===e?e===r:r!==r}return!1}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=/^\d+$/,r=9007199254740991,s=function baseProperty(e){return function(t){return null==t?void 0:t[e]}}("length");t.exports=isIterateeCall},{}],"/home/michel/stanza.io/node_modules/lodash.assign/index.js":[function(e,t,n){function assignWith(e,t,n){for(var i=-1,r=s(t),o=r.length;++i<o;){var a=r[i],c=e[a],u=n(c,t[a],a,e,t);(u===u?u===c:c!==c)&&(void 0!==c||a in e)||(e[a]=u)}return e}var i=e("lodash._baseassign"),r=e("lodash._createassigner"),s=e("lodash.keys"),o=r(function(e,t,n){return n?assignWith(e,t,n):i(e,t)});t.exports=o},{"lodash._baseassign":"/home/michel/stanza.io/node_modules/lodash._baseassign/index.js","lodash._createassigner":"/home/michel/stanza.io/node_modules/lodash._createassigner/index.js","lodash.keys":"/home/michel/stanza.io/node_modules/lodash.keys/index.js"}],"/home/michel/stanza.io/node_modules/lodash.clonedeep/index.js":[function(e,t,n){(function(e){function addMapEntry(e,t){return e.set(t[0],t[1]),e}function addSetEntry(e,t){return e.add(t),e}function arrayEach(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n,e););return e}function arrayPush(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function arrayReduce(e,t,n,i){var r=-1,s=e?e.length:0;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function baseTimes(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function overArg(e,t){return function(n){return e(t(n))}}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Hash(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function hashClear(){this.__data__=le?le(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(le){var n=t[e];return n===r?void 0:n}return V.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return le?void 0!==t[e]:V.call(t,e)}function hashSet(e,t){return this.__data__[e]=le&&void 0===t?r:t,this}function ListCache(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():te.call(t,n,1),!0)}function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?void 0:t[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var n=this.__data__,i=assocIndexOf(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}function MapCache(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(oe||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function Stack(e){this.__data__=new ListCache(e)}function stackClear(){this.__data__=new ListCache}function stackDelete(e){return this.__data__.delete(e)}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var r=n.__data__;if(!oe||r.length<i-1)return r.push([e,t]),this;n=this.__data__=new MapCache(r)}return n.set(e,t),this}function arrayLikeKeys(e,t){var n=ve(e)||isArguments(e)?baseTimes(e.length,String):[],i=n.length,r=!!i;for(var s in e)!t&&!V.call(e,s)||r&&("length"==s||isIndex(s,i))||n.push(s);return n}function assignValue(e,t,n){var i=e[t];V.call(e,t)&&eq(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseClone(e,t,n,i,r,s,a){var c;if(i&&(c=s?i(e,r,s,a):i(e)),void 0!==c)return c;if(!isObject(e))return e;var d=ve(e);if(d){if(c=initCloneArray(e),!t)return copyArray(e,c)}else{var f=ye(e),m=f==u||f==l;if(xe(e))return cloneBuffer(e,t);if(f==h||f==o||m&&!s){if(isHostObject(e))return s?e:{};if(c=initCloneObject(m?{}:e),!t)return copySymbols(e,baseAssign(c,e))}else{if(!z[f])return s?e:{};c=initCloneByTag(e,f,baseClone,t)}}a||(a=new Stack);var p=a.get(e);if(p)return p;if(a.set(e,c),!d)var b=n?getAllKeys(e):keys(e);return arrayEach(b||e,function(r,s){b&&(s=r,r=e[s]),assignValue(c,s,baseClone(r,t,n,i,s,e,a))}),c}function baseCreate(e){return isObject(e)?Z(e):{}}function baseGetAllKeys(e,t,n){var i=t(e);return ve(e)?i:arrayPush(i,n(e))}function baseGetTag(e){return W.call(e)}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?X:I).test(toSource(e))}function baseKeys(e){if(!isPrototype(e))return re(e);var t=[];for(var n in Object(e))V.call(e,n)&&"constructor"!=n&&t.push(n);return t}function cloneBuffer(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Y(t).set(new Y(e)),t}function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function cloneMap(e,t,n){return arrayReduce(t?n(mapToArray(e),!0):mapToArray(e),addMapEntry,new e.constructor)}function cloneRegExp(e){var t=new e.constructor(e.source,C.exec(e));return t.lastIndex=e.lastIndex,t}function cloneSet(e,t,n){return arrayReduce(t?n(setToArray(e),!0):setToArray(e),addSetEntry,new e.constructor)}function cloneSymbol(e){return ge?Object(ge.call(e)):{}}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function copyArray(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function copyObject(e,t,n,i){n||(n={});for(var r=-1,s=t.length;++r<s;){var o=t[r],a=i?i(n[o],e[o],o,n,e):void 0;assignValue(n,o,void 0===a?e[o]:a)}return n}function copySymbols(e,t){return copyObject(e,_e(e),t)}function getAllKeys(e){return baseGetAllKeys(e,keys,_e)}function getMapData(e,t){var n=e.__data__;return isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map}function getNative(e,t){var n=getValue(e,t);return baseIsNative(n)?n:void 0}function initCloneArray(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&V.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate(Q(e))}function initCloneByTag(e,t,n,i){var r=e.constructor;switch(t){case _:return cloneArrayBuffer(e);case a:case c:return new r(+e);case y:return cloneDataView(e,i);case v:case x:case j:case S:case w:case E:case A:case N:case O:return cloneTypedArray(e,i);case d:return cloneMap(e,i,n);case f:case b:return new r(e);case m:return cloneRegExp(e);case p:return cloneSet(e,i,n);case g:return cloneSymbol(e)}}function isIndex(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!J&&J in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||q)}function toSource(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function cloneDeep(e){return baseClone(e,!0,!0)}function eq(e,t){return e===t||e!==e&&t!==t}function isArguments(e){return isArrayLikeObject(e)&&V.call(e,"callee")&&(!ee.call(e,"callee")||W.call(e)==o)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?W.call(e):"";return t==u||t==l}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function stubArray(){return[]}function stubFalse(){return!1}var i=200,r="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",a="[object Boolean]",c="[object Date]",u="[object Function]",l="[object GeneratorFunction]",d="[object Map]",f="[object Number]",h="[object Object]",m="[object RegExp]",p="[object Set]",b="[object String]",g="[object Symbol]",_="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",S="[object Int16Array]",w="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",N="[object Uint16Array]",O="[object Uint32Array]",T=/[\\^$.*+?()[\]{}|]/g,C=/\w*$/,I=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,z={};z[o]=z["[object Array]"]=z[_]=z[y]=z[a]=z[c]=z[v]=z[x]=z[j]=z[S]=z[w]=z[d]=z[f]=z[h]=z[m]=z[p]=z[b]=z[g]=z[E]=z[A]=z[N]=z[O]=!0,z["[object Error]"]=z[u]=z["[object WeakMap]"]=!1;var M="object"==typeof e&&e&&e.Object===Object&&e,k="object"==typeof self&&self&&self.Object===Object&&self,L=M||k||Function("return this")(),B="object"==typeof n&&n&&!n.nodeType&&n,P=B&&"object"==typeof t&&t&&!t.nodeType&&t,D=P&&P.exports===B,U=Array.prototype,F=Function.prototype,q=Object.prototype,G=L["__core-js_shared__"],J=function(){var e=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),H=F.toString,V=q.hasOwnProperty,W=q.toString,X=RegExp("^"+H.call(V).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=D?L.Buffer:void 0,K=L.Symbol,Y=L.Uint8Array,Q=overArg(Object.getPrototypeOf,Object),Z=Object.create,ee=q.propertyIsEnumerable,te=U.splice,ne=Object.getOwnPropertySymbols,ie=$?$.isBuffer:void 0,re=overArg(Object.keys,Object),se=getNative(L,"DataView"),oe=getNative(L,"Map"),ae=getNative(L,"Promise"),ce=getNative(L,"Set"),ue=getNative(L,"WeakMap"),le=getNative(Object,"create"),de=toSource(se),fe=toSource(oe),he=toSource(ae),me=toSource(ce),pe=toSource(ue),be=K?K.prototype:void 0,ge=be?be.valueOf:void 0;Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var _e=ne?overArg(ne,Object):stubArray,ye=baseGetTag;(se&&ye(new se(new ArrayBuffer(1)))!=y||oe&&ye(new oe)!=d||ae&&"[object Promise]"!=ye(ae.resolve())||ce&&ye(new ce)!=p||ue&&"[object WeakMap]"!=ye(new ue))&&(ye=function(e){var t=W.call(e),n=t==h?e.constructor:void 0,i=n?toSource(n):void 0;if(i)switch(i){case de:return y;case fe:return d;case he:return"[object Promise]";case me:return p;case pe:return"[object WeakMap]"}return t});var ve=Array.isArray,xe=ie||stubFalse;t.exports=cloneDeep}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/michel/stanza.io/node_modules/lodash.filter/index.js":[function(e,t,n){function filter(e,t,n){var a=o(e)?i:s;return t=r(t,n,3),a(e,t)}var i=e("lodash._arrayfilter"),r=e("lodash._basecallback"),s=e("lodash._basefilter"),o=e("lodash.isarray");t.exports=filter},{"lodash._arrayfilter":"/home/michel/stanza.io/node_modules/lodash._arrayfilter/index.js","lodash._basecallback":"/home/michel/stanza.io/node_modules/lodash._basecallback/index.js","lodash._basefilter":"/home/michel/stanza.io/node_modules/lodash._basefilter/index.js","lodash.isarray":"/home/michel/stanza.io/node_modules/lodash.isarray/index.js"}],"/home/michel/stanza.io/node_modules/lodash.foreach/index.js":[function(e,t,n){var i=e("lodash._arrayeach"),r=e("lodash._baseeach"),s=e("lodash._bindcallback"),o=e("lodash.isarray"),a=function createForEach(e,t){return function(n,i,r){return"function"==typeof i&&void 0===r&&o(n)?e(n,i):t(n,s(i,r,3))}}(i,r);t.exports=a},{"lodash._arrayeach":"/home/michel/stanza.io/node_modules/lodash._arrayeach/index.js","lodash._baseeach":"/home/michel/stanza.io/node_modules/lodash._baseeach/index.js","lodash._bindcallback":"/home/michel/stanza.io/node_modules/lodash._bindcallback/index.js","lodash.isarray":"/home/michel/stanza.io/node_modules/lodash.isarray/index.js"}],"/home/michel/stanza.io/node_modules/lodash.isarguments/index.js":[function(e,t,n){function isArguments(e){return isArrayLikeObject(e)&&c.call(e,"callee")&&(!l.call(e,"callee")||u.call(e)==r)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?u.call(e):"";return t==s||t==o}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}var i=9007199254740991,r="[object Arguments]",s="[object Function]",o="[object GeneratorFunction]",a=Object.prototype,c=a.hasOwnProperty,u=a.toString,l=a.propertyIsEnumerable;t.exports=isArguments},{}],"/home/michel/stanza.io/node_modules/lodash.isarray/index.js":[function(e,t,n){function isObjectLike(e){return!!e&&"object"==typeof e}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function isFunction(e){return isObject(e)&&c.call(e)==i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isNative(e){return null!=e&&(isFunction(e)?u.test(o.call(e)):isObjectLike(e)&&r.test(e))}var i="[object Function]",r=/^\[object .+?Constructor\]$/,s=Object.prototype,o=Function.prototype.toString,a=s.hasOwnProperty,c=s.toString,u=RegExp("^"+o.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),l=function getNative(e,t){var n=null==e?void 0:e[t];return isNative(n)?n:void 0}(Array,"isArray"),d=9007199254740991,f=l||function(e){return isObjectLike(e)&&isLength(e.length)&&"[object Array]"==c.call(e)};t.exports=f},{}],"/home/michel/stanza.io/node_modules/lodash.istypedarray/index.js":[function(e,t,n){function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function isObjectLike(e){return!!e&&"object"==typeof e}function isTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!r[o.call(e)]}var i=9007199254740991,r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;var s=Object.prototype,o=s.toString;t.exports=isTypedArray},{}],"/home/michel/stanza.io/node_modules/lodash.keys/index.js":[function(e,t,n){function isArrayLike(e){return null!=e&&isLength(d(e))}function isIndex(e,t){return e="number"==typeof e||o.test(e)?+e:-1,t=null==t?l:t,e>-1&&e%1==0&&e<t}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function shimKeys(e){for(var t=keysIn(e),n=t.length,i=n&&e.length,o=!!i&&isLength(i)&&(s(e)||r(e)),a=-1,u=[];++a<n;){var l=t[a];(o&&isIndex(l,i)||c.call(e,l))&&u.push(l)}return u}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));var t=e.length;t=t&&isLength(t)&&(s(e)||r(e))&&t||0;for(var n=e.constructor,i=-1,o="function"==typeof n&&n.prototype===e,a=Array(t),u=t>0;++i<t;)a[i]=i+"";for(var l in e)u&&isIndex(l,t)||"constructor"==l&&(o||!c.call(e,l))||a.push(l);return a}var i=e("lodash._getnative"),r=e("lodash.isarguments"),s=e("lodash.isarray"),o=/^\d+$/,a=Object.prototype,c=a.hasOwnProperty,u=i(Object,"keys"),l=9007199254740991,d=function baseProperty(e){return function(t){return null==t?void 0:t[e]}}("length"),f=u?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e)?shimKeys(e):isObject(e)?u(e):[]}:shimKeys;t.exports=f},{"lodash._getnative":"/home/michel/stanza.io/node_modules/lodash._getnative/index.js","lodash.isarguments":"/home/michel/stanza.io/node_modules/lodash.isarguments/index.js","lodash.isarray":"/home/michel/stanza.io/node_modules/lodash.isarray/index.js"}],"/home/michel/stanza.io/node_modules/lodash.pairs/index.js":[function(e,t,n){function toObject(e){return isObject(e)?e:Object(e)}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function pairs(e){e=toObject(e);for(var t=-1,n=i(e),r=n.length,s=Array(r);++t<r;){var o=n[t];s[t]=[o,e[o]]}return s}var i=e("lodash.keys");t.exports=pairs},{"lodash.keys":"/home/michel/stanza.io/node_modules/lodash.keys/index.js"}],"/home/michel/stanza.io/node_modules/lodash.restparam/index.js":[function(e,t,n){function restParam(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,s=r(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=o,e.apply(this,a)}}var i="Expected a function",r=Math.max;t.exports=restParam},{}],"/home/michel/stanza.io/node_modules/lodash.uniq/index.js":[function(e,t,n){function sortedUniq(e,t){for(var n,i=-1,r=e.length,s=-1,o=[];++i<r;){var a=e[i],c=t?t(a,i,e):a;i&&n===c||(n=c,o[++s]=a)}return o}function uniq(e,t,n,o){return(e?e.length:0)?(null!=t&&"boolean"!=typeof t&&(o=n,n=s(e,t,o)?void 0:t,t=!1),n=null==n?n:i(n,o,3),t?sortedUniq(e,n):r(e,n)):[]}var i=e("lodash._basecallback"),r=e("lodash._baseuniq"),s=e("lodash._isiterateecall");t.exports=uniq},{"lodash._basecallback":"/home/michel/stanza.io/node_modules/lodash._basecallback/index.js","lodash._baseuniq":"/home/michel/stanza.io/node_modules/lodash._baseuniq/index.js","lodash._isiterateecall":"/home/michel/stanza.io/node_modules/lodash._isiterateecall/index.js"}],"/home/michel/stanza.io/node_modules/ltx/index.js":[function(e,t,n){"use strict";var i=e("./lib/parse"),r=e("./lib/Parser"),s=e("./lib/escape"),o=e("./lib/Element"),a=e("./lib/equal"),c=e("./lib/createElement"),u=e("./lib/tag"),l=e("./lib/tagString"),d=e("./lib/is"),f=e("./lib/clone"),h=e("./lib/stringify");n=t.exports=function ltx(){return u.apply(null,arguments)},n.Element=o,n.equal=a.equal,n.nameEqual=a.name,n.attrsEqual=a.attrs,n.childrenEqual=a.children,n.isNode=d.isNode,n.isElement=d.isElement,n.isText=d.isText,n.clone=f,n.createElement=c,n.escapeXML=s.escapeXML,n.unescapeXML=s.unescapeXML,n.escapeXMLText=s.escapeXMLText,n.unescapeXMLText=s.unescapeXMLText,n.Parser=r,n.parse=i,n.tag=u,n.tagString=l,n.stringify=h},{"./lib/Element":"/home/michel/stanza.io/node_modules/ltx/lib/Element.js","./lib/Parser":"/home/michel/stanza.io/node_modules/ltx/lib/Parser.js","./lib/clone":"/home/michel/stanza.io/node_modules/ltx/lib/clone.js","./lib/createElement":"/home/michel/stanza.io/node_modules/ltx/lib/createElement.js","./lib/equal":"/home/michel/stanza.io/node_modules/ltx/lib/equal.js","./lib/escape":"/home/michel/stanza.io/node_modules/ltx/lib/escape.js","./lib/is":"/home/michel/stanza.io/node_modules/ltx/lib/is.js","./lib/parse":"/home/michel/stanza.io/node_modules/ltx/lib/parse.js","./lib/stringify":"/home/michel/stanza.io/node_modules/ltx/lib/stringify.js","./lib/tag":"/home/michel/stanza.io/node_modules/ltx/lib/tag.js","./lib/tagString":"/home/michel/stanza.io/node_modules/ltx/lib/tagString.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/DOMElement.js":[function(e,t,n){"use strict";function DOMElement(e,t){r.call(this,e,t),this.nodeType=1,this.nodeName=this.localName}var i=e("inherits"),r=e("./Element");i(DOMElement,r),DOMElement.prototype._getElement=function(e,t){return new DOMElement(e,t)},Object.defineProperty(DOMElement.prototype,"localName",{get:function(){return this.getName()}}),Object.defineProperty(DOMElement.prototype,"namespaceURI",{get:function(){return this.getNS()}}),Object.defineProperty(DOMElement.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(DOMElement.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(DOMElement.prototype,"textContent",{get:function(){return this.getText()},set:function(e){this.children.push(e)}}),DOMElement.prototype.getElementsByTagName=function(e){return this.getChildren(e)},DOMElement.prototype.getAttribute=function(e){return this.getAttr(e)},DOMElement.prototype.setAttribute=function(e,t){this.attr(e,t)},DOMElement.prototype.getAttributeNS=function(e,t){return"http://www.w3.org/XML/1998/namespace"===e?this.getAttr(["xml",t].join(":")):this.getAttr(t,e)},DOMElement.prototype.setAttributeNS=function(e,t,n){var i;if("http://www.w3.org/XML/1998/namespace"===e)i="xml";else{i=this.getXmlns()[e]||""}i&&this.attr([i,t].join(":"),n)},DOMElement.prototype.removeAttribute=function(e){this.attr(e,null)},DOMElement.prototype.removeAttributeNS=function(e,t){var n;if("http://www.w3.org/XML/1998/namespace"===e)n="xml";else{n=this.getXmlns()[e]||""}n&&this.attr([n,t].join(":"),null)},DOMElement.prototype.appendChild=function(e){this.cnode(e)},DOMElement.prototype.removeChild=function(e){this.remove(e)},DOMElement.createElement=function(e,t){var n=new DOMElement(e,t);return Array.prototype.slice.call(arguments,2).forEach(function(e){n.appendChild(e)}),n},t.exports=DOMElement},{"./Element":"/home/michel/stanza.io/node_modules/ltx/lib/Element.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/Element.js":[function(e,t,n){"use strict";function Element(e,t){this.name=e,this.parent=null,this.children=[],this.attrs={},this.setAttrs(t)}var i=e("./escape"),r=i.escapeXML,s=i.escapeXMLText,o=e("./equal"),a=o.equal,c=o.name,u=o.attrs,l=o.children,d=e("./clone");Element.prototype.is=function(e,t){return this.getName()===e&&(!t||this.getNS()===t)},Element.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},Element.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var e=this.name.substr(0,this.name.indexOf(":"));return this.findNS(e)}return this.findNS()},Element.prototype.findNS=function(e){if(e){var t="xmlns:"+e;if(this.attrs[t])return this.attrs[t];if(this.parent)return this.parent.findNS(e)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},Element.prototype.getXmlns=function(){var e={};this.parent&&(e=this.parent.getXmlns());for(var t in this.attrs){var n=t.match("xmlns:?(.*)");this.attrs.hasOwnProperty(t)&&n&&(e[this.attrs[t]]=n[1])}return e},Element.prototype.setAttrs=function(e){"string"==typeof e?this.attrs.xmlns=e:e&&Object.keys(e).forEach(function(t){this.attrs[t]=e[t]},this)},Element.prototype.getAttr=function(e,t){if(!t)return this.attrs[e];var n=this.getXmlns();return n[t]?this.attrs[[n[t],e].join(":")]:null},Element.prototype.getChild=function(e,t){return this.getChildren(e,t)[0]},Element.prototype.getChildren=function(e,t){for(var n=[],i=0;i<this.children.length;i++){var r=this.children[i];!r.getName||r.getName()!==e||t&&r.getNS()!==t||n.push(r)}return n},Element.prototype.getChildByAttr=function(e,t,n,i){return this.getChildrenByAttr(e,t,n,i)[0]},Element.prototype.getChildrenByAttr=function(e,t,n,i){for(var r=[],s=0;s<this.children.length;s++){var o=this.children[s];!o.attrs||o.attrs[e]!==t||n&&o.getNS()!==n||r.push(o),i&&o.getChildrenByAttr&&r.push(o.getChildrenByAttr(e,t,n,!0))}return i&&(r=[].concat.apply([],r)),r},Element.prototype.getChildrenByFilter=function(e,t){for(var n=[],i=0;i<this.children.length;i++){var r=this.children[i];e(r)&&n.push(r),t&&r.getChildrenByFilter&&n.push(r.getChildrenByFilter(e,!0))}return t&&(n=[].concat.apply([],n)),n},Element.prototype.getText=function(){for(var e="",t=0;t<this.children.length;t++){var n=this.children[t];"string"!=typeof n&&"number"!=typeof n||(e+=n)}return e},
Element.prototype.getChildText=function(e,t){var n=this.getChild(e,t);return n?n.getText():null},Element.prototype.getChildElements=function(){return this.getChildrenByFilter(function(e){return e instanceof Element})},Element.prototype.root=function(){return this.parent?this.parent.root():this},Element.prototype.tree=Element.prototype.root,Element.prototype.up=function(){return this.parent?this.parent:this},Element.prototype.c=function(e,t){return this.cnode(new Element(e,t))},Element.prototype.cnode=function(e){return this.children.push(e),"object"==typeof e&&(e.parent=this),e},Element.prototype.t=function(e){return this.children.push(e),this},Element.prototype.remove=function(e,t){var n;return n="string"==typeof e?function(n){return!(n.is&&n.is(e,t))}:function(t){return t!==e},this.children=this.children.filter(n),this},Element.prototype.clone=function(){return d(this)},Element.prototype.text=function(e){return e&&1===this.children.length?(this.children[0]=e,this):this.getText()},Element.prototype.attr=function(e,t){return void 0!==t||null===t?(this.attrs||(this.attrs={}),this.attrs[e]=t,this):this.attrs[e]},Element.prototype.toString=function(){var e="";return this.write(function(t){e+=t}),e},Element.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(e){return e&&e.toJSON?e.toJSON():e})}},Element.prototype._addChildren=function(e){e(">");for(var t=0;t<this.children.length;t++){var n=this.children[t];(n||0===n)&&(n.write?n.write(e):"string"==typeof n?e(s(n)):n.toString&&e(s(n.toString(10))))}e("</"),e(this.name),e(">")},Element.prototype.write=function(e){e("<"),e(this.name);for(var t in this.attrs){var n=this.attrs[t];null!=n&&(e(" "),e(t),e('="'),"string"!=typeof n&&(n=n.toString()),e(r(n)),e('"'))}0===this.children.length?e("/>"):this._addChildren(e)},Element.prototype.nameEquals=function(e){return c(this,e)},Element.prototype.attrsEquals=function(e){return u(this,e)},Element.prototype.childrenEquals=function(e){return l(this,e)},Element.prototype.equals=function(e){return a(this,e)},t.exports=Element},{"./clone":"/home/michel/stanza.io/node_modules/ltx/lib/clone.js","./equal":"/home/michel/stanza.io/node_modules/ltx/lib/equal.js","./escape":"/home/michel/stanza.io/node_modules/ltx/lib/escape.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/Parser.js":[function(e,t,n){"use strict";var i=e("events").EventEmitter,r=e("inherits"),s=e("./Element"),o=e("./parsers/ltx"),a=function(e){i.call(this);var t=this.Parser=e&&e.Parser||this.DefaultParser,n=this.Element=e&&e.Element||this.DefaultElement;this.parser=new t;var r,s=this;this.parser.on("startElement",function(e,t){var i=new n(e,t);r=r?r.cnode(i):i}),this.parser.on("endElement",function(e){r&&e===r.name&&(r.parent?r=r.parent:s.tree||(s.tree=r,r=void 0))}),this.parser.on("text",function(e){r&&r.t(e)}),this.parser.on("error",function(e){s.error=e,s.emit("error",e)})};r(a,i),a.prototype.DefaultParser=o,a.prototype.DefaultElement=s,a.prototype.write=function(e){this.parser.write(e)},a.prototype.end=function(e){this.parser.end(e),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},t.exports=a},{"./Element":"/home/michel/stanza.io/node_modules/ltx/lib/Element.js","./parsers/ltx":"/home/michel/stanza.io/node_modules/ltx/lib/parsers/ltx.js",events:"/home/michel/stanza.io/node_modules/events/events.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/clone.js":[function(e,t,n){"use strict";t.exports=function clone(e){for(var clone=new e.constructor(e.name,e.attrs),t=0;t<e.children.length;t++){var n=e.children[t];clone.cnode(n.clone?n.clone():n)}return clone}},{}],"/home/michel/stanza.io/node_modules/ltx/lib/createElement.js":[function(e,t,n){"use strict";var i=e("./Element");t.exports=function createElement(e,t){for(var n=new i(e,t),r=2;r<arguments.length;r++){var s=arguments[r];s&&n.cnode(s)}return n}},{"./Element":"/home/michel/stanza.io/node_modules/ltx/lib/Element.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/equal.js":[function(e,t,n){"use strict";function nameEqual(e,t){return e.name===t.name}function attrsEqual(e,t){var n=e.attrs,i=Object.keys(n),r=i.length;if(r!==Object.keys(t.attrs).length)return!1;for(var s=0,o=r;s<o;s++){var a=i[s],c=n[a];if(null==c||null==t.attrs[a]){if(c!==t.attrs[a])return!1}else if(c.toString()!==t.attrs[a].toString())return!1}return!0}function childrenEqual(e,t){var n=e.children,i=n.length;if(i!==t.children.length)return!1;for(var r=0,s=i;r<s;r++){var o=n[r];if("string"==typeof o){if(o!==t.children[r])return!1}else if(!o.equals(t.children[r]))return!1}return!0}function equal(e,t){return!!nameEqual(e,t)&&(!!attrsEqual(e,t)&&!!childrenEqual(e,t))}t.exports.name=nameEqual,t.exports.attrs=attrsEqual,t.exports.children=childrenEqual,t.exports.equal=equal},{}],"/home/michel/stanza.io/node_modules/ltx/lib/escape.js":[function(e,t,n){"use strict";function escapeXMLReplace(e){return i[e]}function unescapeXMLReplace(e){return r[e]}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},r={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&quot;":'"',"&#34;":'"',"&apos;":"'","&#39;":"'"};n.escapeXML=function escapeXML(e){return e.replace(/&|<|>|"|'/g,escapeXMLReplace)},n.unescapeXML=function unescapeXML(e){return e.replace(/&(amp|#38|lt|#60|gt|#62|quot|#34|apos|#39);/g,unescapeXMLReplace)},n.escapeXMLText=function escapeXMLText(e){return e.replace(/&|<|>/g,escapeXMLReplace)},n.unescapeXMLText=function unescapeXMLText(e){return e.replace(/&(amp|#38|lt|#60|gt|#62);/g,unescapeXMLReplace)}},{}],"/home/michel/stanza.io/node_modules/ltx/lib/is.js":[function(e,t,n){"use strict";var i=e("./Element");t.exports.isNode=function is(e){return e instanceof i||"string"==typeof e},t.exports.isElement=function isElement(e){return e instanceof i},t.exports.isText=function isText(e){return"string"==typeof e}},{"./Element":"/home/michel/stanza.io/node_modules/ltx/lib/Element.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/parse.js":[function(e,t,n){"use strict";var i=e("./Parser");t.exports=function parse(e,t){var n;n="function"==typeof t?new t:new i(t);var r=null,s=null;if(n.on("tree",function(e){r=e}),n.on("error",function(e){s=e}),n.write(e),n.end(),s)throw s;return r}},{"./Parser":"/home/michel/stanza.io/node_modules/ltx/lib/Parser.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/parsers/ltx.js":[function(e,t,n){"use strict";var i=e("inherits"),r=e("events").EventEmitter,s=e("../escape").unescapeXML,o=t.exports=function SaxLtx(){r.call(this);var e,t,n,i,o,a,c,u=0,l=0;this._handleTagOpening=function(e,t,n){e?this.emit("endElement",t):(this.emit("startElement",t,n),o&&this.emit("endElement",t))},this.write=function(r){function endRecording(){if("number"==typeof l){var e=r.slice(l,d);return l=void 0,e}}"string"!=typeof r&&(r=r.toString());var d=0;for(e&&(r=e+r,d+=e.length,e=null);d<r.length;d++){var f=r.charCodeAt(d);switch(u){case 0:if(60===f){var h=endRecording();h&&this.emit("text",s(h)),u=3,l=d+1,n={}}break;case 9:if(93===f&&"]>"===r.substr(d+1,2)){var m=endRecording();m&&this.emit("text",m),u=1}break;case 3:47===f&&l===d?(l=d+1,i=!0):33===f?"[CDATA["===r.substr(d+1,7)?(l=d+8,u=9):(l=void 0,u=1):63===f?(l=void 0,u=2):(f<=32||47===f||62===f)&&(t=endRecording(),d--,u=4);break;case 1:if(62===f){var p=r.charCodeAt(d-1),b=r.charCodeAt(d-2);(45===p&&45===b||93===p&&93===b)&&(u=0)}break;case 2:if(62===f){63===r.charCodeAt(d-1)&&(u=0)}break;case 4:62===f?(this._handleTagOpening(i,t,n),t=void 0,n=void 0,i=void 0,o=void 0,u=0,l=d+1):47===f?o=!0:f>32&&(l=d,u=5);break;case 5:(f<=32||61===f)&&(c=endRecording(),d--,u=6);break;case 6:61===f&&(u=7);break;case 7:34!==f&&39!==f||(a=f,u=8,l=d+1);break;case 8:if(f===a){var g=s(endRecording());n[c]=g,c=void 0,u=4}}}"number"==typeof l&&l<=r.length&&(e=r.slice(l),l=0)}};i(o,r),o.prototype.end=function(e){e&&this.write(e),this.write=function(){}}},{"../escape":"/home/michel/stanza.io/node_modules/ltx/lib/escape.js",events:"/home/michel/stanza.io/node_modules/events/events.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/stringify.js":[function(e,t,n){"use strict";function stringify(e,t,n){"number"==typeof t&&(t=" ".repeat(t)),n||(n=1);var i="";return i+="<"+e.name,Object.keys(e.attrs).forEach(function(t){i+=" "+t+'="'+e.attrs[t]+'"'}),e.children.length?(i+=">",e.children.forEach(function(e,r){t&&(i+="\n"+t.repeat(n)),i+="string"==typeof e?e:stringify(e,t,n+1)}),t&&(i+="\n"+t.repeat(n-1)),i+="</"+e.name+">"):i+="/>",i}t.exports=stringify},{}],"/home/michel/stanza.io/node_modules/ltx/lib/tag.js":[function(e,t,n){"use strict";var i=e("./tagString"),r=e("./parse");t.exports=function tag(){return r(i.apply(null,arguments))}},{"./parse":"/home/michel/stanza.io/node_modules/ltx/lib/parse.js","./tagString":"/home/michel/stanza.io/node_modules/ltx/lib/tagString.js"}],"/home/michel/stanza.io/node_modules/ltx/lib/tagString.js":[function(e,t,n){"use strict";var i=e("./escape").escapeXML;t.exports=function tagString(){for(var e=arguments[0],t="",n=1;n<arguments.length;n++)t+=e[n-1],t+=i(arguments[n]);return t+=e[e.length-1]}},{"./escape":"/home/michel/stanza.io/node_modules/ltx/lib/escape.js"}],"/home/michel/stanza.io/node_modules/parse-headers/parse-headers.js":[function(e,t,n){var i=e("trim"),r=e("for-each"),s=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return r(i(e).split("\n"),function(e){var n=e.indexOf(":"),r=i(e.slice(0,n)).toLowerCase(),o=i(e.slice(n+1));void 0===t[r]?t[r]=o:s(t[r])?t[r].push(o):t[r]=[t[r],o]}),t}},{"for-each":"/home/michel/stanza.io/node_modules/for-each/index.js",trim:"/home/michel/stanza.io/node_modules/trim/index.js"}],"/home/michel/stanza.io/node_modules/process-nextick-args/index.js":[function(e,t,n){(function(e){"use strict";function nextTick(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function afterTickOne(){t.call(null,n)});case 3:return e.nextTick(function afterTickTwo(){t.call(null,n,i)});case 4:return e.nextTick(function afterTickThree(){t.call(null,n,i,r)});default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return e.nextTick(function afterTick(){t.apply(null,s)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=nextTick:t.exports=e.nextTick}).call(this,e("_process"))},{_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js"}],"/home/michel/stanza.io/node_modules/punycode/punycode.js":[function(t,n,i){(function(t){!function(r){function error(e){throw new RangeError(j[e])}function map(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function mapDomain(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(x,"."),i+map(e.split("."),t).join(".")}function ucs2decode(e){for(var t,n,i=[],r=0,s=e.length;r<s;)t=e.charCodeAt(r++),t>=55296&&t<=56319&&r<s?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function ucs2encode(e){return map(e,function(e){var t="";return e>65535&&(e-=65536,t+=E(e>>>10&1023|55296),e=56320|1023&e),t+=E(e)}).join("")}function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:d}function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function adapt(e,t,n){var i=0;for(e=n?w(e/p):e>>1,e+=w(e/t);e>S*h>>1;i+=d)e=w(e/S);return w(i+(S+1)*e/(e+m))}function decode(e){var t,n,i,r,s,o,a,c,u,m,p=[],y=e.length,v=0,x=g,j=b;for(n=e.lastIndexOf(_),n<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&error("not-basic"),p.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<y;){for(s=v,o=1,a=d;r>=y&&error("invalid-input"),c=basicToDigit(e.charCodeAt(r++)),(c>=d||c>w((l-v)/o))&&error("overflow"),v+=c*o,u=a<=j?f:a>=j+h?h:a-j,!(c<u);a+=d)m=d-u,o>w(l/m)&&error("overflow"),o*=m;t=p.length+1,j=adapt(v-s,t,0==s),w(v/t)>l-x&&error("overflow"),x+=w(v/t),v%=t,p.splice(v++,0,x)}return ucs2encode(p)}function encode(e){var t,n,i,r,s,o,a,c,u,m,p,y,v,x,j,S=[];for(e=ucs2decode(e),y=e.length,t=g,n=0,s=b,o=0;o<y;++o)(p=e[o])<128&&S.push(E(p));for(i=r=S.length,r&&S.push(_);i<y;){for(a=l,o=0;o<y;++o)(p=e[o])>=t&&p<a&&(a=p);for(v=i+1,a-t>w((l-n)/v)&&error("overflow"),n+=(a-t)*v,t=a,o=0;o<y;++o)if(p=e[o],p<t&&++n>l&&error("overflow"),p==t){for(c=n,u=d;m=u<=s?f:u>=s+h?h:u-s,!(c<m);u+=d)j=c-m,x=d-m,S.push(E(digitToBasic(m+j%x,0))),c=w(j/x);S.push(E(digitToBasic(c,0))),s=adapt(n,v,i==r),n=0,++i}++n,++t}return S.join("")}function toUnicode(e){return mapDomain(e,function(e){return y.test(e)?decode(e.slice(4).toLowerCase()):e})}function toASCII(e){return mapDomain(e,function(e){return v.test(e)?"xn--"+encode(e):e})}var s="object"==typeof i&&i&&!i.nodeType&&i,o="object"==typeof n&&n&&!n.nodeType&&n,a="object"==typeof t&&t;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var c,u,l=2147483647,d=36,f=1,h=26,m=38,p=700,b=72,g=128,_="-",y=/^xn--/,v=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=d-f,w=Math.floor,E=String.fromCharCode;if(c={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return c});else if(s&&o)if(n.exports==s)o.exports=c;else for(u in c)c.hasOwnProperty(u)&&(s[u]=c[u]);else r.punycode=c}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/michel/stanza.io/node_modules/randombytes/browser.js":[function(e,t,n){(function(n,i){"use strict";function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function randomBytes(e,t){if(e>65536)throw new Error("requested too many random bytes");var o=new i.Uint8Array(e);e>0&&s.getRandomValues(o);var a=r.from(o.buffer);return"function"==typeof t?n.nextTick(function(){t(null,a)}):a}var r=e("safe-buffer").Buffer,s=i.crypto||i.msCrypto;s&&s.getRandomValues?t.exports=randomBytes:t.exports=oldBrowser}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/ripemd160/index.js":[function(e,t,n){(function(n){"use strict";function RIPEMD160(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function rotl(e,t){return e<<t|e>>>32-t}function fn1(e,t,n,i,r,s,o,a){return rotl(e+(t^n^i)+s+o|0,a)+r|0}function fn2(e,t,n,i,r,s,o,a){return rotl(e+(t&n|~t&i)+s+o|0,a)+r|0}function fn3(e,t,n,i,r,s,o,a){return rotl(e+((t|~n)^i)+s+o|0,a)+r|0}function fn4(e,t,n,i,r,s,o,a){return rotl(e+(t&i|n&~i)+s+o|0,a)+r|0}function fn5(e,t,n,i,r,s,o,a){return rotl(e+(t^(n|~i))+s+o|0,a)+r|0}var i=e("inherits"),r=e("hash-base");i(RIPEMD160,r),RIPEMD160.prototype._update=function(){for(var e=new Array(16),t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,r=this._c,s=this._d,o=this._e;n=fn1(n,i,r,s,o,e[0],0,11),r=rotl(r,10),o=fn1(o,n,i,r,s,e[1],0,14),i=rotl(i,10),s=fn1(s,o,n,i,r,e[2],0,15),n=rotl(n,10),r=fn1(r,s,o,n,i,e[3],0,12),o=rotl(o,10),i=fn1(i,r,s,o,n,e[4],0,5),s=rotl(s,10),n=fn1(n,i,r,s,o,e[5],0,8),r=rotl(r,10),o=fn1(o,n,i,r,s,e[6],0,7),i=rotl(i,10),s=fn1(s,o,n,i,r,e[7],0,9),n=rotl(n,10),r=fn1(r,s,o,n,i,e[8],0,11),o=rotl(o,10),i=fn1(i,r,s,o,n,e[9],0,13),s=rotl(s,10),n=fn1(n,i,r,s,o,e[10],0,14),r=rotl(r,10),o=fn1(o,n,i,r,s,e[11],0,15),i=rotl(i,10),s=fn1(s,o,n,i,r,e[12],0,6),n=rotl(n,10),r=fn1(r,s,o,n,i,e[13],0,7),o=rotl(o,10),i=fn1(i,r,s,o,n,e[14],0,9),s=rotl(s,10),n=fn1(n,i,r,s,o,e[15],0,8),r=rotl(r,10),o=fn2(o,n,i,r,s,e[7],1518500249,7),i=rotl(i,10),s=fn2(s,o,n,i,r,e[4],1518500249,6),n=rotl(n,10),r=fn2(r,s,o,n,i,e[13],1518500249,8),o=rotl(o,10),i=fn2(i,r,s,o,n,e[1],1518500249,13),s=rotl(s,10),n=fn2(n,i,r,s,o,e[10],1518500249,11),r=rotl(r,10),o=fn2(o,n,i,r,s,e[6],1518500249,9),i=rotl(i,10),s=fn2(s,o,n,i,r,e[15],1518500249,7),n=rotl(n,10),r=fn2(r,s,o,n,i,e[3],1518500249,15),o=rotl(o,10),i=fn2(i,r,s,o,n,e[12],1518500249,7),s=rotl(s,10),n=fn2(n,i,r,s,o,e[0],1518500249,12),r=rotl(r,10),o=fn2(o,n,i,r,s,e[9],1518500249,15),i=rotl(i,10),s=fn2(s,o,n,i,r,e[5],1518500249,9),n=rotl(n,10),r=fn2(r,s,o,n,i,e[2],1518500249,11),o=rotl(o,10),i=fn2(i,r,s,o,n,e[14],1518500249,7),s=rotl(s,10),n=fn2(n,i,r,s,o,e[11],1518500249,13),r=rotl(r,10),o=fn2(o,n,i,r,s,e[8],1518500249,12),i=rotl(i,10),s=fn3(s,o,n,i,r,e[3],1859775393,11),n=rotl(n,10),r=fn3(r,s,o,n,i,e[10],1859775393,13),o=rotl(o,10),i=fn3(i,r,s,o,n,e[14],1859775393,6),s=rotl(s,10),n=fn3(n,i,r,s,o,e[4],1859775393,7),r=rotl(r,10),o=fn3(o,n,i,r,s,e[9],1859775393,14),i=rotl(i,10),s=fn3(s,o,n,i,r,e[15],1859775393,9),n=rotl(n,10),r=fn3(r,s,o,n,i,e[8],1859775393,13),o=rotl(o,10),i=fn3(i,r,s,o,n,e[1],1859775393,15),s=rotl(s,10),n=fn3(n,i,r,s,o,e[2],1859775393,14),r=rotl(r,10),o=fn3(o,n,i,r,s,e[7],1859775393,8),i=rotl(i,10),s=fn3(s,o,n,i,r,e[0],1859775393,13),n=rotl(n,10),r=fn3(r,s,o,n,i,e[6],1859775393,6),o=rotl(o,10),i=fn3(i,r,s,o,n,e[13],1859775393,5),s=rotl(s,10),n=fn3(n,i,r,s,o,e[11],1859775393,12),r=rotl(r,10),o=fn3(o,n,i,r,s,e[5],1859775393,7),i=rotl(i,10),s=fn3(s,o,n,i,r,e[12],1859775393,5),n=rotl(n,10),r=fn4(r,s,o,n,i,e[1],2400959708,11),o=rotl(o,10),i=fn4(i,r,s,o,n,e[9],2400959708,12),s=rotl(s,10),n=fn4(n,i,r,s,o,e[11],2400959708,14),r=rotl(r,10),o=fn4(o,n,i,r,s,e[10],2400959708,15),i=rotl(i,10),s=fn4(s,o,n,i,r,e[0],2400959708,14),n=rotl(n,10),r=fn4(r,s,o,n,i,e[8],2400959708,15),o=rotl(o,10),i=fn4(i,r,s,o,n,e[12],2400959708,9),s=rotl(s,10),n=fn4(n,i,r,s,o,e[4],2400959708,8),r=rotl(r,10),o=fn4(o,n,i,r,s,e[13],2400959708,9),i=rotl(i,10),s=fn4(s,o,n,i,r,e[3],2400959708,14),n=rotl(n,10),r=fn4(r,s,o,n,i,e[7],2400959708,5),o=rotl(o,10),i=fn4(i,r,s,o,n,e[15],2400959708,6),s=rotl(s,10),n=fn4(n,i,r,s,o,e[14],2400959708,8),r=rotl(r,10),o=fn4(o,n,i,r,s,e[5],2400959708,6),i=rotl(i,10),s=fn4(s,o,n,i,r,e[6],2400959708,5),n=rotl(n,10),r=fn4(r,s,o,n,i,e[2],2400959708,12),o=rotl(o,10),i=fn5(i,r,s,o,n,e[4],2840853838,9),s=rotl(s,10),n=fn5(n,i,r,s,o,e[0],2840853838,15),r=rotl(r,10),o=fn5(o,n,i,r,s,e[5],2840853838,5),i=rotl(i,10),s=fn5(s,o,n,i,r,e[9],2840853838,11),n=rotl(n,10),r=fn5(r,s,o,n,i,e[7],2840853838,6),o=rotl(o,10),i=fn5(i,r,s,o,n,e[12],2840853838,8),s=rotl(s,10),n=fn5(n,i,r,s,o,e[2],2840853838,13),r=rotl(r,10),o=fn5(o,n,i,r,s,e[10],2840853838,12),i=rotl(i,10),s=fn5(s,o,n,i,r,e[14],2840853838,5),n=rotl(n,10),r=fn5(r,s,o,n,i,e[1],2840853838,12),o=rotl(o,10),i=fn5(i,r,s,o,n,e[3],2840853838,13),s=rotl(s,10),n=fn5(n,i,r,s,o,e[8],2840853838,14),r=rotl(r,10),o=fn5(o,n,i,r,s,e[11],2840853838,11),i=rotl(i,10),s=fn5(s,o,n,i,r,e[6],2840853838,8),n=rotl(n,10),r=fn5(r,s,o,n,i,e[15],2840853838,5),o=rotl(o,10),i=fn5(i,r,s,o,n,e[13],2840853838,6),s=rotl(s,10);var a=this._a,c=this._b,u=this._c,l=this._d,d=this._e;a=fn5(a,c,u,l,d,e[5],1352829926,8),u=rotl(u,10),d=fn5(d,a,c,u,l,e[14],1352829926,9),c=rotl(c,10),l=fn5(l,d,a,c,u,e[7],1352829926,9),a=rotl(a,10),u=fn5(u,l,d,a,c,e[0],1352829926,11),d=rotl(d,10),c=fn5(c,u,l,d,a,e[9],1352829926,13),l=rotl(l,10),a=fn5(a,c,u,l,d,e[2],1352829926,15),u=rotl(u,10),d=fn5(d,a,c,u,l,e[11],1352829926,15),c=rotl(c,10),l=fn5(l,d,a,c,u,e[4],1352829926,5),a=rotl(a,10),u=fn5(u,l,d,a,c,e[13],1352829926,7),d=rotl(d,10),c=fn5(c,u,l,d,a,e[6],1352829926,7),l=rotl(l,10),a=fn5(a,c,u,l,d,e[15],1352829926,8),u=rotl(u,10),d=fn5(d,a,c,u,l,e[8],1352829926,11),c=rotl(c,10),l=fn5(l,d,a,c,u,e[1],1352829926,14),a=rotl(a,10),u=fn5(u,l,d,a,c,e[10],1352829926,14),d=rotl(d,10),c=fn5(c,u,l,d,a,e[3],1352829926,12),l=rotl(l,10),a=fn5(a,c,u,l,d,e[12],1352829926,6),u=rotl(u,10),d=fn4(d,a,c,u,l,e[6],1548603684,9),c=rotl(c,10),l=fn4(l,d,a,c,u,e[11],1548603684,13),a=rotl(a,10),u=fn4(u,l,d,a,c,e[3],1548603684,15),d=rotl(d,10),c=fn4(c,u,l,d,a,e[7],1548603684,7),l=rotl(l,10),a=fn4(a,c,u,l,d,e[0],1548603684,12),u=rotl(u,10),d=fn4(d,a,c,u,l,e[13],1548603684,8),c=rotl(c,10),l=fn4(l,d,a,c,u,e[5],1548603684,9),a=rotl(a,10),u=fn4(u,l,d,a,c,e[10],1548603684,11),d=rotl(d,10),c=fn4(c,u,l,d,a,e[14],1548603684,7),l=rotl(l,10),a=fn4(a,c,u,l,d,e[15],1548603684,7),u=rotl(u,10),d=fn4(d,a,c,u,l,e[8],1548603684,12),c=rotl(c,10),l=fn4(l,d,a,c,u,e[12],1548603684,7),a=rotl(a,10),u=fn4(u,l,d,a,c,e[4],1548603684,6),d=rotl(d,10),c=fn4(c,u,l,d,a,e[9],1548603684,15),l=rotl(l,10),a=fn4(a,c,u,l,d,e[1],1548603684,13),u=rotl(u,10),d=fn4(d,a,c,u,l,e[2],1548603684,11),c=rotl(c,10),l=fn3(l,d,a,c,u,e[15],1836072691,9),a=rotl(a,10),u=fn3(u,l,d,a,c,e[5],1836072691,7),d=rotl(d,10),c=fn3(c,u,l,d,a,e[1],1836072691,15),l=rotl(l,10),a=fn3(a,c,u,l,d,e[3],1836072691,11),u=rotl(u,10),d=fn3(d,a,c,u,l,e[7],1836072691,8),c=rotl(c,10),l=fn3(l,d,a,c,u,e[14],1836072691,6),a=rotl(a,10),u=fn3(u,l,d,a,c,e[6],1836072691,6),d=rotl(d,10),c=fn3(c,u,l,d,a,e[9],1836072691,14),l=rotl(l,10),a=fn3(a,c,u,l,d,e[11],1836072691,12),u=rotl(u,10),d=fn3(d,a,c,u,l,e[8],1836072691,13),c=rotl(c,10),l=fn3(l,d,a,c,u,e[12],1836072691,5),a=rotl(a,10),u=fn3(u,l,d,a,c,e[2],1836072691,14),d=rotl(d,10),c=fn3(c,u,l,d,a,e[10],1836072691,13),l=rotl(l,10),a=fn3(a,c,u,l,d,e[0],1836072691,13),u=rotl(u,10),d=fn3(d,a,c,u,l,e[4],1836072691,7),c=rotl(c,10),l=fn3(l,d,a,c,u,e[13],1836072691,5),a=rotl(a,10),u=fn2(u,l,d,a,c,e[8],2053994217,15),d=rotl(d,10),c=fn2(c,u,l,d,a,e[6],2053994217,5),l=rotl(l,10),a=fn2(a,c,u,l,d,e[4],2053994217,8),u=rotl(u,10),d=fn2(d,a,c,u,l,e[1],2053994217,11),c=rotl(c,10),l=fn2(l,d,a,c,u,e[3],2053994217,14),a=rotl(a,10),u=fn2(u,l,d,a,c,e[11],2053994217,14),d=rotl(d,10),c=fn2(c,u,l,d,a,e[15],2053994217,6),l=rotl(l,10),a=fn2(a,c,u,l,d,e[0],2053994217,14),u=rotl(u,10),d=fn2(d,a,c,u,l,e[5],2053994217,6),c=rotl(c,10),l=fn2(l,d,a,c,u,e[12],2053994217,9),a=rotl(a,10),u=fn2(u,l,d,a,c,e[2],2053994217,12),d=rotl(d,10),c=fn2(c,u,l,d,a,e[13],2053994217,9),l=rotl(l,10),a=fn2(a,c,u,l,d,e[9],2053994217,12),u=rotl(u,10),d=fn2(d,a,c,u,l,e[7],2053994217,5),c=rotl(c,10),l=fn2(l,d,a,c,u,e[10],2053994217,15),a=rotl(a,10),u=fn2(u,l,d,a,c,e[14],2053994217,8),d=rotl(d,10),c=fn1(c,u,l,d,a,e[12],0,8),l=rotl(l,10),a=fn1(a,c,u,l,d,e[15],0,5),u=rotl(u,10),d=fn1(d,a,c,u,l,e[10],0,12),c=rotl(c,10),l=fn1(l,d,a,c,u,e[4],0,9),a=rotl(a,10),u=fn1(u,l,d,a,c,e[1],0,12),d=rotl(d,10),c=fn1(c,u,l,d,a,e[5],0,5),l=rotl(l,10),a=fn1(a,c,u,l,d,e[8],0,14),u=rotl(u,10),d=fn1(d,a,c,u,l,e[7],0,6),c=rotl(c,10),l=fn1(l,d,a,c,u,e[6],0,8),a=rotl(a,10),u=fn1(u,l,d,a,c,e[2],0,13),d=rotl(d,10),c=fn1(c,u,l,d,a,e[13],0,6),l=rotl(l,10),a=fn1(a,c,u,l,d,e[14],0,5),u=rotl(u,10),d=fn1(d,a,c,u,l,e[0],0,15),c=rotl(c,10),l=fn1(l,d,a,c,u,e[3],0,13),a=rotl(a,10),u=fn1(u,l,d,a,c,e[9],0,11),d=rotl(d,10),c=fn1(c,u,l,d,a,e[11],0,11),l=rotl(l,10);var f=this._b+r+l|0;this._b=this._c+s+d|0,this._c=this._d+o+a|0,this._d=this._e+n+c|0,this._e=this._a+i+u|0,this._a=f},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=RIPEMD160}).call(this,e("buffer").Buffer)},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","hash-base":"/home/michel/stanza.io/node_modules/hash-base/index.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/rtcpeerconnection/rtcpeerconnection.js":[function(e,t,n){function PeerConnection(e,t){var n,i=this;s.call(this),e=e||{},e.iceServers=e.iceServers||[],this.enableChromeNativeSimulcast=!1,t&&t.optional&&window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&t.optional.forEach(function(e){e.enableChromeNativeSimulcast&&(i.enableChromeNativeSimulcast=!0)}),this.enableMultiStreamHacks=!1,t&&t.optional&&window.chrome&&t.optional.forEach(function(e){e.enableMultiStreamHacks&&(i.enableMultiStreamHacks=!0)}),this.restrictBandwidth=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetRestrictBandwidth&&(i.restrictBandwidth=e.andyetRestrictBandwidth)}),this.batchIceCandidates=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetBatchIce&&(i.batchIceCandidates=e.andyetBatchIce)}),this.batchedIceCandidates=[],t&&t.optional&&window.chrome&&t.optional.forEach(function(e){e.andyetFasterICE&&(i.eliminateDuplicateCandidates=e.andyetFasterICE)}),t&&t.optional&&t.optional.forEach(function(e){e.andyetDontSignalCandidates&&(i.dontSignalCandidates=e.andyetDontSignalCandidates)}),this.assumeSetLocalSuccess=!1,t&&t.optional&&t.optional.forEach(function(e){e.andyetAssumeSetLocalSuccess&&(i.assumeSetLocalSuccess=e.andyetAssumeSetLocalSuccess)}),window.navigator.mozGetUserMedia&&t&&t.optional&&(this.wtFirefox=0,t.optional.forEach(function(e){e.andyetFirefoxMakesMeSad&&(i.wtFirefox=e.andyetFirefoxMakesMeSad,i.wtFirefox>0&&(i.firefoxcandidatebuffer=[]))})),this.pc=new RTCPeerConnection(e,t),"function"==typeof this.pc.getLocalStreams?this.getLocalStreams=this.pc.getLocalStreams.bind(this.pc):this.getLocalStreams=function(){return[]},"function"==typeof this.pc.getSenders?this.getSenders=this.pc.getSenders.bind(this.pc):this.getSenders=function(){return[]},"function"==typeof this.pc.getRemoteStreams?this.getRemoteStreams=this.pc.getRemoteStreams.bind(this.pc):this.getRemoteStreams=function(){return[]},"function"==typeof this.pc.getReceivers?this.getReceivers=this.pc.getReceivers.bind(this.pc):this.getReceivers=function(){return[]},this.addStream=this.pc.addStream.bind(this.pc),this.removeStream=function(e){"function"==typeof i.pc.removeStream?i.pc.removeStream.apply(i.pc,arguments):"function"==typeof i.pc.removeTrack&&e.getTracks().forEach(function(e){i.pc.removeTrack(e)})},"function"==typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc)),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onremovetrack=this.emit.bind(this,"removeTrack"),this.pc.onaddstream=this.emit.bind(this,"addStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.localDescription={contents:[]},this.remoteDescription={contents:[]},this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1},this.iceCredentials={local:{},remote:{}};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){(e.logger||console).log("PeerConnection event:",arguments)}),this.hadLocalStunCandidate=!1,this.hadRemoteStunCandidate=!1,this.hadLocalRelayCandidate=!1,this.hadRemoteRelayCandidate=!1,this.hadLocalIPv6Candidate=!1,this.hadRemoteIPv6Candidate=!1,this._remoteDataChannels=[],this._localDataChannels=[],this._candidateBuffer=[]}var i=e("util"),r=e("sdp-jingle-json"),s=e("wildemitter"),o=e("lodash.clonedeep");i.inherits(PeerConnection,s),Object.defineProperty(PeerConnection.prototype,"signalingState",{get:function(){return this.pc.signalingState}}),Object.defineProperty(PeerConnection.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}}),PeerConnection.prototype._role=function(){return this.isInitiator?"initiator":"responder"},PeerConnection.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},PeerConnection.prototype._checkLocalCandidate=function(e){var t=r.toCandidateJSON(e);"srflx"==t.type?this.hadLocalStunCandidate=!0:"relay"==t.type&&(this.hadLocalRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)},PeerConnection.prototype._checkRemoteCandidate=function(e){var t=r.toCandidateJSON(e);"srflx"==t.type?this.hadRemoteStunCandidate=!0:"relay"==t.type&&(this.hadRemoteRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)},PeerConnection.prototype.processIce=function(e,t){t=t||function(){};var n=this;if("closed"===this.pc.signalingState)return t();if(e.contents||e.jingle&&e.jingle.contents){var i=this.remoteDescription.contents.map(function(e){return e.name});(e.contents||e.jingle.contents).forEach(function(e){var s=e.transport||{},o=s.candidates||[],a=i.indexOf(e.name),c=e.name,u=n.remoteDescription.contents.find(function(t){return t.name===e.name}),l=function(){o.forEach(function(e){var t=r.toCandidateSDP(e);n.pc.addIceCandidate(new RTCIceCandidate({candidate:t,sdpMLineIndex:a,sdpMid:c}),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(t)}),t()};if(n.iceCredentials.remote[e.name]&&s.ufrag&&n.iceCredentials.remote[e.name].ufrag!==s.ufrag)if(u){u.transport.ufrag=s.ufrag,u.transport.pwd=s.pwd;var d={type:"offer",jingle:n.remoteDescription};d.sdp=r.toSessionSDP(d.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.pc.setRemoteDescription(new RTCSessionDescription(d),function(){l()},function(e){n.emit("error",e)})}else n.emit("error","ice restart failed to find matching content");else l()})}else{if(e.candidate&&0!==e.candidate.candidate.indexOf("a=")&&(e.candidate.candidate="a="+e.candidate.candidate),this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(e.candidate),t();n.pc.addIceCandidate(new RTCIceCandidate(e.candidate),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate.candidate),t()}},PeerConnection.prototype.offer=function(e,t){var n=this,i=2===arguments.length,s=i&&e?e:{offerToReceiveAudio:1,offerToReceiveVideo:1};if(t=i?t:e,t=t||function(){},"closed"===this.pc.signalingState)return t("Already closed");this.pc.createOffer(function(e){var i={type:"offer",sdp:e.sdp};n.assumeSetLocalSuccess&&(n.emit("offer",i),t(null,i)),n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){var s;n.config.useJingle&&(s=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),s.sid=n.config.sid,n.localDescription=s,s.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.local[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),i.jingle=s),i.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.assumeSetLocalSuccess||(n.emit("offer",i),t(null,i))},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},s)},PeerConnection.prototype.handleOffer=function(e,t){t=t||function(){};var n=this;if(e.type="offer",e.jingle){if(this.enableChromeNativeSimulcast&&e.jingle.contents.forEach(function(e){"video"===e.name&&(e.application.googConferenceFlag=!0)}),this.enableMultiStreamHacks&&e.jingle.contents.forEach(function(e){if("video"===e.name){var t=e.application.sources||[];0!==t.length&&"3735928559"===t[0].ssrc||(t.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),e.application.sources=t)}}),n.restrictBandwidth>0&&e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name){var i=e.jingle.contents[1];i.application&&i.application.bandwidth&&i.application.bandwidth.bandwidth||(e.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:n.restrictBandwidth.toString()},e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"}))}e.jingle.contents.forEach(function(e){
var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle}e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){t()},t)},PeerConnection.prototype.answerAudioOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(t,e)},PeerConnection.prototype.answerBroadcastOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(t,e)},PeerConnection.prototype.answer=function(e,t){var n=2===arguments.length,i=n?t:e,r=n&&e?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(r,i)},PeerConnection.prototype.handleAnswer=function(e,t){t=t||function(){};var n=this;e.jingle&&(e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle,e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})})),e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){n.wtFirefox&&window.setTimeout(function(){n.firefoxcandidatebuffer.forEach(function(e){n.pc.addIceCandidate(new RTCIceCandidate(e),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate)}),n.firefoxcandidatebuffer=null},n.wtFirefox),t(null)},t)},PeerConnection.prototype.close=function(){this.pc.close(),this._localDataChannels=[],this._remoteDataChannels=[],this.emit("close")},PeerConnection.prototype._answer=function(e,t){t=t||function(){};var n=this;if(!this.pc.remoteDescription)throw new Error("remoteDescription not set");if("closed"===this.pc.signalingState)return t("Already closed");n.pc.createAnswer(function(e){var i=[];if(n.enableChromeNativeSimulcast&&(e.jingle=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name)){var s=e.jingle.contents[1].application.sourceGroups||[],a=!1;if(s.forEach(function(e){"SIM"==e.semantics&&(a=!0)}),!a&&e.jingle.contents[1].application.sources.length){var c=JSON.parse(JSON.stringify(e.jingle.contents[1].application.sources[0]));c.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(c),i.push(e.jingle.contents[1].application.sources[0].ssrc),i.push(c.ssrc),s.push({semantics:"SIM",sources:i});var u=JSON.parse(JSON.stringify(c));u.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(u),s.push({semantics:"FID",sources:[c.ssrc,u.ssrc]}),e.jingle.contents[1].application.sourceGroups=s,e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"})}}var l={type:"answer",sdp:e.sdp};if(n.assumeSetLocalSuccess){var d=o(l);n.emit("answer",d),t(null,d)}n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){if(n.config.useJingle){var i=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"});i.sid=n.config.sid,n.localDescription=i,l.jingle=i}if(n.enableChromeNativeSimulcast&&(l.jingle||(l.jingle=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"})),l.jingle.contents[1].application.sources.forEach(function(e,t){e.parameters=e.parameters.map(function(e){return"msid"===e.key&&(e.value+="-"+Math.floor(t/2)),e})}),l.sdp=r.toSessionSDP(l.jingle,{sid:n.sdpSessionID,role:n._role(),direction:"outgoing"})),l.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),!n.assumeSetLocalSuccess){var s=o(l);n.emit("answer",s),t(null,s)}},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},e)},PeerConnection.prototype._onIce=function(e){var t=this;if(e.candidate){if(this.dontSignalCandidates)return;var n=e.candidate,i={candidate:{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex}};this._checkLocalCandidate(n.candidate);var s,o,a=r.toCandidateJSON(n.candidate);if(this.eliminateDuplicateCandidates&&"relay"===a.type&&(s=this._candidateBuffer.filter(function(e){return"relay"===e.type}).map(function(e){return e.foundation+":"+e.component}),(o=s.indexOf(a.foundation+":"+a.component))>-1&&a.priority>>24>=s[o].priority>>24))return;if("max-bundle"===this.config.bundlePolicy&&(s=this._candidateBuffer.filter(function(e){return a.type===e.type}).map(function(e){return e.address+":"+e.port}),(o=s.indexOf(a.address+":"+a.port))>-1))return;if("require"===this.config.rtcpMuxPolicy&&"2"===a.component)return;if(this._candidateBuffer.push(a),t.config.useJingle){if(n.sdpMid||(t.pc.remoteDescription&&"offer"===t.pc.remoteDescription.type?n.sdpMid=t.remoteDescription.contents[n.sdpMLineIndex].name:n.sdpMid=t.localDescription.contents[n.sdpMLineIndex].name),!t.iceCredentials.local[n.sdpMid]){r.toSessionJSON(t.pc.localDescription.sdp,{role:t._role(),direction:"outgoing"}).contents.forEach(function(e){var n=e.transport||{};n.ufrag&&(t.iceCredentials.local[e.name]={ufrag:n.ufrag,pwd:n.pwd})})}if(i.jingle={contents:[{name:n.sdpMid,creator:t._role(),transport:{transportType:"iceUdp",ufrag:t.iceCredentials.local[n.sdpMid].ufrag,pwd:t.iceCredentials.local[n.sdpMid].pwd,candidates:[a]}}]},t.batchIceCandidates>0)return 0===t.batchedIceCandidates.length&&window.setTimeout(function(){var e={};t.batchedIceCandidates.forEach(function(t){t=t.contents[0],e[t.name]||(e[t.name]=t),e[t.name].transport.candidates.push(t.transport.candidates[0])});var n={jingle:{contents:[]}};Object.keys(e).forEach(function(t){n.jingle.contents.push(e[t])}),t.batchedIceCandidates=[],t.emit("ice",n)},t.batchIceCandidates),void t.batchedIceCandidates.push(i.jingle)}this.emit("ice",i)}else this.emit("endOfCandidates")},PeerConnection.prototype._onDataChannel=function(e){var t=e.channel;this._remoteDataChannels.push(t),this.emit("addChannel",t)},PeerConnection.prototype.createDataChannel=function(e,t){var n=this.pc.createDataChannel(e,t);return this._localDataChannels.push(n),n},PeerConnection.prototype.getStats=function(){if("function"!=typeof arguments[0])return this.pc.getStats.apply(this.pc,arguments);var e=arguments[0];this.pc.getStats().then(function(t){e(null,t)},function(t){e(t)})},t.exports=PeerConnection},{"lodash.clonedeep":"/home/michel/stanza.io/node_modules/lodash.clonedeep/index.js","sdp-jingle-json":"/home/michel/stanza.io/node_modules/sdp-jingle-json/index.js",util:"/home/michel/stanza.io/node_modules/util/util.js",wildemitter:"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js"}],"/home/michel/stanza.io/node_modules/safe-buffer/index.js":[function(e,t,n){function copyProps(e,t){for(var n in e)t[n]=e[n]}function SafeBuffer(e,t,n){return r(e,t,n)}var i=e("buffer"),r=i.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(copyProps(i,n),n.Buffer=SafeBuffer),copyProps(r,SafeBuffer),SafeBuffer.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},SafeBuffer.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js"}],"/home/michel/stanza.io/node_modules/sasl-anonymous/lib/mechanism.js":[function(t,n,i){!function(t,r){"object"==typeof i?r(i,n):"function"==typeof e&&e.amd&&e(["exports","module"],r)}(0,function(e,t){function Mechanism(){}Mechanism.prototype.name="ANONYMOUS",Mechanism.prototype.clientFirst=!0,Mechanism.prototype.response=function(e){return e.trace||""},Mechanism.prototype.challenge=function(e){},t.exports=Mechanism})},{}],"/home/michel/stanza.io/node_modules/sasl-anonymous/main.js":[function(t,n,i){!function(r,s){"object"==typeof i?s(i,n,t("./lib/mechanism")):"function"==typeof e&&e.amd&&e(["exports","module","./lib/mechanism"],s)}(0,function(e,t,n){e=t.exports=n,e.Mechanism=n})},{"./lib/mechanism":"/home/michel/stanza.io/node_modules/sasl-anonymous/lib/mechanism.js"}],"/home/michel/stanza.io/node_modules/sasl-external/lib/mechanism.js":[function(t,n,i){!function(t,r){"object"==typeof i?r(i,n):"function"==typeof e&&e.amd&&e(["exports","module"],r)}(0,function(e,t){function Mechanism(){}Mechanism.prototype.name="EXTERNAL",Mechanism.prototype.clientFirst=!0,Mechanism.prototype.response=function(e){return e.authzid||""},Mechanism.prototype.challenge=function(e){},t.exports=Mechanism})},{}],"/home/michel/stanza.io/node_modules/sasl-external/main.js":[function(e,t,n){arguments[4]["/home/michel/stanza.io/node_modules/sasl-anonymous/main.js"][0].apply(n,arguments)},{"./lib/mechanism":"/home/michel/stanza.io/node_modules/sasl-external/lib/mechanism.js"}],"/home/michel/stanza.io/node_modules/sasl-plain/lib/mechanism.js":[function(t,n,i){!function(t,r){"object"==typeof i?r(i,n):"function"==typeof e&&e.amd&&e(["exports","module"],r)}(0,function(e,t){function Mechanism(){}Mechanism.prototype.name="PLAIN",Mechanism.prototype.clientFirst=!0,Mechanism.prototype.response=function(e){var t="";return t+=e.authzid||"",t+="\0",t+=e.username,t+="\0",t+=e.password},Mechanism.prototype.challenge=function(e){return this},t.exports=Mechanism})},{}],"/home/michel/stanza.io/node_modules/sasl-plain/main.js":[function(e,t,n){arguments[4]["/home/michel/stanza.io/node_modules/sasl-anonymous/main.js"][0].apply(n,arguments)},{"./lib/mechanism":"/home/michel/stanza.io/node_modules/sasl-plain/lib/mechanism.js"}],"/home/michel/stanza.io/node_modules/sasl-scram-sha-1/index.js":[function(e,t,n){(function(n){function Mechanism(e){e=e||{},this._genNonce=e.genNonce||r.genNonce,this._stage="initial"}var i=e("./lib/bitops"),r=e("./lib/utils"),s={};Mechanism.Mechanism=Mechanism,Mechanism.prototype.name="SCRAM-SHA-1",Mechanism.prototype.clientFirst=!0,Mechanism.prototype.response=function(e){return s[this._stage](this,e)},Mechanism.prototype.challenge=function(e){var t=r.parse(e);return this._salt=new n(t.s||"","base64"),this._iterationCount=parseInt(t.i,10),this._nonce=t.r,this._verifier=t.v,this._error=t.e,this._challenge=e,this},s.initial=function(e,t){e._cnonce=e._genNonce();var n="";t.authzid&&(n="a="+r.saslname(t.authzid)),e._gs2Header="n,"+n+",";var i="r="+e._cnonce,s="n="+r.saslname(t.username||"");e._clientFirstMessageBare=s+","+i;var o=e._gs2Header+e._clientFirstMessageBare;return e._stage="challenge",o},s.challenge=function(e,t){var r=new n(e._gs2Header).toString("base64");e._clientFinalMessageWithoutProof="c="+r+",r="+e._nonce;var s,o,a;t.salt&&0===n.compare(t.salt,e._salt)?t.clientKey&&t.serverKey?(o=t.clientKey,a=t.serverKey):t.saltedPassword&&(s=t.saltedPassword,o=i.HMAC(s,"Client Key"),a=i.HMAC(s,"Server Key")):(s=i.Hi(t.password||"",e._salt,e._iterationCount),o=i.HMAC(s,"Client Key"),a=i.HMAC(s,"Server Key"));var c=i.H(o),u=e._clientFirstMessageBare+","+e._challenge+","+e._clientFinalMessageWithoutProof,l=i.HMAC(c,u),d=i.XOR(o,l).toString("base64");e._serverSignature=i.HMAC(a,u);var f=e._clientFinalMessageWithoutProof+",p="+d;return e._stage="final",e.cache={salt:e._salt,saltedPassword:s,clientKey:o,serverKey:a},f},s.final=function(){return""},t.exports=Mechanism}).call(this,e("buffer").Buffer)},{"./lib/bitops":"/home/michel/stanza.io/node_modules/sasl-scram-sha-1/lib/bitops.js","./lib/utils":"/home/michel/stanza.io/node_modules/sasl-scram-sha-1/lib/utils.js",buffer:"/home/michel/stanza.io/node_modules/buffer/index.js"}],"/home/michel/stanza.io/node_modules/sasl-scram-sha-1/lib/bitops.js":[function(e,t,n){(function(t){var i=e("create-hash"),r=e("create-hmac"),s=e("bitwise-xor");n.XOR=s,n.H=function(e){return i("sha1").update(e).digest()},n.HMAC=function(e,t){return r("sha1",e).update(t).digest()},n.Hi=function(e,i,r){for(var s=n.HMAC(e,t.concat([i,new t([0,0,0,1],"binary")])),o=s,a=0;a<r-1;a++)s=n.HMAC(e,s),o=n.XOR(o,s);return o}}).call(this,e("buffer").Buffer)},{"bitwise-xor":"/home/michel/stanza.io/node_modules/bitwise-xor/index.js",buffer:"/home/michel/stanza.io/node_modules/buffer/index.js","create-hash":"/home/michel/stanza.io/node_modules/create-hash/browser.js","create-hmac":"/home/michel/stanza.io/node_modules/create-hmac/browser.js"}],"/home/michel/stanza.io/node_modules/sasl-scram-sha-1/lib/utils.js":[function(e,t,n){var i=e("randombytes").randomBytes||e("randombytes");n.parse=function(e){for(var t={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/),i=0,r=n.length;i<r;i++){var s=/(\w+)=["]?([^"]+)["]?$/.exec(n[i]);s&&(t[s[1]]=s[2])}return t},n.saslname=function(e){for(var t=[],n="",i=0;i<e.length;i++)n=e[i],","===n?t.push("=2C"):"="===n?t.push("=3D"):t.push(n);return t.join("")},n.genNonce=function(e){return i((e||32)/2).toString("hex")}},{randombytes:"/home/michel/stanza.io/node_modules/randombytes/browser.js"}],"/home/michel/stanza.io/node_modules/sasl-x-oauth2/lib/mechanism.js":[function(t,n,i){!function(t,r){"object"==typeof i?r(i,n):"function"==typeof e&&e.amd&&e(["exports","module"],r)}(0,function(e,t){function Mechanism(){}Mechanism.prototype.name="X-OAUTH2",Mechanism.prototype.clientFirst=!0,Mechanism.prototype.response=function(e){var t="";return t+="\0",t+=e.username,t+="\0",t+=e.token},Mechanism.prototype.challenge=function(e){},t.exports=Mechanism})},{}],"/home/michel/stanza.io/node_modules/sasl-x-oauth2/main.js":[function(e,t,n){arguments[4]["/home/michel/stanza.io/node_modules/sasl-anonymous/main.js"][0].apply(n,arguments)},{"./lib/mechanism":"/home/michel/stanza.io/node_modules/sasl-x-oauth2/lib/mechanism.js"}],"/home/michel/stanza.io/node_modules/saslmechanisms/lib/factory.js":[function(t,n,i){!function(t,r){"object"==typeof i?r(i,n):"function"==typeof e&&e.amd&&e(["exports","module"],r)}(0,function(e,t){function Factory(){this._mechs=[]}Factory.prototype.use=function(e,t){return t||(t=e,e=t.prototype.name),this._mechs.push({name:e,mech:t}),this},Factory.prototype.create=function(e){for(var t=0,n=this._mechs.length;t<n;t++)for(var i=0,r=e.length;i<r;i++){var s=this._mechs[t];if(s.name==e[i])return new s.mech}return null},t.exports=Factory})},{}],"/home/michel/stanza.io/node_modules/saslmechanisms/main.js":[function(t,n,i){!function(r,s){"object"==typeof i?s(i,n,t("./lib/factory")):"function"==typeof e&&e.amd&&e(["exports","module","./lib/factory"],s)}(0,function(e,t,n){e=t.exports=n,e.Factory=n})},{"./lib/factory":"/home/michel/stanza.io/node_modules/saslmechanisms/lib/factory.js"}],"/home/michel/stanza.io/node_modules/sdp-jingle-json/index.js":[function(e,t,n){var i=e("./lib/tosdp"),r=e("./lib/tojson");n.toIncomingSDPOffer=function(e){return i.toSessionSDP(e,{role:"responder",direction:"incoming"})},n.toOutgoingSDPOffer=function(e){return i.toSessionSDP(e,{role:"initiator",direction:"outgoing"})},n.toIncomingSDPAnswer=function(e){return i.toSessionSDP(e,{role:"initiator",direction:"incoming"})},n.toOutgoingSDPAnswer=function(e){return i.toSessionSDP(e,{role:"responder",direction:"outgoing"})},n.toIncomingMediaSDPOffer=function(e){return i.toMediaSDP(e,{role:"responder",direction:"incoming"})},n.toOutgoingMediaSDPOffer=function(e){return i.toMediaSDP(e,{role:"initiator",direction:"outgoing"})},n.toIncomingMediaSDPAnswer=function(e){return i.toMediaSDP(e,{role:"initiator",direction:"incoming"})},n.toOutgoingMediaSDPAnswer=function(e){return i.toMediaSDP(e,{role:"responder",direction:"outgoing"})},n.toCandidateSDP=i.toCandidateSDP,n.toMediaSDP=i.toMediaSDP,n.toSessionSDP=i.toSessionSDP,n.toIncomingJSONOffer=function(e,t){return r.toSessionJSON(e,{role:"responder",direction:"incoming",creators:t})},n.toOutgoingJSONOffer=function(e,t){return r.toSessionJSON(e,{role:"initiator",direction:"outgoing",creators:t})},n.toIncomingJSONAnswer=function(e,t){return r.toSessionJSON(e,{role:"initiator",direction:"incoming",creators:t})},n.toOutgoingJSONAnswer=function(e,t){return r.toSessionJSON(e,{role:"responder",direction:"outgoing",creators:t})},n.toIncomingMediaJSONOffer=function(e,t){return r.toMediaJSON(e,{role:"responder",direction:"incoming",creator:t})},n.toOutgoingMediaJSONOffer=function(e,t){return r.toMediaJSON(e,{role:"initiator",direction:"outgoing",creator:t})},n.toIncomingMediaJSONAnswer=function(e,t){return r.toMediaJSON(e,{role:"initiator",direction:"incoming",creator:t})},n.toOutgoingMediaJSONAnswer=function(e,t){return r.toMediaJSON(e,{role:"responder",direction:"outgoing",creator:t})},n.toCandidateJSON=r.toCandidateJSON,n.toMediaJSON=r.toMediaJSON,n.toSessionJSON=r.toSessionJSON},{"./lib/tojson":"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/tojson.js","./lib/tosdp":"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/tosdp.js"}],"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/parsers.js":[function(e,t,n){n.lines=function(e){return e.split("\r\n").filter(function(e){return e.length>0})},n.findLine=function(e,t,n){for(var i=e.length,r=0;r<t.length;r++)if(t[r].substr(0,i)===e)return t[r];if(!n)return!1;for(var s=0;s<n.length;s++)if(n[s].substr(0,i)===e)return n[s];return!1},n.findLines=function(e,t,n){for(var i=[],r=e.length,s=0;s<t.length;s++)t[s].substr(0,r)===e&&i.push(t[s]);if(i.length||!n)return i;for(var o=0;o<n.length;o++)n[o].substr(0,r)===e&&i.push(n[o]);return i},n.mline=function(e){for(var t=e.substr(2).split(" "),n={media:t[0],port:t[1],proto:t[2],formats:[]},i=3;i<t.length;i++)t[i]&&n.formats.push(t[i]);return n},n.rtpmap=function(e){var t=e.substr(9).split(" "),n={id:t.shift()};return t=t[0].split("/"),n.name=t[0],n.clockrate=t[1],n.channels=3==t.length?t[2]:"1",n},n.sctpmap=function(e){var t=e.substr(10).split(" ");return{number:t.shift(),protocol:t.shift(),streams:t.shift()}},n.fmtp=function(e){for(var t,n,i,r=e.substr(e.indexOf(" ")+1).split(";"),s=[],o=0;o<r.length;o++)t=r[o].split("="),n=t[0].trim(),i=t[1],n&&i?s.push({key:n,value:i}):n&&s.push({key:"",value:n});return s},n.crypto=function(e){var t=e.substr(9).split(" ");return{tag:t[0],cipherSuite:t[1],keyParams:t[2],sessionParams:t.slice(3).join(" ")}},n.fingerprint=function(e){var t=e.substr(14).split(" ");return{hash:t[0],value:t[1]}},n.extmap=function(e){var t=e.substr(9).split(" "),n={},i=t.shift(),r=i.indexOf("/");return r>=0?(n.id=i.substr(0,r),n.senders=i.substr(r+1)):(n.id=i,n.senders="sendrecv"),n.uri=t.shift()||"",n},n.rtcpfb=function(e){var t=e.substr(10).split(" "),n={};return n.id=t.shift(),n.type=t.shift(),"trr-int"===n.type?n.value=t.shift():n.subtype=t.shift()||"",n.parameters=t,n},n.candidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:t[3],ip:t[4],port:t[5],type:t[7],generation:"0"},i=8;i<t.length;i+=2)"raddr"===t[i]?n.relAddr=t[i+1]:"rport"===t[i]?n.relPort=t[i+1]:"generation"===t[i]?n.generation=t[i+1]:"tcptype"===t[i]&&(n.tcpType=t[i+1]);return n.network="1",n},n.sourceGroups=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].substr(13).split(" ");t.push({semantics:i.shift(),sources:i})}return t},n.sources=function(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i].substr(7).split(" "),s=r.shift();if(!n[s]){var o={ssrc:s,parameters:[]};t.push(o),n[s]=o}r=r.join(" ").split(":");var a=r.shift(),c=r.join(":")||null;n[s].parameters.push({key:a,value:c})}return t},n.groups=function(e){for(var t,n=[],i=0;i<e.length;i++)t=e[i].substr(8).split(" "),n.push({semantics:t.shift(),contents:t});return n},n.bandwidth=function(e){var t=e.substr(2).split(":"),n={};return n.type=t.shift(),n.bandwidth=t.shift(),n},n.msid=function(e){var t=e.substr(7),n=t.split(" ");return{msid:t,mslabel:n[0],label:n[1]}}},{}],"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/senders.js":[function(e,t,n){t.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/tojson.js":[function(e,t,n){var i=e("./senders"),r=e("./parsers"),s=Math.random();n._setIdCounter=function(e){s=e},n.toSessionJSON=function(e,t){var i,s=t.creators||[],o=t.role||"initiator",a=t.direction||"outgoing",c=e.split("\r\nm=");for(i=1;i<c.length;i++)c[i]="m="+c[i],i!==c.length-1&&(c[i]+="\r\n");var u=c.shift()+"\r\n",l=r.lines(u),d={},f=[];for(i=0;i<c.length;i++)f.push(n.toMediaJSON(c[i],u,{role:o,direction:a,creator:s[i]||"initiator"}));d.contents=f;var h=r.findLines("a=group:",l);return h.length&&(d.groups=r.groups(h)),d},n.toMediaJSON=function(e,t,s){var o=s.creator||"initiator",a=s.role||"initiator",c=s.direction||"outgoing",u=r.lines(e),l=r.lines(t),d=r.mline(u[0]),f={creator:o,name:d.media,application:{applicationType:"rtp",media:d.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==d.media&&(f.application={applicationType:"datachannel"},f.transport.sctp=[]);var h=f.application,m=f.transport,p=r.findLine("a=mid:",u);if(p&&(f.name=p.substr(6)),r.findLine("a=sendrecv",u,l)?f.senders="both":r.findLine("a=sendonly",u,l)?f.senders=i[a][c].sendonly:r.findLine("a=recvonly",u,l)?f.senders=i[a][c].recvonly:r.findLine("a=inactive",u,l)&&(f.senders="none"),"rtp"==h.applicationType){var b=r.findLine("b=",u);b&&(h.bandwidth=r.bandwidth(b));var g=r.findLine("a=ssrc:",u);g&&(h.ssrc=g.substr(7).split(" ")[0]);r.findLines("a=rtpmap:",u).forEach(function(e){var t=r.rtpmap(e);t.parameters=[],t.feedback=[],r.findLines("a=fmtp:"+t.id,u).forEach(function(e){t.parameters=r.fmtp(e)}),r.findLines("a=rtcp-fb:"+t.id,u).forEach(function(e){t.feedback.push(r.rtcpfb(e))}),h.payloads.push(t)});r.findLines("a=crypto:",u,l).forEach(function(e){h.encryption.push(r.crypto(e))}),r.findLine("a=rtcp-mux",u)&&(h.mux=!0);r.findLines("a=rtcp-fb:*",u).forEach(function(e){h.feedback.push(r.rtcpfb(e))});r.findLines("a=extmap:",u).forEach(function(e){var t=r.extmap(e);t.senders=i[a][c][t.senders],h.headerExtensions.push(t)});var _=r.findLines("a=ssrc-group:",u);h.sourceGroups=r.sourceGroups(_||[]);var y=r.findLines("a=ssrc:",u),v=h.sources=r.sources(y||[]),x=r.findLine("a=msid:",u);if(x){var j=r.msid(x);["msid","mslabel","label"].forEach(function(e){for(var t=0;t<v.length;t++){for(var n=!1,i=0;i<v[t].parameters.length;i++)v[t].parameters[i].key===e&&(n=!0);n||v[t].parameters.push({key:e,value:j[e]})}})}r.findLine("a=x-google-flag:conference",u,l)&&(h.googConferenceFlag=!0)}var S=r.findLines("a=fingerprint:",u,l),w=r.findLine("a=setup:",u,l);S.forEach(function(e){var t=r.fingerprint(e);w&&(t.setup=w.substr(8)),m.fingerprints.push(t)});var E=r.findLine("a=ice-ufrag:",u,l),A=r.findLine("a=ice-pwd:",u,l);if(E&&A){m.ufrag=E.substr(12),m.pwd=A.substr(10),m.candidates=[];r.findLines("a=candidate:",u,l).forEach(function(e){m.candidates.push(n.toCandidateJSON(e))})}if("datachannel"==h.applicationType){r.findLines("a=sctpmap:",u).forEach(function(e){var t=r.sctpmap(e);m.sctp.push(t)})}return f},n.toCandidateJSON=function(e){var t=r.candidate(e.split("\r\n")[0]);return t.id=(s++).toString(36).substr(0,12),t}},{"./parsers":"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/parsers.js","./senders":"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/senders.js"}],"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/tosdp.js":[function(e,t,n){var i=e("./senders");n.toSessionSDP=function(e,t){var i=(t.role,t.direction,t.sid||e.sid||Date.now()),r=t.time||Date.now(),s=["v=0","o=- "+i+" "+r+" IN IP4 0.0.0.0","s=-","t=0 0"],o=e.contents||[],a=!1;return o.forEach(function(e){e.application.sources&&e.application.sources.length&&(a=!0)}),a&&s.push("a=msid-semantic: WMS *"),(e.groups||[]).forEach(function(e){s.push("a=group:"+e.semantics+" "+e.contents.join(" "))}),o.forEach(function(e){s.push(n.toMediaSDP(e,t))}),s.join("\r\n")+"\r\n"},n.toMediaSDP=function(e,t){var r=[],s=t.role||"initiator",o=t.direction||"outgoing",a=e.application,c=e.transport,u=a.payloads||[],l=c&&c.fingerprints||[],d=[];if("datachannel"==a.applicationType?(d.push("application"),d.push("1"),d.push("DTLS/SCTP"),c.sctp&&c.sctp.forEach(function(e){d.push(e.number)})):(d.push(a.media),d.push("1"),l.length>0?d.push("UDP/TLS/RTP/SAVPF"):a.encryption&&a.encryption.length>0?d.push("RTP/SAVPF"):d.push("RTP/AVPF"),u.forEach(function(e){d.push(e.id)})),r.push("m="+d.join(" ")),r.push("c=IN IP4 0.0.0.0"),a.bandwidth&&a.bandwidth.type&&a.bandwidth.bandwidth&&r.push("b="+a.bandwidth.type+":"+a.bandwidth.bandwidth),"rtp"==a.applicationType&&r.push("a=rtcp:1 IN IP4 0.0.0.0"),c){c.ufrag&&r.push("a=ice-ufrag:"+c.ufrag),c.pwd&&r.push("a=ice-pwd:"+c.pwd);l.forEach(function(e){r.push("a=fingerprint:"+e.hash+" "+e.value),e.setup&&r.push("a=setup:"+e.setup)}),c.sctp&&c.sctp.forEach(function(e){r.push("a=sctpmap:"+e.number+" "+e.protocol+" "+e.streams)})}return"rtp"==a.applicationType&&r.push("a="+(i[s][o][e.senders]||"sendrecv")),r.push("a=mid:"+e.name),a.sources&&a.sources.length&&(a.sources[0].parameters||[]).forEach(function(e){"msid"===e.key&&r.push("a=msid:"+e.value)}),a.mux&&r.push("a=rtcp-mux"),(a.encryption||[]).forEach(function(e){r.push("a=crypto:"+e.tag+" "+e.cipherSuite+" "+e.keyParams+(e.sessionParams?" "+e.sessionParams:""))}),a.googConferenceFlag&&r.push("a=x-google-flag:conference"),u.forEach(function(e){var t="a=rtpmap:"+e.id+" "+e.name+"/"+e.clockrate;if(e.channels&&"1"!=e.channels&&(t+="/"+e.channels),r.push(t),e.parameters&&e.parameters.length){var n=["a=fmtp:"+e.id],i=[];e.parameters.forEach(function(e){i.push((e.key?e.key+"=":"")+e.value)}),n.push(i.join(";")),r.push(n.join(" "))}e.feedback&&e.feedback.forEach(function(t){"trr-int"===t.type?r.push("a=rtcp-fb:"+e.id+" trr-int "+(t.value?t.value:"0")):r.push("a=rtcp-fb:"+e.id+" "+t.type+(t.subtype?" "+t.subtype:""))})}),a.feedback&&a.feedback.forEach(function(e){"trr-int"===e.type?r.push("a=rtcp-fb:* trr-int "+(e.value?e.value:"0")):r.push("a=rtcp-fb:* "+e.type+(e.subtype?" "+e.subtype:""))}),(a.headerExtensions||[]).forEach(function(e){r.push("a=extmap:"+e.id+(e.senders?"/"+i[s][o][e.senders]:"")+" "+e.uri)}),(a.sourceGroups||[]).forEach(function(e){r.push("a=ssrc-group:"+e.semantics+" "+e.sources.join(" "))}),(a.sources||[]).forEach(function(e){for(var t=0;t<e.parameters.length;t++){var n=e.parameters[t];r.push("a=ssrc:"+(e.ssrc||a.ssrc)+" "+n.key+(n.value?":"+n.value:""))}}),(c.candidates||[]).forEach(function(e){r.push(n.toCandidateSDP(e))}),r.join("\r\n")},n.toCandidateSDP=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"srflx"!==n&&"prflx"!==n&&"relay"!==n||e.relAddr&&e.relPort&&(t.push("raddr"),t.push(e.relAddr),t.push("rport"),t.push(e.relPort)),e.tcpType&&"TCP"==e.protocol.toUpperCase()&&(t.push("tcptype"),t.push(e.tcpType)),t.push("generation"),t.push(e.generation||"0"),"a=candidate:"+t.join(" ")}},{"./senders":"/home/michel/stanza.io/node_modules/sdp-jingle-json/lib/senders.js"}],"/home/michel/stanza.io/node_modules/sha.js/hash.js":[function(e,t,n){function Hash(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var i=e("safe-buffer").Buffer;Hash.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=i.from(e,t));for(var n=this._block,r=this._blockSize,s=e.length,o=this._len,a=0;a<s;){for(var c=o%r,u=Math.min(s-a,r-c),l=0;l<u;l++)n[c+l]=e[a+l];o+=u,a+=u,o%r==0&&this._update(n)}return this._len+=s,this},Hash.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=4294967295&n,r=(n-i)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=Hash},{"safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/sha.js/index.js":[function(e,t,n){var n=t.exports=function SHA(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":"/home/michel/stanza.io/node_modules/sha.js/sha.js","./sha1":"/home/michel/stanza.io/node_modules/sha.js/sha1.js","./sha224":"/home/michel/stanza.io/node_modules/sha.js/sha224.js","./sha256":"/home/michel/stanza.io/node_modules/sha.js/sha256.js","./sha384":"/home/michel/stanza.io/node_modules/sha.js/sha384.js","./sha512":"/home/michel/stanza.io/node_modules/sha.js/sha512.js"}],"/home/michel/stanza.io/node_modules/sha.js/sha.js":[function(e,t,n){function Sha(){this.init(),this._w=a,r.call(this,64,56)}function rotl5(e){return e<<5|e>>>27}function rotl30(e){return e<<30|e>>>2}function ft(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}var i=e("inherits"),r=e("./hash"),s=e("safe-buffer").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);i(Sha,r),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,r=0|this._c,s=0|this._d,a=0|this._e,c=0;c<16;++c)t[c]=e.readInt32BE(4*c);for(;c<80;++c)t[c]=t[c-3]^t[c-8]^t[c-14]^t[c-16];for(var u=0;u<80;++u){var l=~~(u/20),d=rotl5(n)+ft(l,i,r,s)+a+t[u]+o[l]|0;a=s,s=r,r=rotl30(i),i=n,n=d}this._a=n+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},Sha.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=Sha},{"./hash":"/home/michel/stanza.io/node_modules/sha.js/hash.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/sha.js/sha1.js":[function(e,t,n){function Sha1(){this.init(),this._w=a,r.call(this,64,56)}function rotl1(e){return e<<1|e>>>31}function rotl5(e){return e<<5|e>>>27}function rotl30(e){return e<<30|e>>>2}function ft(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}var i=e("inherits"),r=e("./hash"),s=e("safe-buffer").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);i(Sha1,r),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,r=0|this._c,s=0|this._d,a=0|this._e,c=0;c<16;++c)t[c]=e.readInt32BE(4*c);for(;c<80;++c)t[c]=rotl1(t[c-3]^t[c-8]^t[c-14]^t[c-16]);for(var u=0;u<80;++u){var l=~~(u/20),d=rotl5(n)+ft(l,i,r,s)+a+t[u]+o[l]|0;a=s,s=r,r=rotl30(i),i=n,n=d}this._a=n+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},
Sha1.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=Sha1},{"./hash":"/home/michel/stanza.io/node_modules/sha.js/hash.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/sha.js/sha224.js":[function(e,t,n){function Sha224(){this.init(),this._w=a,s.call(this,64,56)}var i=e("inherits"),r=e("./sha256"),s=e("./hash"),o=e("safe-buffer").Buffer,a=new Array(64);i(Sha224,r),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=Sha224},{"./hash":"/home/michel/stanza.io/node_modules/sha.js/hash.js","./sha256":"/home/michel/stanza.io/node_modules/sha.js/sha256.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/sha.js/sha256.js":[function(e,t,n){function Sha256(){this.init(),this._w=a,r.call(this,64,56)}function ch(e,t,n){return n^e&(t^n)}function maj(e,t,n){return e&t|n&(e|t)}function sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function gamma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function gamma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var i=e("inherits"),r=e("./hash"),s=e("safe-buffer").Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);i(Sha256,r),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,r=0|this._c,s=0|this._d,a=0|this._e,c=0|this._f,u=0|this._g,l=0|this._h,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<64;++d)t[d]=gamma1(t[d-2])+t[d-7]+gamma0(t[d-15])+t[d-16]|0;for(var f=0;f<64;++f){var h=l+sigma1(a)+ch(a,c,u)+o[f]+t[f]|0,m=sigma0(n)+maj(n,i,r)|0;l=u,u=c,c=a,a=s+h|0,s=r,r=i,i=n,n=h+m|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=r+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=c+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0},Sha256.prototype._hash=function(){var e=s.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=Sha256},{"./hash":"/home/michel/stanza.io/node_modules/sha.js/hash.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/sha.js/sha384.js":[function(e,t,n){function Sha384(){this.init(),this._w=a,s.call(this,128,112)}var i=e("inherits"),r=e("./sha512"),s=e("./hash"),o=e("safe-buffer").Buffer,a=new Array(160);i(Sha384,r),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){function writeInt64BE(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}var e=o.allocUnsafe(48);return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),e},t.exports=Sha384},{"./hash":"/home/michel/stanza.io/node_modules/sha.js/hash.js","./sha512":"/home/michel/stanza.io/node_modules/sha.js/sha512.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/sha.js/sha512.js":[function(e,t,n){function Sha512(){this.init(),this._w=a,r.call(this,128,112)}function Ch(e,t,n){return n^e&(t^n)}function maj(e,t,n){return e&t|n&(e|t)}function sigma0(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function sigma1(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function Gamma0(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Gamma0l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function Gamma1(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function Gamma1l(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function getCarry(e,t){return e>>>0<t>>>0?1:0}var i=e("inherits"),r=e("./hash"),s=e("safe-buffer").Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);i(Sha512,r),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(e){for(var t=this._w,n=0|this._ah,i=0|this._bh,r=0|this._ch,s=0|this._dh,a=0|this._eh,c=0|this._fh,u=0|this._gh,l=0|this._hh,d=0|this._al,f=0|this._bl,h=0|this._cl,m=0|this._dl,p=0|this._el,b=0|this._fl,g=0|this._gl,_=0|this._hl,y=0;y<32;y+=2)t[y]=e.readInt32BE(4*y),t[y+1]=e.readInt32BE(4*y+4);for(;y<160;y+=2){var v=t[y-30],x=t[y-30+1],j=Gamma0(v,x),S=Gamma0l(x,v);v=t[y-4],x=t[y-4+1];var w=Gamma1(v,x),E=Gamma1l(x,v),A=t[y-14],N=t[y-14+1],O=t[y-32],T=t[y-32+1],C=S+N|0,I=j+A+getCarry(C,S)|0;C=C+E|0,I=I+w+getCarry(C,E)|0,C=C+T|0,I=I+O+getCarry(C,T)|0,t[y]=I,t[y+1]=C}for(var R=0;R<160;R+=2){I=t[R],C=t[R+1];var z=maj(n,i,r),M=maj(d,f,h),k=sigma0(n,d),L=sigma0(d,n),B=sigma1(a,p),P=sigma1(p,a),D=o[R],U=o[R+1],F=Ch(a,c,u),q=Ch(p,b,g),G=_+P|0,J=l+B+getCarry(G,_)|0;G=G+q|0,J=J+F+getCarry(G,q)|0,G=G+U|0,J=J+D+getCarry(G,U)|0,G=G+C|0,J=J+I+getCarry(G,C)|0;var H=L+M|0,V=k+z+getCarry(H,L)|0;l=u,_=g,u=c,g=b,c=a,b=p,p=m+G|0,a=s+J+getCarry(p,m)|0,s=r,m=h,r=i,h=f,i=n,f=d,d=G+H|0,n=J+V+getCarry(d,G)|0}this._al=this._al+d|0,this._bl=this._bl+f|0,this._cl=this._cl+h|0,this._dl=this._dl+m|0,this._el=this._el+p|0,this._fl=this._fl+b|0,this._gl=this._gl+g|0,this._hl=this._hl+_|0,this._ah=this._ah+n+getCarry(this._al,d)|0,this._bh=this._bh+i+getCarry(this._bl,f)|0,this._ch=this._ch+r+getCarry(this._cl,h)|0,this._dh=this._dh+s+getCarry(this._dl,m)|0,this._eh=this._eh+a+getCarry(this._el,p)|0,this._fh=this._fh+c+getCarry(this._fl,b)|0,this._gh=this._gh+u+getCarry(this._gl,g)|0,this._hh=this._hh+l+getCarry(this._hl,_)|0},Sha512.prototype._hash=function(){function writeInt64BE(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}var e=s.allocUnsafe(64);return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),e},t.exports=Sha512},{"./hash":"/home/michel/stanza.io/node_modules/sha.js/hash.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/index.js":[function(e,t,n){function Stream(){i.call(this)}t.exports=Stream;var i=e("events").EventEmitter;e("inherits")(Stream,i),Stream.Readable=e("readable-stream/readable.js"),Stream.Writable=e("readable-stream/writable.js"),Stream.Duplex=e("readable-stream/duplex.js"),Stream.Transform=e("readable-stream/transform.js"),Stream.PassThrough=e("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,t){function ondata(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function ondrain(){n.readable&&n.resume&&n.resume()}function onend(){r||(r=!0,e.end())}function onclose(){r||(r=!0,"function"==typeof e.destroy&&e.destroy())}function onerror(e){if(cleanup(),0===i.listenerCount(this,"error"))throw e}function cleanup(){n.removeListener("data",ondata),e.removeListener("drain",ondrain),n.removeListener("end",onend),n.removeListener("close",onclose),n.removeListener("error",onerror),e.removeListener("error",onerror),n.removeListener("end",cleanup),n.removeListener("close",cleanup),e.removeListener("close",cleanup)}var n=this;n.on("data",ondata),e.on("drain",ondrain),e._isStdio||t&&!1===t.end||(n.on("end",onend),n.on("close",onclose));var r=!1;return n.on("error",onerror),e.on("error",onerror),n.on("end",cleanup),n.on("close",cleanup),e.on("close",cleanup),e.emit("pipe",n),e}},{events:"/home/michel/stanza.io/node_modules/events/events.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","readable-stream/duplex.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/duplex-browser.js","readable-stream/passthrough.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/passthrough.js","readable-stream/readable.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/readable-browser.js","readable-stream/transform.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/transform.js","readable-stream/writable.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/writable-browser.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/isarray/index.js":[function(e,t,n){arguments[4]["/home/michel/stanza.io/node_modules/buffer/node_modules/isarray/index.js"][0].apply(n,arguments)},{}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/duplex-browser.js":[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js":[function(e,t,n){"use strict";function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||i(onEndNT,this)}function onEndNT(e){e.end()}var i=e("process-nextick-args"),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=Duplex;var s=e("core-util-is");s.inherits=e("inherits");var o=e("./_stream_readable"),a=e("./_stream_writable");s.inherits(Duplex,o);for(var c=r(a.prototype),u=0;u<c.length;u++){var l=c[u];Duplex.prototype[l]||(Duplex.prototype[l]=a.prototype[l])}Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex.prototype._destroy=function(e,t){this.push(null),this.end(),i(t,e)}},{"./_stream_readable":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js","./_stream_writable":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js","core-util-is":"/home/michel/stanza.io/node_modules/core-util-is/lib/util.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","process-nextick-args":"/home/michel/stanza.io/node_modules/process-nextick-args/index.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_passthrough.js":[function(e,t,n){"use strict";function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);i.call(this,e)}t.exports=PassThrough;var i=e("./_stream_transform"),r=e("core-util-is");r.inherits=e("inherits"),r.inherits(PassThrough,i),PassThrough.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js","core-util-is":"/home/michel/stanza.io/node_modules/core-util-is/lib/util.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js":[function(e,t,n){(function(n,i){"use strict";function _uint8ArrayToBuffer(e){return u.from(e)}function _isUint8Array(e){return u.isBuffer(e)||e instanceof l}function prependListener(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function ReadableState(t,n){s=s||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof s&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(m||(m=e("string_decoder/").StringDecoder),this.decoder=new m(t.encoding),this.encoding=t.encoding)}function Readable(t){if(s=s||e("./_stream_duplex"),!(this instanceof Readable))return new Readable(t);this._readableState=new ReadableState(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function readableAddChunk(e,t,n,i,r){var s=e._readableState;if(null===t)s.reading=!1,onEofChunk(e,s);else{var o;r||(o=chunkInvalid(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=_uint8ArrayToBuffer(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):addChunk(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?addChunk(e,s,t,!1):maybeReadMore(e,s)):addChunk(e,s,t,!1))):i||(s.reading=!1)}return needMoreData(s)}function addChunk(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var n;return _isUint8Array(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function computeNewHighWaterMark(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){h("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,r(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){h("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r(resume_,e,t))}function resume_(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=fromListPartial(e,t.buffer,t.decoder),n}function fromListPartial(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(o===s.length?r+=s:r+=s.slice(0,e),0===(e-=o)){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}function copyFromBuffer(e,t){var n=u.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var s=i.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),0===(e-=o)){o===s.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(o));break}++r}return t.length-=r,n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}var r=e("process-nextick-args");t.exports=Readable;var s,o=e("isarray");Readable.ReadableState=ReadableState;var a=(e("events").EventEmitter,function(e,t){return e.listeners(t).length}),c=e("./internal/streams/stream"),u=e("safe-buffer").Buffer,l=i.Uint8Array||function(){},d=e("core-util-is");d.inherits=e("inherits");var f=e("util"),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var m,p=e("./internal/streams/BufferList"),b=e("./internal/streams/destroy");d.inherits(Readable,c);var g=["error","close","destroy","pause","resume"];Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=b.destroy,Readable.prototype._undestroy=b.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=u.from(e,t),t=""),n=!0),readableAddChunk(this,e,t,!1,n)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(t){return m||(m=e("string_decoder/").StringDecoder),this._readableState.decoder=new m(t),this._readableState.encoding=t,this};var _=8388608;Readable.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var i=t.needReadable;h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,h("length less than watermark",i)),t.ended||t.reading?(i=!1,h("reading or ended",i)):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(n,t)));var r;return r=e>0?fromList(e,t):null,null===r?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&endReadable(this)),null!==r&&this.emit("data",r),r},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){function onunpipe(e,t){h("onunpipe"),e===i&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,cleanup())}function onend(){h("onend"),e.end()}function cleanup(){h("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),e.removeListener("drain",u),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),i.removeListener("end",onend),i.removeListener("end",unpipe),i.removeListener("data",ondata),l=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||u()}function ondata(t){h("ondata"),d=!1,!1!==e.write(t)||d||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==indexOf(s.pipes,e))&&!l&&(h("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,d=!0),i.pause())}function onerror(t){h("onerror",t),unpipe(),e.removeListener("error",onerror),0===a(e,"error")&&e.emit("error",t)}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){h("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){h("unpipe"),i.unpipe(e)}var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,h("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,c=o?onend:unpipe;s.endEmitted?r(c):i.once("end",c),e.on("unpipe",onunpipe);var u=pipeOnDrain(i);e.on("drain",u);var l=!1,d=!1;return i.on("data",ondata),prependListener(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",i),s.flowing||(h("pipe resume"),i.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,n);return this}var o=indexOf(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},Readable.prototype.on=function(e,t){var n=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):r(nReadingNextTick,this))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(h("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(h("wrapped data"),t.decoder&&(r=t.decoder.write(r)),(!t.objectMode||null!==r&&void 0!==r)&&(t.objectMode||r&&r.length)){i.push(r)||(n=!0,e.pause())}});for(var r in e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var s=0;s<g.length;s++)e.on(g[s],i.emit.bind(i,g[s]));return i._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},i},Readable._fromList=fromList}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js","./internal/streams/BufferList":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/BufferList.js","./internal/streams/destroy":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js","./internal/streams/stream":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js",_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js","core-util-is":"/home/michel/stanza.io/node_modules/core-util-is/lib/util.js",events:"/home/michel/stanza.io/node_modules/events/events.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js",isarray:"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/isarray/index.js","process-nextick-args":"/home/michel/stanza.io/node_modules/process-nextick-args/index.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js","string_decoder/":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/string_decoder/lib/string_decoder.js",util:"/home/michel/stanza.io/node_modules/browser-resolve/empty.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js":[function(e,t,n){"use strict";function TransformState(e){this.afterTransform=function(t,n){return afterTransform(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&e.push(n),r(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);i.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){done(t,e,n)}):done(t)})}function done(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var i=e._writableState,r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=Transform;var i=e("./_stream_duplex"),r=e("core-util-is");r.inherits=e("inherits"),r.inherits(Transform,i),Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},Transform.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},Transform.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js","core-util-is":"/home/michel/stanza.io/node_modules/core-util-is/lib/util.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js":[function(e,t,n){(function(n,i){"use strict";function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}function _uint8ArrayToBuffer(e){return l.from(e)}function _isUint8Array(e){return l.isBuffer(e)||e instanceof d}function nop(){}function WritableState(t,n){s=s||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof s&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,
this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(t){if(s=s||e("./_stream_duplex"),!(h.call(Writable,this)||this instanceof s))return new Writable(t);this._writableState=new WritableState(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function writeAfterEnd(e,t){var n=new Error("write after end");e.emit("error",n),r(t,n)}function validChunk(e,t,n,i){var s=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),r(i,o),s=!1),s}function decodeChunk(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}function writeOrBuffer(e,t,n,i,r,s){if(!n){var o=decodeChunk(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var a=t.objectMode?1:i.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,i,r,s);return c}function doWrite(e,t,n,i,r,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function onwriteError(e,t,n,i,s){--t.pendingcb,n?(r(s,i),r(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(onwriteStateUpdate(n),t)onwriteError(e,n,i,t,r);else{var s=needFinish(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||clearBuffer(e,n),i?o(afterWrite,e,n,s,r):afterWrite(e,n,s,r)}}function afterWrite(e,t,n,i){n||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)r[o]=n,n.isBuf||(a=!1),n=n.next,o+=1;r.allBuffers=a,doWrite(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;n;){var c=n.chunk,u=n.encoding,l=n.callback;if(doWrite(e,t,!1,t.objectMode?1:c.length,c,u,l),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r(callFinal,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function finishMaybe(e,t){var n=needFinish(t);return n&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function endWritable(e,t,n){t.ending=!0,finishMaybe(e,t),n&&(t.finished?r(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var r=e("process-nextick-args");t.exports=Writable;var s,o=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:r;Writable.WritableState=WritableState;var a=e("core-util-is");a.inherits=e("inherits");var c={deprecate:e("util-deprecate")},u=e("./internal/streams/stream"),l=e("safe-buffer").Buffer,d=i.Uint8Array||function(){},f=e("./internal/streams/destroy");a.inherits(Writable,u),WritableState.prototype.getBuffer=function getBuffer(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var h;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||e&&e._writableState instanceof WritableState}})):h=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,n){var i=this._writableState,r=!1,s=_isUint8Array(e)&&!i.objectMode;return s&&!l.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=nop),i.ended?writeAfterEnd(this,n):(s||validChunk(this,i,e,n))&&(i.pendingcb++,r=writeOrBuffer(this,i,s,e,t,n)),r},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,n)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=f.destroy,Writable.prototype._undestroy=f.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js","./internal/streams/destroy":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js","./internal/streams/stream":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js",_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js","core-util-is":"/home/michel/stanza.io/node_modules/core-util-is/lib/util.js",inherits:"/home/michel/stanza.io/node_modules/inherits/inherits_browser.js","process-nextick-args":"/home/michel/stanza.io/node_modules/process-nextick-args/index.js","safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js","util-deprecate":"/home/michel/stanza.io/node_modules/util-deprecate/browser.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/BufferList.js":[function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function copyBuffer(e,t,n){e.copy(t,n)}var i=e("safe-buffer").Buffer;t.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},BufferList.prototype.unshift=function unshift(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},BufferList.prototype.concat=function concat(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,r=0;n;)copyBuffer(n.data,t,r),r+=n.data.length,n=n.next;return t},BufferList}()},{"safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js":[function(e,t,n){"use strict";function destroy(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;if(r||s)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(emitErrorNT,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(emitErrorNT,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,t){e.emit("error",t)}var i=e("process-nextick-args");t.exports={destroy:destroy,undestroy:undestroy}},{"process-nextick-args":"/home/michel/stanza.io/node_modules/process-nextick-args/index.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js":[function(e,t,n){t.exports=e("events").EventEmitter},{events:"/home/michel/stanza.io/node_modules/events/events.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/passthrough.js":[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/readable-browser.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/readable-browser.js":[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js","./lib/_stream_passthrough.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_passthrough.js","./lib/_stream_readable.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js","./lib/_stream_transform.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js","./lib/_stream_writable.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/transform.js":[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/readable-browser.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/writable-browser.js":[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js"}],"/home/michel/stanza.io/node_modules/stream-browserify/node_modules/string_decoder/lib/string_decoder.js":[function(e,t,n){"use strict";function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}function StringDecoder(e){this.encoding=normalizeEncoding(e);var t;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function utf8CheckIncomplete(e,t,n){var i=t.length-1;if(i<n)return 0;var r=utf8CheckByte(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n?0:(r=utf8CheckByte(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n?0:(r=utf8CheckByte(t[i]),r>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0)}function utf8CheckExtraBytes(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,n=utf8CheckExtraBytes(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf8Text(e,t){var n=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t}function utf16Text(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function base64Text(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}var i=e("safe-buffer").Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":"/home/michel/stanza.io/node_modules/safe-buffer/index.js"}],"/home/michel/stanza.io/node_modules/string_decoder/index.js":[function(e,t,n){function assertEncoding(e){if(e&&!r(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var i=e("buffer").Buffer,r=i.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},s=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new i(6),this.charReceived=0,this.charLength=0};s.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,r)}return t},s.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},s.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},{buffer:"/home/michel/stanza.io/node_modules/buffer/index.js"}],"/home/michel/stanza.io/node_modules/trim/index.js":[function(e,t,n){function trim(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=trim,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],"/home/michel/stanza.io/node_modules/util-deprecate/browser.js":[function(e,t,n){(function(e){function deprecate(e,t){function deprecated(){if(!n){if(config("throwDeprecation"))throw new Error(t);config("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}if(config("noDeprecation"))return e;var n=!1;return deprecated}function config(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=deprecate}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/michel/stanza.io/node_modules/util/node_modules/inherits/inherits_browser.js":[function(e,t,n){arguments[4]["/home/michel/stanza.io/node_modules/inherits/inherits_browser.js"][0].apply(n,arguments)},{}],"/home/michel/stanza.io/node_modules/util/support/isBufferBrowser.js":[function(e,t,n){t.exports=function isBuffer(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],"/home/michel/stanza.io/node_modules/util/util.js":[function(e,t,n){(function(t,i){function inspect(e,t){var i={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),isBoolean(t)?i.showHidden=t:t&&n._extend(i,t),isUndefined(i.showHidden)&&(i.showHidden=!1),isUndefined(i.depth)&&(i.depth=2),isUndefined(i.colors)&&(i.colors=!1),isUndefined(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=stylizeWithColor),formatValue(i,e,i.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"["+inspect.colors[n][0]+"m"+e+"["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function formatValue(e,t,i){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return isString(r)||(r=formatValue(e,r,i)),r}var s=formatPrimitive(e,t);if(s)return s;var o=Object.keys(t),a=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),isError(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(t);if(0===o.length){if(isFunction(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var u="",l=!1,d=["{","}"];if(isArray(t)&&(l=!0,d=["[","]"]),isFunction(t)){u=" [Function"+(t.name?": "+t.name:"")+"]"}if(isRegExp(t)&&(u=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(u=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(u=" "+formatError(t)),0===o.length&&(!l||0==t.length))return d[0]+u+d[1];if(i<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var f;return f=l?formatArray(e,t,i,a,o):o.map(function(n){return formatProperty(e,t,i,a,n,l)}),e.seen.pop(),reduceToSingleString(f,u,d)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,i,r){for(var s=[],o=0,a=t.length;o<a;++o)hasOwnProperty(t,String(o))?s.push(formatProperty(e,t,n,i,String(o),!0)):s.push("");return r.forEach(function(r){r.match(/^\d+$/)||s.push(formatProperty(e,t,n,i,r,!0))}),s}function formatProperty(e,t,n,i,r,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),hasOwnProperty(i,r)||(o="["+r+"]"),a||(e.seen.indexOf(c.value)<0?(a=isNull(n)?formatValue(e,c.value,null):formatValue(e,c.value,n-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),isUndefined(o)){if(s&&r.match(/^\d+$/))return a;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function reduceToSingleString(e,t,n){var i=0;return e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),a[e.getMonth()],t].join(" ")}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r=/%[sdj%]/g;n.format=function(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,s=i.length,o=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),a=i[n];n<s;a=i[++n])isNull(a)||!isObject(a)?o+=" "+a:o+=" "+inspect(a);return o},n.deprecate=function(e,r){function deprecated(){if(!s){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),s=!0}return e.apply(this,arguments)}if(isUndefined(i.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var s=!1;return deprecated};var s,o={};n.debuglog=function(e){if(isUndefined(s)&&(s=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var i=t.pid;o[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else o[e]=function(){};return o[e]},n.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=isArray,n.isBoolean=isBoolean,n.isNull=isNull,n.isNullOrUndefined=isNullOrUndefined,n.isNumber=isNumber,n.isString=isString,n.isSymbol=isSymbol,n.isUndefined=isUndefined,n.isRegExp=isRegExp,n.isObject=isObject,n.isDate=isDate,n.isError=isError,n.isFunction=isFunction,n.isPrimitive=isPrimitive,n.isBuffer=e("./support/isBuffer");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",timestamp(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":"/home/michel/stanza.io/node_modules/util/support/isBufferBrowser.js",_process:"/home/michel/stanza.io/node_modules/browserify/node_modules/process/browser.js",inherits:"/home/michel/stanza.io/node_modules/util/node_modules/inherits/inherits_browser.js"}],"/home/michel/stanza.io/node_modules/uuid/index.js":[function(e,t,n){var i=e("./v1"),r=e("./v4"),s=r;s.v1=i,s.v4=r,t.exports=s},{"./v1":"/home/michel/stanza.io/node_modules/uuid/v1.js","./v4":"/home/michel/stanza.io/node_modules/uuid/v4.js"}],"/home/michel/stanza.io/node_modules/uuid/lib/bytesToUuid.js":[function(e,t,n){function bytesToUuid(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=bytesToUuid},{}],"/home/michel/stanza.io/node_modules/uuid/lib/rng-browser.js":[function(e,t,n){(function(e){var n,i=e.crypto||e.msCrypto;if(i&&i.getRandomValues){var r=new Uint8Array(16);n=function whatwgRNG(){return i.getRandomValues(r),r}}if(!n){var s=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/michel/stanza.io/node_modules/uuid/v1.js":[function(e,t,n){function v1(e,t,n){var i=t&&n||0,s=t||[];e=e||{};var l=void 0!==e.clockseq?e.clockseq:a,d=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:u+1,h=d-c+(f-u)/1e4;if(h<0&&void 0===e.clockseq&&(l=l+1&16383),(h<0||d>c)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,u=f,a=l,d+=122192928e5;var m=(1e4*(268435455&d)+f)%4294967296;s[i++]=m>>>24&255,s[i++]=m>>>16&255,s[i++]=m>>>8&255,s[i++]=255&m;var p=d/4294967296*1e4&268435455;s[i++]=p>>>8&255,s[i++]=255&p,s[i++]=p>>>24&15|16,s[i++]=p>>>16&255,s[i++]=l>>>8|128,s[i++]=255&l;for(var b=e.node||o,g=0;g<6;++g)s[i+g]=b[g];return t||r(s)}var i=e("./lib/rng"),r=e("./lib/bytesToUuid"),s=i(),o=[1|s[0],s[1],s[2],s[3],s[4],s[5]],a=16383&(s[6]<<8|s[7]),c=0,u=0;t.exports=v1},{"./lib/bytesToUuid":"/home/michel/stanza.io/node_modules/uuid/lib/bytesToUuid.js","./lib/rng":"/home/michel/stanza.io/node_modules/uuid/lib/rng-browser.js"}],"/home/michel/stanza.io/node_modules/uuid/v4.js":[function(e,t,n){function v4(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||r(o)}var i=e("./lib/rng"),r=e("./lib/bytesToUuid");t.exports=v4},{"./lib/bytesToUuid":"/home/michel/stanza.io/node_modules/uuid/lib/bytesToUuid.js","./lib/rng":"/home/michel/stanza.io/node_modules/uuid/lib/rng-browser.js"}],"/home/michel/stanza.io/node_modules/wildemitter/wildemitter.js":[function(e,t,n){function WildEmitter(){}t.exports=WildEmitter,WildEmitter.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,r=i?arguments[1]:void 0,s=i?arguments[2]:arguments[1];return s._groupName=r,(this.callbacks[e]=this.callbacks[e]||[]).push(s),this},t.once=function(e,t,n){function on(){i.off(e,on),o.apply(this,arguments)}var i=this,r=3===arguments.length,s=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return this.on(e,s,on),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,n,i,r;for(t in this.callbacks)for(r=this.callbacks[t],n=0,i=r.length;n<i;n++)r[n]._groupName===e&&(r.splice(n,1),n--,i--);return this},t.off=function(e,t){
this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),i.splice(n,1),0===i.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,r=[].slice.call(arguments,1),s=this.callbacks[e],o=this.getWildcardCallbacks(e);if(s)for(i=s.slice(),t=0,n=i.length;t<n&&i[t];++t)i[t].apply(this,r);if(o)for(n=o.length,i=o.slice(),t=0,n=i.length;t<n&&i[t];++t)i[t].apply(this,[e].concat(r));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},WildEmitter.mixin(WildEmitter)},{}],"/home/michel/stanza.io/node_modules/xhr/index.js":[function(e,t,n){"use strict";function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function initParams(e,t,n){var i=e;return r(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=o(t,{uri:e}),i.callback=n,i}function createXHR(e,t,n){return t=initParams(e,t,n),_createXHR(t)}function _createXHR(e){function readystatechange(){4===i.readyState&&setTimeout(loadFunc,0)}function getBody(){var e=void 0;if(e=i.response?i.response:i.responseText||getXml(i),h)try{e=JSON.parse(e)}catch(e){}return e}function errorFunc(e){return clearTimeout(a),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,m)}function loadFunc(){if(!o){var t;clearTimeout(a),t=e.useXDR&&void 0===i.status?200:1223===i.status?204:i.status;var r=m,l=null;return 0!==t?(r={body:getBody(),statusCode:t,method:u,headers:{},url:c,rawRequest:i},i.getAllResponseHeaders&&(r.headers=s(i.getAllResponseHeaders()))):l=new Error("Internal XMLHttpRequest Error"),n(l,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function cbOnce(n,i,r){t||(t=!0,e.callback(n,i,r))},i=e.xhr||null;i||(i=e.cors||e.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var r,o,a,c=i.url=e.uri||e.url,u=i.method=e.method||"GET",l=e.body||e.data,d=i.headers=e.headers||{},f=!!e.sync,h=!1,m={body:void 0,headers:{},statusCode:0,method:u,url:c,rawRequest:i};if("json"in e&&!1!==e.json&&(h=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),l=JSON.stringify(!0===e.json?l:e.json))),i.onreadystatechange=readystatechange,i.onload=loadFunc,i.onerror=errorFunc,i.onprogress=function(){},i.onabort=function(){o=!0},i.ontimeout=errorFunc,i.open(u,c,!f,e.username,e.password),f||(i.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(a=setTimeout(function(){if(!o){o=!0,i.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",errorFunc(e)}},e.timeout)),i.setRequestHeader)for(r in d)d.hasOwnProperty(r)&&i.setRequestHeader(r,d[r]);else if(e.headers&&!isEmpty(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(i.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(i),i.send(l||null),i}function getXml(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function noop(){}var i=e("global/window"),r=e("is-function"),s=e("parse-headers"),o=e("xtend");t.exports=createXHR,createXHR.XMLHttpRequest=i.XMLHttpRequest||noop,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:i.XDomainRequest,function forEachArray(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){createXHR["delete"===e?"del":e]=function(t,n,i){return n=initParams(t,n,i),n.method=e.toUpperCase(),_createXHR(n)}})},{"global/window":"/home/michel/stanza.io/node_modules/global/window.js","is-function":"/home/michel/stanza.io/node_modules/is-function/index.js","parse-headers":"/home/michel/stanza.io/node_modules/parse-headers/parse-headers.js",xtend:"/home/michel/stanza.io/node_modules/xtend/immutable.js"}],"/home/michel/stanza.io/node_modules/xmpp-constants/index.js":[function(e,t,n){t.exports={Namespace:e("./lib/namespaces"),MUC:e("./lib/muc"),PubSub:e("./lib/pubsub"),Jingle:e("./lib/jingle"),Presence:e("./lib/presence")}},{"./lib/jingle":"/home/michel/stanza.io/node_modules/xmpp-constants/lib/jingle.js","./lib/muc":"/home/michel/stanza.io/node_modules/xmpp-constants/lib/muc.js","./lib/namespaces":"/home/michel/stanza.io/node_modules/xmpp-constants/lib/namespaces.js","./lib/presence":"/home/michel/stanza.io/node_modules/xmpp-constants/lib/presence.js","./lib/pubsub":"/home/michel/stanza.io/node_modules/xmpp-constants/lib/pubsub.js"}],"/home/michel/stanza.io/node_modules/xmpp-constants/lib/jingle.js":[function(e,t,n){t.exports={Action:{CONTENT_ACCEPT:"content-accept",CONTENT_ADD:"content-add",CONTENT_MODIFY:"content-modify",CONTENT_REJECT:"content-reject",CONTENT_REMOVE:"content-remove",DESCRIPTION_INFO:"description-info",SECURITY_INFO:"security-info",SESSION_ACCEPT:"session-accept",SESSION_INFO:"session-info",SESSION_INITIATE:"session-initiate",SESSION_TERMINATE:"session-terminate",TRANSPORT_ACCEPT:"transport-accept",TRANSPORT_INFO:"transport-info",TRANSPORT_REJECT:"transport-reject",TRANSPORT_REPLACE:"transport-replace"},Reason:{ALTERNATIVE_SESSION:"alernative-session",BUSY:"busy",CANCEL:"cancel",CONNECTIVITY_ERROR:"connectivity-error",DECLINE:"decline",EXPIRED:"expired",FAILED_APPLICATION:"failed-application",FAILED_TRANSPORT:"failed-transport",GENERAL_ERROR:"general-error",GONE:"gone",INCOMPATIBLE_PARAMETERS:"incompatible-parameters",MEDIA_ERROR:"media-error",SECURITY_ERROR:"security-error",SUCCESS:"success",TIMEOUT:"timeout",UNSUPPORTED_APPLICATIONS:"unsupported-applications",UNSUPPORTED_TRANSPORTS:"unsupported-transports"},Condition:{OUT_OF_ORDER:"out-of-order",TIE_BREAK:"tie-break",UNKNOWN_SESSION:"unknown-session",UNSUPPORTED_INFO:"unsupported-info"}}},{}],"/home/michel/stanza.io/node_modules/xmpp-constants/lib/muc.js":[function(e,t,n){t.exports={Status:{REALJID_PUBLIC:"100",AFFILIATION_CHANGED:"101",UNAVAILABLE_SHOWN:"102",UNAVAILABLE_NOT_SHOWN:"103",CONFIGURATION_CHANGED:"104",SELF_PRESENCE:"110",LOGGING_ENABLED:"170",LOGGING_DISABLED:"171",NON_ANONYMOUS:"172",SEMI_ANONYMOUS:"173",FULLY_ANONYMOUS:"174",ROOM_CREATED:"201",NICK_ASSIGNED:"210",BANNED:"301",NEW_NICK:"303",KICKED:"307",REMOVED_AFFILIATION:"321",REMOVED_MEMBERSHIP:"322",REMOVED_SHUTDOWN:"332"},Affiliation:{ADMIN:"admin",MEMBER:"member",NONE:"none",OUTCAST:"outcast",OWNER:"owner"},Role:{MODERATOR:"moderator",NONE:"none",PARTICIPANT:"participant",VISITOR:"visitor"}}},{}],"/home/michel/stanza.io/node_modules/xmpp-constants/lib/namespaces.js":[function(e,t,n){t.exports={BIND:"urn:ietf:params:xml:ns:xmpp-bind",CLIENT:"jabber:client",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",SERVER:"jabber:server",SESSION:"urn:ietf:params:xml:ns:xmpp-session",STANZA_ERROR:"urn:ietf:params:xml:ns:xmpp-stanzas",STREAM:"http://etherx.jabber.org/streams",STREAM_ERROR:"urn:ietf:params:xml:ns:xmpp-streams",ROSTER:"jabber:iq:roster",ROSTER_VERSIONING:"urn:xmpp:features:rosterver",SUBSCRIPTION_PREAPPROVAL:"urn:xmpp:features:pre-approval",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",DATAFORM:"jabber:x:data",RPC:"jabber:iq:rpc",LAST_ACTIVITY:"jabber:iq:last",PRIVACY:"jabber:iq:privacy",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",ADDRESS:"http://jabber.org/protocol/address",MUC:"http://jabber.org/protocol/muc",MUC_ADMIN:"http://jabber.org/protocol/muc#admin",MUC_OWNER:"http://jabber.org/protocol/muc#owner",MUC_USER:"http://jabber.org/protocol/muc#user",IBB:"http://jabber.org/protocol/ibb",BOOKMARKS:"storage:bookmarks",PRIVATE:"jabber:iq:private",ADHOC_COMMANDS:"http://jabber.org/protocol/commands",VCARD_TEMP:"vcard-temp",SEARCH:"jabber:iq:search",RSM:"http://jabber.org/protocol/rsm",PUBSUB:"http://jabber.org/protocol/pubsub",PUBSUB_ERRORS:"http://jabber.org/protocol/pubsub#errors",PUBSUB_EVENT:"http://jabber.org/protocol/pubsub#event",PUBSUB_OWNER:"http://jabber.org/protocol/pubsub#owner",SOCKS5:"http://jabber.org/protocol/bytestreams",OOB_IQ:"jabber:iq:oob",OOB:"jabber:x:oob",HTTP_AUTH:"http://jabber.org/protocol/http-auth",XHTML_IM:"http://jabber.org/protocol/xhtml-im",REGISTER:"jabber:iq:register",AMP:"http://jabber.org/protocol/amp",GEOLOC:"http://jabber.org/protocol/geoloc",ROSTER_DELIMITER:"roster:delimiter",AVATAR_DATA:"urn:xmpp:avatar:data",AVATAR_METADATA:"urn:xmpp:avatar:metadata",CHAT_STATES:"http://jabber.org/protocol/chatstates",VERSION:"jabber:iq:version",MOOD:"http://jabber.org/protocol/mood",ACTIVITY:"http://jabber.org/protocol/activity",COMPONENT:"jabber:component:accept",CAPS:"http://jabber.org/protocol/caps",TUNE:"http://jabber.org/protocol/tune",DATAFORM_VALIDATION:"http://jabber.org/protocol/xdata-validate",BOSH:"http://jabber.org/protocol/httpbind",SHIM:"http://jabber.org/protocol/shim",COMPRESSION:"http://jabber.org/features/compress",DATAFORM_LAYOUT:"http://jabber.org/protocol/xdata-layout",ROSTER_EXCHANGE:"http://jabber.org/protocol/rosterx",ROSTER_NOTES:"storage:rosternotes",REACH_0:"urn:xmpp:reach:0",VCARD_TEMP_UPDATE:"vcard-temp:x:update",CAPTCHA:"urn:xmpp:captcha",JINGLE_1:"urn:xmpp:jingle:1",JINGLE_ERRORS_1:"urn:xmpp:jingle:errors:1",JINGLE_RTP_1:"urn:xmpp:jingle:apps:rtp:1",JINGLE_RTP_ERRORS_1:"urn:xmpp:jingle:apps:rtp:errors:1",JINGLE_RTP_INFO_1:"urn:xmpp:jingle:apps:rtp:info:1",LANG_TRANS:"urn:xmpp:langtrans",LANG_TRANS_ITEMS:"urn:xmpp:langtrans:items",NICK:"http://jabber.org/protocol/nick",JINGLE_ICE_UDP_1:"urn:xmpp:jingle:transports:ice-udp:1",JINGLE_RAW_UDP_1:"urn:xmpp:jingle:transports:raw-udp:1",RECEIPTS:"urn:xmpp:receipts",INVISIBLE_0:"urn:xmpp:invisible:0",BLOCKING:"urn:xmpp:blocking",SMACKS_3:"urn:xmpp:sm:3",PING:"urn:xmpp:ping",TIME:"urn:xmpp:time",DELAY:"urn:xmpp:delay",BOSH_XMPP:"urn:xmpp:xbosh",DISCO_EXTERNAL_1:"urn:xmpp:extdisco:1",DATAFORM_MEDIA:"urn:xmpp:media-element",ATTENTION_0:"urn:xmpp:attention:0",BOB:"urn:xmpp:bob",FILE_TRANSFER_3:"urn:xmpp:jingle:apps:file-transfer:3",FILE_TRANSFER_4:"urn:xmpp:jingle:apps:file-transfer:4",FILE_TRANSFER_5:"urn:xmpp:jingle:apps:file-transfer:5",MUC_DIRECT_INVITE:"jabber:x:conference",SEC_LABEL_0:"urn:xmpp:sec-label:0",SEC_LABEL_CATALOG_2:"urn:xmpp:sec-label:catalog:2",SEC_LABEL_ESS_0:"urn:xmpp:sec-label:ess:0",JINGLE_SOCKS5_1:"urn:xmpp:jingle:transports:s5b:1",JINGLE_IBB_1:"urn:xmpp:jingle:transports:ibb:1",JINGLE_RTP_ZRTP_1:"urn:xmpp:jingle:apps:rtp:zrtp:1",THUMBS_0:"urn:xmpp:thumbs:0",THUMBS_1:"urn:xmpp:thumbs:1",DECLOAKING_0:"urn:xmpp:decloaking:0",CARBONS_2:"urn:xmpp:carbons:2",JINGLE_RTP_RTCP_FB_0:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",JINGLE_RTP_HDREXT_0:"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",FORWARD_0:"urn:xmpp:forward:0",HASHES_1:"urn:xmpp:hashes:1",RTT_0:"urn:xmpp:rtt:0",MUC_UNIQUE:"http://jabber.org/protocol/muc#unique",CORRECTION_0:"urn:xmpp:message-correct:0",PSA:"urn:xmpp:psa",MAM_TMP:"urn:xmpp:mam:tmp",MAM_0:"urn:xmpp:mam:0",MAM_1:"urn:xmpp:mam:1",MAM_2:"urn:xmpp:mam:2",HATS_0:"urn:xmpp:hats:0",IDLE_1:"urn:xmpp:idle:1",JINGLE_DTLS_0:"urn:xmpp:jingle:apps:dtls:0",JID_PREP_0:"urn:xmpp:jidprep:0",HINTS:"urn:xmpp:hints",JSON_0:"urn:xmpp:json:0",EVENTLOG:"urn:xmpp:eventlog",JINGLE_GROUPING_0:"urn:xmpp:jingle:apps:grouping:0",JINGLE_RTP_SSMA_0:"urn:xmpp:jingle:apps:rtp:ssma:0",COLIBRI:"http://jitsi.org/protocol/colibri",DTLS_SCTP_1:"urn:xmpp:jingle:transports:dtls-sctp:1",CSI:"urn:xmpp:csi",JINGLE_MSG_INITIATE_0:"urn:xmpp:jingle:jingle-message:0",PUSH_0:"urn:xmpp:push:0",JINGLE_PUB_1:"urn:xmpp:jinglepub:1",STANZA_ID_0:"urn:xmpp:sid:0",HTTP_UPLOAD_0:"urn:xmpp:http:upload:0",JINGLE_HTTP_0:"urn:xmpp:jingle:transports:http:0",JINGLE_HTTP_UPLOAD_0:"urn:xmpp:jingle:transports:http:upload:0",REFERENCE_0:"urn:xmpp:reference:0",SPOILER_0:"urn:xmppp:spoiler:0"}},{}],"/home/michel/stanza.io/node_modules/xmpp-constants/lib/presence.js":[function(e,t,n){t.exports={Type:{SUBSCRIBE:"subscribe",SUBSCRIBED:"subscribed",UNSUBSCRIBE:"unsubscribe",UNSUBSCRIBED:"unsubscribed",PROBE:"probe",UNAVAILABLE:"unavailable"},Show:{CHAT:"chat",AWAY:"away",DO_NOT_DISTURB:"dnd",EXTENDED_AWAY:"xa"}}},{}],"/home/michel/stanza.io/node_modules/xmpp-constants/lib/pubsub.js":[function(e,t,n){t.exports={Affiliation:{MEMBER:"member",NONE:"none",OUTCAST:"outcast",OWNER:"owner",PUBLISHER:"publisher",PUBLISH_ONLY:"publish-only"},Subscription:{NONE:"none",PENDING:"pending",UNCONFIGURED:"unconfigured",SUBSCRIBED:"subscribed"},AccessModel:{OPEN:"open",PRESENCE:"presence",ROSTER:"roster",AUTHORIZE:"authorize",WHITELIST:"whitelist"},Condition:{CONFLICT:"conflict"}}},{}],"/home/michel/stanza.io/node_modules/xmpp-jid/index.js":[function(e,t,n){"use strict";function bareJID(e,t){return e?e+"@"+t:t}function fullJID(e,t,n){return n?bareJID(e,t)+"/"+n:bareJID(e,t)}var i=e("./lib/stringprep"),r=/^[\x00-\x7F]*$/;n.prep=function(e){var t=e.local,r=e.domain,s=e.resource,o=t;return t&&(t=i.nodeprep(t),o=n.unescape(t)),s&&(s=i.resourceprep(s)),"."===r[r.length-1]&&(r=r.slice(0,r.length-1)),r=i.nameprep(r.split(".").map(i.toUnicode).join(".")),{prepped:e.prepped||i.available,local:t,domain:r,resource:s,bare:bareJID(t,r),full:fullJID(t,r,s),unescapedLocal:o,unescapedBare:bareJID(o,r),unescapedFull:fullJID(o,r,s)}},n.parse=function(e,t){var i="",s="",o="";t=t||r.test(e);var a=e.indexOf("/");a>0&&(o=e.slice(a+1),e=e.slice(0,a));var c=e.indexOf("@");c>0&&(i=e.slice(0,c),e=e.slice(c+1)),s=e;var u=n.prep({local:i,domain:s,resource:o});return u.prepped=u.prepped||t,u},n.equal=function(e,t,i){return e=new n.JID(e),t=new n.JID(t),2===arguments.length&&(i=!0),e.local===t.local&&e.domain===t.domain&&e.resource===t.resource&&(!i||e.prepped&&t.prepped)},n.equalBare=function(e,t,i){return e=new n.JID(e),t=new n.JID(t),2===arguments.length&&(i=!0),e.local===t.local&&e.domain===t.domain&&(!i||e.prepped&&t.prepped)},n.isBare=function(e){return e=new n.JID(e),!!!e.resource},n.isFull=function(e){return e=new n.JID(e),!!e.resource},n.escape=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\5c/g,"\\5c5c").replace(/\\20/g,"\\5c20").replace(/\\22/g,"\\5c22").replace(/\\26/g,"\\5c26").replace(/\\27/g,"\\5c27").replace(/\\2f/g,"\\5c2f").replace(/\\3a/g,"\\5c3a").replace(/\\3c/g,"\\5c3c").replace(/\\3e/g,"\\5c3e").replace(/\\40/g,"\\5c40").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},n.unescape=function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},n.create=function(e,t,i){return new n.JID(e,t,i)},n.JID=function JID(e,t,i){var s={};if(!e||t||i)if(t){var o=r.test(e)&&r.test(t);i&&(o=o&&r.test(i)),s=n.prep({local:n.escape(e),domain:t,resource:i,prepped:o})}else s={};else if("string"==typeof e)s=n.parse(e);else{if(!(e._isJID||e instanceof n.JID))throw new Error("Invalid argument type");s=e}this._isJID=!0,this.local=s.local||"",this.domain=s.domain||"",this.resource=s.resource||"",this.bare=s.bare||"",this.full=s.full||"",this.unescapedLocal=s.unescapedLocal||"",this.unescapedBare=s.unescapedBare||"",this.unescapedFull=s.unescapedFull||"",this.prepped=s.prepped},n.JID.prototype.toString=function(){return this.full},n.JID.prototype.toJSON=function(){return this.full}},{"./lib/stringprep":"/home/michel/stanza.io/node_modules/xmpp-jid/lib/stringprep-browser.js"}],"/home/michel/stanza.io/node_modules/xmpp-jid/lib/stringprep-browser.js":[function(e,t,n){"use strict";var i=e("punycode");n.available=!1,n.toUnicode=i.toUnicode,n.nameprep=function(e){return e.toLowerCase()},n.nodeprep=function(e){return e.toLowerCase()},n.resourceprep=function(e){return e}},{punycode:"/home/michel/stanza.io/node_modules/punycode/punycode.js"}],"/home/michel/stanza.io/node_modules/xtend/immutable.js":[function(e,t,n){function extend(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=extend;var i=Object.prototype.hasOwnProperty},{}]},{},["/home/michel/stanza.io/index.js"])("/home/michel/stanza.io/index.js")});
